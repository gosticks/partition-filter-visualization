var Eu=Object.defineProperty;var Tu=(e,t,r)=>t in e?Eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var qe=(e,t,r)=>(Tu(e,typeof t!="symbol"?t+"":t,r),r);import{S as Se,i as Ee,s as Te,O as Mr,P as Ur,m as A,h as y,n as m,b as B,D as S,G as bt,k as L,a as ut,l as k,c as dt,ab as ct,C as lt,Y as lr,Z as Cs,q as pt,r as yt,I as wn,J as vn,K as In,L as Sn,g as V,d as j,v as Qe,f as Je,ac as ri,a1 as Ba,ad as Pr,ae as La,W as Do,H as Au,E as Ou,F as Bo,T as Ru,y as _t,z as wt,A as vt,af as ka,ag as xa,B as It,e as ni,R as Nu,w as Fu,a3 as Du,a4 as Bu,_ as Ca,u as Ms,M as Lu,X as Lo,N as ku}from"./index.14b8a44d.js";import{w as ii,r as ko}from"./index.fb042441.js";import{_ as hs}from"./preload-helper.a4192956.js";import{n as Ke,w as Us,d as xu,f as xo,B as si,b as Co,c as Cu}from"./fadeSlide.f65added.js";function Mu(e){let t,r,n;return{c(){t=Mr("svg"),r=Mr("polyline"),this.h()},l(i){t=Ur(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=A(t);r=Ur(s,"polyline",{points:!0}),A(r).forEach(y),s.forEach(y),this.h()},h(){m(r,"points","20 6 9 17 4 12"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"width",e[0]),m(t,"height",e[0]),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke","currentColor"),m(t,"stroke-width",e[1]),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"class",n="feather feather-check "+e[2])},m(i,s){B(i,t,s),S(t,r)},p(i,[s]){s&1&&m(t,"width",i[0]),s&1&&m(t,"height",i[0]),s&2&&m(t,"stroke-width",i[1]),s&4&&n!==(n="feather feather-check "+i[2])&&m(t,"class",n)},i:bt,o:bt,d(i){i&&y(t)}}}function Uu(e,t,r){let{size:n="24"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),e.$$set=o=>{"size"in o&&r(0,n=o.size),"strokeWidth"in o&&r(1,i=o.strokeWidth),"class"in o&&r(2,s=o.class)},[n,i,s]}class Pu extends Se{constructor(t){super(),Ee(this,t,Uu,Mu,Te,{size:0,strokeWidth:1,class:2})}}function Vu(e){let t,r,n;return{c(){t=Mr("svg"),r=Mr("polyline"),this.h()},l(i){t=Ur(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=A(t);r=Ur(s,"polyline",{points:!0}),A(r).forEach(y),s.forEach(y),this.h()},h(){m(r,"points","6 9 12 15 18 9"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"width",e[0]),m(t,"height",e[0]),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke","currentColor"),m(t,"stroke-width",e[1]),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"class",n="feather feather-chevron-down "+e[2])},m(i,s){B(i,t,s),S(t,r)},p(i,[s]){s&1&&m(t,"width",i[0]),s&1&&m(t,"height",i[0]),s&2&&m(t,"stroke-width",i[1]),s&4&&n!==(n="feather feather-chevron-down "+i[2])&&m(t,"class",n)},i:bt,o:bt,d(i){i&&y(t)}}}function zu(e,t,r){let{size:n="24"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),e.$$set=o=>{"size"in o&&r(0,n=o.size),"strokeWidth"in o&&r(1,i=o.strokeWidth),"class"in o&&r(2,s=o.class)},[n,i,s]}class $u extends Se{constructor(t){super(),Ee(this,t,zu,Vu,Te,{size:0,strokeWidth:1,class:2})}}function ju(e){let t,r,n;return{c(){t=Mr("svg"),r=Mr("polyline"),this.h()},l(i){t=Ur(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=A(t);r=Ur(s,"polyline",{points:!0}),A(r).forEach(y),s.forEach(y),this.h()},h(){m(r,"points","18 15 12 9 6 15"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"width",e[0]),m(t,"height",e[0]),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke","currentColor"),m(t,"stroke-width",e[1]),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"class",n="feather feather-chevron-up "+e[2])},m(i,s){B(i,t,s),S(t,r)},p(i,[s]){s&1&&m(t,"width",i[0]),s&1&&m(t,"height",i[0]),s&2&&m(t,"stroke-width",i[1]),s&4&&n!==(n="feather feather-chevron-up "+i[2])&&m(t,"class",n)},i:bt,o:bt,d(i){i&&y(t)}}}function qu(e,t,r){let{size:n="24"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),e.$$set=o=>{"size"in o&&r(0,n=o.size),"strokeWidth"in o&&r(1,i=o.strokeWidth),"class"in o&&r(2,s=o.class)},[n,i,s]}class Gu extends Se{constructor(t){super(),Ee(this,t,qu,ju,Te,{size:0,strokeWidth:1,class:2})}}function Yu(e){let t,r,n,i;return{c(){t=L("div"),r=L("div"),n=ut(),i=L("div"),this.h()},l(s){t=k(s,"DIV",{class:!0});var o=A(t);r=k(o,"DIV",{class:!0}),A(r).forEach(y),n=dt(o),i=k(o,"DIV",{class:!0}),A(i).forEach(y),o.forEach(y),this.h()},h(){m(r,"class","bg-gradient-to-tr from-background-50 to-background-200 dark:from-background-950 dark:to-background-950 svelte-grc2oa"),m(i,"class","grid-background svelte-grc2oa"),m(t,"class","grid-bg-container svelte-grc2oa")},m(s,o){B(s,t,o),S(t,r),S(t,n),S(t,i)},p:bt,i:bt,o:bt,d(s){s&&y(t)}}}class N0 extends Se{constructor(t){super(),Ee(this,t,null,Yu,Te,{})}}var $i=(e=>(e.PLANE="plane",e))($i||{});class Wu{constructor(t){qe(this,"active",!1);qe(this,"filterOptions");this.filterOptions=t}static fromString(t){return null}}var Wt=(e=>(e[e.BUILD_IN=0]="BUILD_IN",e[e.URL=1]="URL",e[e.FILE=2]="FILE",e))(Wt||{}),Hu={value:()=>{}};function Ma(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new qn(r)}function qn(e){this._=e}function Ku(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}qn.prototype=Ma.prototype={constructor:qn,on:function(e,t){var r=this._,n=Ku(e+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(e=n[s]).type)&&(i=Qu(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=n[s]).type)r[i]=Mo(r[i],e.name,t);else if(t==null)for(i in r)r[i]=Mo(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new qn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,i=s.length;n<i;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)}};function Qu(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function Mo(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=Hu,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var fs="http://www.w3.org/1999/xhtml";const Uo={svg:"http://www.w3.org/2000/svg",xhtml:fs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ji(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Uo.hasOwnProperty(t)?{space:Uo[t],local:e}:e}function Ju(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===fs&&t.documentElement.namespaceURI===fs?t.createElement(e):t.createElementNS(r,e)}}function Xu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ua(e){var t=ji(e);return(t.local?Xu:Ju)(t)}function Zu(){}function Ps(e){return e==null?Zu:function(){return this.querySelector(e)}}function td(e){typeof e!="function"&&(e=Ps(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new re(n,this._parents)}function ed(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rd(){return[]}function Pa(e){return e==null?rd:function(){return this.querySelectorAll(e)}}function nd(e){return function(){return ed(e.apply(this,arguments))}}function id(e){typeof e=="function"?e=nd(e):e=Pa(e);for(var t=this._groups,r=t.length,n=[],i=[],s=0;s<r;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(n.push(e.call(c,c.__data__,l,o)),i.push(c));return new re(n,i)}function Va(e){return function(){return this.matches(e)}}function za(e){return function(t){return t.matches(e)}}var sd=Array.prototype.find;function od(e){return function(){return sd.call(this.children,e)}}function ad(){return this.firstElementChild}function cd(e){return this.select(e==null?ad:od(typeof e=="function"?e:za(e)))}var ld=Array.prototype.filter;function ud(){return Array.from(this.children)}function dd(e){return function(){return ld.call(this.children,e)}}function hd(e){return this.selectAll(e==null?ud:dd(typeof e=="function"?e:za(e)))}function fd(e){typeof e!="function"&&(e=Va(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new re(n,this._parents)}function $a(e){return new Array(e.length)}function gd(){return new re(this._enter||this._groups.map($a),this._parents)}function oi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}oi.prototype={constructor:oi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bd(e){return function(){return e}}function pd(e,t,r,n,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):r[o]=new oi(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function yd(e,t,r,n,i,s,o){var a,c,l=new Map,u=t.length,d=s.length,h=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(h[a]=g=o.call(c,c.__data__,a,t)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<d;++a)g=o.call(e,s[a],a,s)+"",(c=l.get(g))?(n[a]=c,c.__data__=s[a],l.delete(g)):r[a]=new oi(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(h[a])===c&&(i[a]=c)}function md(e){return e.__data__}function _d(e,t){if(!arguments.length)return Array.from(this,md);var r=t?yd:pd,n=this._parents,i=this._groups;typeof e!="function"&&(e=bd(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=n[l],d=i[l],h=d.length,g=wd(e.call(u,u&&u.__data__,l,n)),b=g.length,p=a[l]=new Array(b),_=o[l]=new Array(b),T=c[l]=new Array(h);r(u,d,p,_,T,g,t);for(var I=0,$=0,K,at;I<b;++I)if(K=p[I]){for(I>=$&&($=I+1);!(at=_[$])&&++$<b;);K._next=at||null}}return o=new re(o,n),o._enter=a,o._exit=c,o}function wd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vd(){return new re(this._exit||this._groups.map($a),this._parents)}function Id(e,t,r){var n=this.enter(),i=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function Sd(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,s=n.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=r[c],u=n[c],d=l.length,h=a[c]=new Array(d),g,b=0;b<d;++b)(g=l[b]||u[b])&&(h[b]=g);for(;c<i;++c)a[c]=r[c];return new re(a,this._parents)}function Ed(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,s=n[i],o;--i>=0;)(o=n[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Td(e){e||(e=Ad);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var o=r[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new re(i,this._parents).order()}function Ad(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Od(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rd(){return Array.from(this)}function Nd(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length;i<s;++i){var o=n[i];if(o)return o}return null}function Fd(){let e=0;for(const t of this)++e;return e}function Dd(){return!this.node()}function Bd(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Ld(e){return function(){this.removeAttribute(e)}}function kd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xd(e,t){return function(){this.setAttribute(e,t)}}function Cd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Md(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Ud(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Pd(e,t){var r=ji(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?kd:Ld:typeof t=="function"?r.local?Ud:Md:r.local?Cd:xd)(r,t))}function ja(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Vd(e){return function(){this.style.removeProperty(e)}}function zd(e,t,r){return function(){this.style.setProperty(e,t,r)}}function $d(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function jd(e,t,r){return arguments.length>1?this.each((t==null?Vd:typeof t=="function"?$d:zd)(e,t,r??"")):Vr(this.node(),e)}function Vr(e,t){return e.style.getPropertyValue(t)||ja(e).getComputedStyle(e,null).getPropertyValue(t)}function qd(e){return function(){delete this[e]}}function Gd(e,t){return function(){this[e]=t}}function Yd(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Wd(e,t){return arguments.length>1?this.each((t==null?qd:typeof t=="function"?Yd:Gd)(e,t)):this.node()[e]}function qa(e){return e.trim().split(/^|\s+/)}function Vs(e){return e.classList||new Ga(e)}function Ga(e){this._node=e,this._names=qa(e.getAttribute("class")||"")}Ga.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ya(e,t){for(var r=Vs(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function Wa(e,t){for(var r=Vs(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function Hd(e){return function(){Ya(this,e)}}function Kd(e){return function(){Wa(this,e)}}function Qd(e,t){return function(){(t.apply(this,arguments)?Ya:Wa)(this,e)}}function Jd(e,t){var r=qa(e+"");if(arguments.length<2){for(var n=Vs(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?Qd:t?Hd:Kd)(r,t))}function Xd(){this.textContent=""}function Zd(e){return function(){this.textContent=e}}function th(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function eh(e){return arguments.length?this.each(e==null?Xd:(typeof e=="function"?th:Zd)(e)):this.node().textContent}function rh(){this.innerHTML=""}function nh(e){return function(){this.innerHTML=e}}function ih(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function sh(e){return arguments.length?this.each(e==null?rh:(typeof e=="function"?ih:nh)(e)):this.node().innerHTML}function oh(){this.nextSibling&&this.parentNode.appendChild(this)}function ah(){return this.each(oh)}function ch(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lh(){return this.each(ch)}function uh(e){var t=typeof e=="function"?e:Ua(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dh(){return null}function hh(e,t){var r=typeof e=="function"?e:Ua(e),n=t==null?dh:typeof t=="function"?t:Ps(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function fh(){var e=this.parentNode;e&&e.removeChild(this)}function gh(){return this.each(fh)}function bh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ph(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yh(e){return this.select(e?ph:bh)}function mh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _h(e){return function(t){e.call(this,t,this.__data__)}}function wh(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function vh(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,s;r<i;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Ih(e,t,r){return function(){var n=this.__on,i,s=_h(t);if(n){for(var o=0,a=n.length;o<a;++o)if((i=n[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=t;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(i):this.__on=[i]}}function Sh(e,t,r){var n=wh(e+""),i,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=n[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Ih:vh,i=0;i<s;++i)this.each(a(n[i],t,r));return this}function Ha(e,t,r){var n=ja(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Eh(e,t){return function(){return Ha(this,e,t)}}function Th(e,t){return function(){return Ha(this,e,t.apply(this,arguments))}}function Ah(e,t){return this.each((typeof t=="function"?Th:Eh)(e,t))}function*Oh(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length,o;i<s;++i)(o=n[i])&&(yield o)}var Rh=[null];function re(e,t){this._groups=e,this._parents=t}function En(){return new re([[document.documentElement]],Rh)}function Nh(){return this}re.prototype=En.prototype={constructor:re,select:td,selectAll:id,selectChild:cd,selectChildren:hd,filter:fd,data:_d,enter:gd,exit:vd,join:Id,merge:Sd,selection:Nh,order:Ed,sort:Td,call:Od,nodes:Rd,node:Nd,size:Fd,empty:Dd,each:Bd,attr:Pd,style:jd,property:Wd,classed:Jd,text:eh,html:sh,raise:ah,lower:lh,append:uh,insert:hh,remove:gh,clone:yh,datum:mh,on:Sh,dispatch:Ah,[Symbol.iterator]:Oh};function zs(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ka(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Tn(){}var ln=.7,ai=1/ln,Dr="\\s*([+-]?\\d+)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fh=/^#([0-9a-f]{3,8})$/,Dh=new RegExp(`^rgb\\(${Dr},${Dr},${Dr}\\)$`),Bh=new RegExp(`^rgb\\(${_e},${_e},${_e}\\)$`),Lh=new RegExp(`^rgba\\(${Dr},${Dr},${Dr},${un}\\)$`),kh=new RegExp(`^rgba\\(${_e},${_e},${_e},${un}\\)$`),xh=new RegExp(`^hsl\\(${un},${_e},${_e}\\)$`),Ch=new RegExp(`^hsla\\(${un},${_e},${_e},${un}\\)$`),Po={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zs(Tn,dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vo,formatHex:Vo,formatHex8:Mh,formatHsl:Uh,formatRgb:zo,toString:zo});function Vo(){return this.rgb().formatHex()}function Mh(){return this.rgb().formatHex8()}function Uh(){return Qa(this).formatHsl()}function zo(){return this.rgb().formatRgb()}function dn(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Fh.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$o(t):r===3?new Lt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Cn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Cn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Dh.exec(e))?new Lt(t[1],t[2],t[3],1):(t=Bh.exec(e))?new Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lh.exec(e))?Cn(t[1],t[2],t[3],t[4]):(t=kh.exec(e))?Cn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xh.exec(e))?Go(t[1],t[2]/100,t[3]/100,1):(t=Ch.exec(e))?Go(t[1],t[2]/100,t[3]/100,t[4]):Po.hasOwnProperty(e)?$o(Po[e]):e==="transparent"?new Lt(NaN,NaN,NaN,0):null}function $o(e){return new Lt(e>>16&255,e>>8&255,e&255,1)}function Cn(e,t,r,n){return n<=0&&(e=t=r=NaN),new Lt(e,t,r,n)}function Ph(e){return e instanceof Tn||(e=dn(e)),e?(e=e.rgb(),new Lt(e.r,e.g,e.b,e.opacity)):new Lt}function gs(e,t,r,n){return arguments.length===1?Ph(e):new Lt(e,t,r,n??1)}function Lt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}zs(Lt,gs,Ka(Tn,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ln:Math.pow(ln,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Lt(yr(this.r),yr(this.g),yr(this.b),ci(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jo,formatHex:jo,formatHex8:Vh,formatRgb:qo,toString:qo}));function jo(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function Vh(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function qo(){const e=ci(this.opacity);return`${e===1?"rgb(":"rgba("}${yr(this.r)}, ${yr(this.g)}, ${yr(this.b)}${e===1?")":`, ${e})`}`}function ci(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=yr(e),(e<16?"0":"")+e.toString(16)}function Go(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new te(e,t,r,n)}function Qa(e){if(e instanceof te)return new te(e.h,e.s,e.l,e.opacity);if(e instanceof Tn||(e=dn(e)),!e)return new te;if(e instanceof te)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new te(o,a,c,e.opacity)}function zh(e,t,r,n){return arguments.length===1?Qa(e):new te(e,t,r,n??1)}function te(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}zs(te,zh,Ka(Tn,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new te(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ln:Math.pow(ln,e),new te(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Lt(Xi(e>=240?e-240:e+120,i,n),Xi(e,i,n),Xi(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new te(Yo(this.h),Mn(this.s),Mn(this.l),ci(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ci(this.opacity);return`${e===1?"hsl(":"hsla("}${Yo(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yo(e){return e=(e||0)%360,e<0?e+360:e}function Mn(e){return Math.max(0,Math.min(1,e||0))}function Xi(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ja=e=>()=>e;function $h(e,t){return function(r){return e+r*t}}function jh(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function qh(e){return(e=+e)==1?Xa:function(t,r){return r-t?jh(t,r,e):Ja(isNaN(t)?r:t)}}function Xa(e,t){var r=t-e;return r?$h(e,r):Ja(isNaN(e)?t:e)}const Wo=function e(t){var r=qh(t);function n(i,s){var o=r((i=gs(i)).r,(s=gs(s)).r),a=r(i.g,s.g),c=r(i.b,s.b),l=Xa(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return n.gamma=e,n}(1);function Ye(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var bs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zi=new RegExp(bs.source,"g");function Gh(e){return function(){return e}}function Yh(e){return function(t){return e(t)+""}}function Wh(e,t){var r=bs.lastIndex=Zi.lastIndex=0,n,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(n=bs.exec(e))&&(i=Zi.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Ye(n,i)})),r=Zi.lastIndex;return r<t.length&&(s=t.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Yh(c[0].x):Gh(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)a[(d=c[u]).i]=d.x(l);return a.join("")})}var Ho=180/Math.PI,ps={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Za(e,t,r,n,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Ho,skewX:Math.atan(c)*Ho,scaleX:o,scaleY:a}}var Un;function Hh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ps:Za(t.a,t.b,t.c,t.d,t.e,t.f)}function Kh(e){return e==null||(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",e),!(e=Un.transform.baseVal.consolidate()))?ps:(e=e.matrix,Za(e.a,e.b,e.c,e.d,e.e,e.f))}function tc(e,t,r,n){function i(l){return l.length?l.pop()+" ":""}function s(l,u,d,h,g,b){if(l!==d||u!==h){var p=g.push("translate(",null,t,null,r);b.push({i:p-4,x:Ye(l,d)},{i:p-2,x:Ye(u,h)})}else(d||h)&&g.push("translate("+d+t+h+r)}function o(l,u,d,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,n)-2,x:Ye(l,u)})):u&&d.push(i(d)+"rotate("+u+n)}function a(l,u,d,h){l!==u?h.push({i:d.push(i(d)+"skewX(",null,n)-2,x:Ye(l,u)}):u&&d.push(i(d)+"skewX("+u+n)}function c(l,u,d,h,g,b){if(l!==d||u!==h){var p=g.push(i(g)+"scale(",null,",",null,")");b.push({i:p-4,x:Ye(l,d)},{i:p-2,x:Ye(u,h)})}else(d!==1||h!==1)&&g.push(i(g)+"scale("+d+","+h+")")}return function(l,u){var d=[],h=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,d,h),o(l.rotate,u.rotate,d,h),a(l.skewX,u.skewX,d,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,h),l=u=null,function(g){for(var b=-1,p=h.length,_;++b<p;)d[(_=h[b]).i]=_.x(g);return d.join("")}}}var Qh=tc(Hh,"px, ","px)","deg)"),Jh=tc(Kh,", ",")",")"),zr=0,nn=0,en=0,ec=1e3,li,sn,ui=0,wr=0,qi=0,hn=typeof performance=="object"&&performance.now?performance:Date,rc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $s(){return wr||(rc(Xh),wr=hn.now()+qi)}function Xh(){wr=0}function di(){this._call=this._time=this._next=null}di.prototype=nc.prototype={constructor:di,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?$s():+r)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:li=this,sn=this),this._call=e,this._time=r,ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,ys())}};function nc(e,t,r){var n=new di;return n.restart(e,t,r),n}function Zh(){$s(),++zr;for(var e=li,t;e;)(t=wr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zr}function Ko(){wr=(ui=hn.now())+qi,zr=nn=0;try{Zh()}finally{zr=0,ef(),wr=0}}function tf(){var e=hn.now(),t=e-ui;t>ec&&(qi-=t,ui=e)}function ef(){for(var e,t=li,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:li=r);sn=e,ys(n)}function ys(e){if(!zr){nn&&(nn=clearTimeout(nn));var t=e-wr;t>24?(e<1/0&&(nn=setTimeout(Ko,e-hn.now()-qi)),en&&(en=clearInterval(en))):(en||(ui=hn.now(),en=setInterval(tf,ec)),zr=1,rc(Ko))}}function Qo(e,t,r){var n=new di;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var rf=Ma("start","end","cancel","interrupt"),nf=[],ic=0,Jo=1,ms=2,Gn=3,Xo=4,_s=5,Yn=6;function Gi(e,t,r,n,i,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;sf(e,r,{name:t,index:n,group:i,on:rf,tween:nf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ic})}function js(e,t){var r=ne(e,t);if(r.state>ic)throw new Error("too late; already scheduled");return r}function Ae(e,t){var r=ne(e,t);if(r.state>Gn)throw new Error("too late; already running");return r}function ne(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function sf(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=nc(s,0,r.time);function s(l){r.state=Jo,r.timer.restart(o,r.delay,r.time),r.delay<=l&&o(l-r.delay)}function o(l){var u,d,h,g;if(r.state!==Jo)return c();for(u in n)if(g=n[u],g.name===r.name){if(g.state===Gn)return Qo(o);g.state===Xo?(g.state=Yn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete n[u]):+u<t&&(g.state=Yn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete n[u])}if(Qo(function(){r.state===Gn&&(r.state=Xo,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=ms,r.on.call("start",e,e.__data__,r.index,r.group),r.state===ms){for(r.state=Gn,i=new Array(h=r.tween.length),u=0,d=-1;u<h;++u)(g=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(i[++d]=g);i.length=d+1}}function a(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=_s,1),d=-1,h=i.length;++d<h;)i[d].call(e,u);r.state===_s&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Yn,r.timer.stop(),delete n[t];for(var l in n)return;delete e.__transition}}function of(e,t){var r=e.__transition,n,i,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}i=n.state>ms&&n.state<_s,n.state=Yn,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function af(e){return this.each(function(){of(this,e)})}function cf(e,t){var r,n;return function(){var i=Ae(this,e),s=i.tween;if(s!==r){n=r=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function lf(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=Ae(this,e),o=s.tween;if(o!==n){i=(n=o).slice();for(var a={name:t,value:r},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function uf(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ne(this.node(),r).tween,i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===e)return o.value;return null}return this.each((t==null?cf:lf)(r,e,t))}function qs(e,t,r){var n=e._id;return e.each(function(){var i=Ae(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return ne(i,n).value[t]}}function sc(e,t){var r;return(typeof t=="number"?Ye:t instanceof dn?Wo:(r=dn(t))?(t=r,Wo):Wh)(e,t)}function df(e){return function(){this.removeAttribute(e)}}function hf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ff(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===n?s:s=t(n=o,r)}}function gf(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===n?s:s=t(n=o,r)}}function bf(e,t,r){var n,i,s;return function(){var o,a=r(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===n&&c===i?s:(i=c,s=t(n=o,a)))}}function pf(e,t,r){var n,i,s;return function(){var o,a=r(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===n&&c===i?s:(i=c,s=t(n=o,a)))}}function yf(e,t){var r=ji(e),n=r==="transform"?Jh:sc;return this.attrTween(e,typeof t=="function"?(r.local?pf:bf)(r,n,qs(this,"attr."+e,t)):t==null?(r.local?hf:df)(r):(r.local?gf:ff)(r,n,t))}function mf(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function _f(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function wf(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&_f(e,s)),r}return i._value=t,i}function vf(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&mf(e,s)),r}return i._value=t,i}function If(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=ji(e);return this.tween(r,(n.local?wf:vf)(n,t))}function Sf(e,t){return function(){js(this,e).delay=+t.apply(this,arguments)}}function Ef(e,t){return t=+t,function(){js(this,e).delay=t}}function Tf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sf:Ef)(t,e)):ne(this.node(),t).delay}function Af(e,t){return function(){Ae(this,e).duration=+t.apply(this,arguments)}}function Of(e,t){return t=+t,function(){Ae(this,e).duration=t}}function Rf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Af:Of)(t,e)):ne(this.node(),t).duration}function Nf(e,t){if(typeof t!="function")throw new Error;return function(){Ae(this,e).ease=t}}function Ff(e){var t=this._id;return arguments.length?this.each(Nf(t,e)):ne(this.node(),t).ease}function Df(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Ae(this,e).ease=r}}function Bf(e){if(typeof e!="function")throw new Error;return this.each(Df(this._id,e))}function Lf(e){typeof e!="function"&&(e=Va(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Ce(n,this._parents,this._name,this._id)}function kf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,s=Math.min(n,i),o=new Array(n),a=0;a<s;++a)for(var c=t[a],l=r[a],u=c.length,d=o[a]=new Array(u),h,g=0;g<u;++g)(h=c[g]||l[g])&&(d[g]=h);for(;a<n;++a)o[a]=t[a];return new Ce(o,this._parents,this._name,this._id)}function xf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Cf(e,t,r){var n,i,s=xf(t)?js:Ae;return function(){var o=s(this,e),a=o.on;a!==n&&(i=(n=a).copy()).on(t,r),o.on=i}}function Mf(e,t){var r=this._id;return arguments.length<2?ne(this.node(),r).on.on(e):this.each(Cf(r,e,t))}function Uf(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Pf(){return this.on("end.remove",Uf(this._id))}function Vf(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ps(e));for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o)for(var a=n[o],c=a.length,l=s[o]=new Array(c),u,d,h=0;h<c;++h)(u=a[h])&&(d=e.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d,Gi(l[h],t,r,h,l,ne(u,r)));return new Ce(s,this._parents,t,r)}function zf(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Pa(e));for(var n=this._groups,i=n.length,s=[],o=[],a=0;a<i;++a)for(var c=n[a],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var h=e.call(u,u.__data__,d,c),g,b=ne(u,r),p=0,_=h.length;p<_;++p)(g=h[p])&&Gi(g,t,r,p,h,b);s.push(h),o.push(u)}return new Ce(s,o,t,r)}var $f=En.prototype.constructor;function jf(){return new $f(this._groups,this._parents)}function qf(e,t){var r,n,i;return function(){var s=Vr(this,e),o=(this.style.removeProperty(e),Vr(this,e));return s===o?null:s===r&&o===n?i:i=t(r=s,n=o)}}function oc(e){return function(){this.style.removeProperty(e)}}function Gf(e,t,r){var n,i=r+"",s;return function(){var o=Vr(this,e);return o===i?null:o===n?s:s=t(n=o,r)}}function Yf(e,t,r){var n,i,s;return function(){var o=Vr(this,e),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Vr(this,e))),o===c?null:o===n&&c===i?s:(i=c,s=t(n=o,a))}}function Wf(e,t){var r,n,i,s="style."+t,o="end."+s,a;return function(){var c=Ae(this,e),l=c.on,u=c.value[s]==null?a||(a=oc(t)):void 0;(l!==r||i!==u)&&(n=(r=l).copy()).on(o,i=u),c.on=n}}function Hf(e,t,r){var n=(e+="")=="transform"?Qh:sc;return t==null?this.styleTween(e,qf(e,n)).on("end.style."+e,oc(e)):typeof t=="function"?this.styleTween(e,Yf(e,n,qs(this,"style."+e,t))).each(Wf(this._id,e)):this.styleTween(e,Gf(e,n,t),r).on("end.style."+e,null)}function Kf(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Qf(e,t,r){var n,i;function s(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Kf(e,o,r)),n}return s._value=t,s}function Jf(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Qf(e,t,r??""))}function Xf(e){return function(){this.textContent=e}}function Zf(e){return function(){var t=e(this);this.textContent=t??""}}function t1(e){return this.tween("text",typeof e=="function"?Zf(qs(this,"text",e)):Xf(e==null?"":e+""))}function e1(e){return function(t){this.textContent=e.call(this,t)}}function r1(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&e1(i)),t}return n._value=e,n}function n1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,r1(e))}function i1(){for(var e=this._name,t=this._id,r=ac(),n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=ne(c,t);Gi(c,e,r,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ce(n,this._parents,e,r)}function s1(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};r.each(function(){var l=Ae(this,n),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var o1=0;function Ce(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function ac(){return++o1}var Re=En.prototype;Ce.prototype={constructor:Ce,select:Vf,selectAll:zf,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:Lf,merge:kf,selection:jf,transition:i1,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:Mf,attr:yf,attrTween:If,style:Hf,styleTween:Jf,text:t1,textTween:n1,remove:Pf,tween:uf,delay:Tf,duration:Rf,ease:Ff,easeVarying:Bf,end:s1,[Symbol.iterator]:Re[Symbol.iterator]};function a1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var c1={time:null,delay:0,duration:250,ease:a1};function l1(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function u1(e){var t,r;e instanceof Ce?(t=e._id,e=e._name):(t=ac(),(r=c1).time=$s(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&Gi(c,e,t,l,o,r||l1(c,t));return new Ce(n,this._parents,e,t)}En.prototype.interrupt=af;En.prototype.transition=u1;function on(e,t,r){this.k=e,this.x=t,this.y=r}on.prototype={constructor:on,scale:function(e){return e===1?this:new on(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new on(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};on.prototype;const d1=(e,t)=>{const r=async d=>{e.setIsLoading(!0);try{return await d()}finally{e.setIsLoading(!1)}},n=async d=>{console.log("Rewriting entries for table:",d);const h=`
	ALTER TABLE "${d}" ADD COLUMN family TEXT;
	ALTER TABLE "${d}" ADD COLUMN mode TEXT;
	ALTER TABLE "${d}" ADD COLUMN vectorization TEXT;
	ALTER TABLE "${d}" ADD COLUMN fixture TEXT;
	ALTER TABLE "${d}" ADD COLUMN s FLOAT;
	ALTER TABLE "${d}" ADD COLUMN n_threads INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_partitions INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_elements_build INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_elements_lookup INTEGER;
	ALTER TABLE "${d}" ADD COLUMN shared_elements FLOAT;

	WITH SplitValues AS (
		SELECT
		name,
		SPLIT_PART(name, '_', 1) AS family,
		SPLIT_PART(name, '_', 2) AS mode,
		SPLIT_PART(name, '_', 4) AS vectorization,
		SPLIT_PART(name, '/', 2) AS fixture,
		CAST(SPLIT_PART(name, '/', 3) AS FLOAT) / 100 AS s,
		CAST(SPLIT_PART(name, '/', 4) AS INTEGER) AS n_threads,
		CAST(SPLIT_PART(name, '/', 5) AS INTEGER) AS n_partitions,
		CAST(SPLIT_PART(name, '/', 6) AS INTEGER) AS n_elements_build,
		CAST(SPLIT_PART(name, '/', 7) AS INTEGER) AS n_elements_lookup,
		CAST(SPLIT_PART(name, '/', 8) AS FLOAT) / 100 AS shared_elements
		FROM "${d}")
	UPDATE "${d}" AS t
		SET
			family = sv.family,
			mode = sv.mode,
			vectorization = sv.vectorization,
			fixture = sv.fixture,
			s = sv.s,
			n_threads = sv.n_threads,
			n_partitions = sv.n_partitions,
			n_elements_build = sv.n_elements_build,
			n_elements_lookup = sv.n_elements_lookup,
	shared_elements = sv.shared_elements
	FROM SplitValues AS sv
	WHERE t.name = sv.name;

	UPDATE "${d}" as t
		SET fpr = 'NaN'
		WHERE fpr = -1;
		`;return e.executeQuery(h)},i=async(d,h)=>{const{db:g}=ct(t),b=await e.getConnection();if(!g||!b)return;const{DuckDBDataProtocol:p}=await hs(()=>Promise.resolve().then(()=>R2),void 0,import.meta.url);await g.registerFileHandle(d,h,p.BROWSER_FILEREADER,!0)},s=async(d,h=!0,g=!0,b=!0)=>{const p=await e.getConnection();if(!p)return;h&&e.setIsLoading(!0);let _="";try{switch(d.source){case Wt.BUILD_IN:_=new URL(d.url,location.href).href;break;case Wt.FILE:await i(d.file.name,d.file),_=d.file.name;break;case Wt.URL:_=d.url;break}await p.insertCSVFromPath(_,{name:d.tableName,detect:!0,create:g});const T=await e.getTableSchema(d.tableName),I={name:d.tableName,displayName:d.displayName,schema:T,filterOptions:{},ref:d};return b&&t.update($=>($.tables[d.tableName]=I,$)),I}catch(T){const I=`Failed to load table ${d.tableName} from path ${_}`;throw console.error(I,T),Ke.error({message:I,description:T==null?void 0:T.message}),T}finally{h&&e.setIsLoading(!1)}},o=async(d,h)=>{if(console.debug("Post process",{tableName:d,refs:h}),h.length===0)return;const g=h[0].source;try{switch(g){case Wt.BUILD_IN:switch(h[0].dataset.name){case"experiments":await n(d)}}const b=await e.getTableSchema(d),p={};return console.log("Rewrite response:",{schema:b,filterOptions:p,table:d}),{schema:b,filterOptions:p,name:d,dataUrl:""}}catch(b){console.error(`Failed to rewrite entries for table ${d}:`,b);return}},a=(d=void 0)=>{const{tables:h}=ct(t);return Object.entries(h).reduce((g,[b,p],_)=>_===0?(g=p.schema,g):(Object.entries(g).forEach(([T,I])=>{if(!(d!==void 0&&!d.includes(T))){if(!p.schema[T]){delete g[T];return}if(I!==p.schema[T]){delete g[T];return}}}),g),{})};return{loadEntriesFromFileList:async d=>{const h=[];for(const g of d){const b=g.name.replace(".csv","");h.push(s({source:Wt.FILE,file:g,tableName:b}))}await Promise.all(h)},loadCsvFromRef:s,loadCsvsFromRefs:async d=>r(async()=>{if(d.length===0)return[];console.debug("Loading table references:",d);const h=d.reduce((b,p)=>(b[p.tableName]||(b[p.tableName]=[]),b[p.tableName].push(p),b),{});console.debug("Grouped table references:",h);const g=Promise.all(Object.entries(h).flatMap(async([b,p])=>{if(p.length===0)return[];const _=[];console.debug("loading table group:",{tableName:b,entries:p});for(const[T,I]of p.entries()){const $=await s(I,!1,T===0,!1);$&&_.push($),console.debug("loaded:",{tableName:b,entry:I})}return console.debug("applying post processing:",{tableName:b,entries:p}),o(b,p)??[]}));try{const b=await g,p=b.filter(_=>_!==void 0);return console.debug("loaded tables into db:",{tableDefinitions:p,promiseResult:b}),t.update(_=>(p.forEach(T=>{_.tables[T.name]=T}),_.combinedSchema=a(),_)),console.debug("loaded tables",{tableDefinitions:p}),p}catch(b){return console.error("Failed to load CSVs:",b),[]}}),resetDatabase:async()=>{const{sharedConnection:d}=ct(t);if(!d)return;const h=await e.getTables();console.log("Dropping tables:",h);const g=h.map(b=>`DROP TABLE "${b}";`).join(`
`);try{await e.executeQuery(g)}catch(b){console.error(b)}t.update(b=>(b.tables={},b))},removeTable:async d=>{const{sharedConnection:h}=ct(t);if(!(!h||!(await e.getTables()).find(p=>p===d)))try{await e.executeQuery(`DROP TABLE "${d}"`),e.update(p=>(delete p.tables[d],p)),a()}catch{Ke.error({message:`Could not delete table ${d}`})}}}};var Gt=(e=>(e.LINEAR="linear",e.LOG="log",e))(Gt||{}),hi=(e=>(e.MIN="min",e.MAX="max",e.AVG="avg",e.SUM="sum",e))(hi||{});const h1=e=>{const t=async(c,l=[])=>{const u=await Promise.all(l.map(h=>e.getDistinctValues(c,h))),d={};return u.forEach((h,g)=>{const b=l[g];d[b]={options:h,type:h.length>0?typeof h[0]:"unknown"}}),d},r=(c,l,u="")=>{switch(c){case Gt.LINEAR:return`${u}${l}${u}`;case Gt.LOG:return`LOG2(${u}${l}${u})`}},n={xColumnName:"iterations",yColumnName:"fpr",zColumnName:"cpu_time",tileCount:20,scaleY:Gt.LINEAR,scaleX:Gt.LINEAR,scaleZ:Gt.LINEAR,aggregation:hi.MIN},i=async(c,l,u)=>{const d=`SELECT * FROM "${c}" WHERE "${l}" = ${u};`,h=await e.executeQuery(d);if(!h)throw new Error("Failed to get min/max");const g=h.toArray();if(g.length===1)return g[0]},s=async(c,l,u)=>{const d=`SELECT MIN(${r(u,l,'"')}) AS min, MAX(${r(u,l,'"')}) AS max FROM "${c}"
		WHERE ${u===Gt.LOG?`"${l}" >= 0 and "${l}" != 'NaN'`:`"${l}" != 'NaN'`}
		`,h=await e.executeQuery(d);if(!h)throw new Error("Failed to get min/max");const g=h.toArray();if(g.length!==1)throw new Error("Invalid number of rows");return[g[0].min,g[0].max]},o=async(c,l,u,d,h,g)=>{const b=l.xTileCount??l.tileCount,p=l.zTileCount??l.tileCount,[_,T]=u??await s(c,l.xColumnName,l.scaleX),[I,$]=h??await s(c,l.zColumnName,l.scaleZ),K=(T-_)/b,at=($-I)/p,St=r(l.scaleX,l.xColumnName,'"'),jt=r(l.scaleZ,l.zColumnName,'"'),Ve=r(l.scaleY,l.yColumnName,'"'),Et=`
		SELECT
			${g?`"${g.columnName}",`:""}
			${l.aggregation}(${Ve}) AS y,
			any_value("name") as name,
			FLOOR((${St} - ${_}) / ${K}) AS x,
		   	FLOOR((${jt} - ${I}) / ${at}) AS z,
			any_value("${l.xColumnName}") as "rawX", any_value("${l.yColumnName}") as "rawY", any_value("${l.zColumnName}") as "rawZ"
	FROM "${c}"
	WHERE "${l.yColumnName}" != 'NaN' and x != 'NaN' and z != 'NaN'
	${g?`and "${g.columnName}" = '${g.value}'`:""}
	${l.scaleY===Gt.LOG?`and "${l.yColumnName}" >= 0`:""}
	GROUP BY z, x, ${g?`"${g.columnName}",`:""}
	ORDER BY z ASC, x ASC;
	`;try{const mt=await e.executeQuery(Et);return mt?mt.toArray():[]}catch(mt){return console.error(mt),[]}};return{getFiltersOptions:t,getTiledData:async(c,l={},u,d,h,g)=>{const b={...n,...l};try{const p=await o(c,b,u,d,h,g),_=(b.zTileCount??b.tileCount)+1,T=(b.xTileCount??b.tileCount)+1,I=new Array(T).fill(0).map(()=>new Array(_).fill(0));let $=Number.MAX_VALUE,K=Number.MIN_VALUE;return p.forEach((at,St)=>{at.x<0||at.z<0||Number.isNaN(at.y)||($=Math.min($,at.y),K=Math.max(K,at.y),I[at.z][at.x]=at.y)}),{data:I,min:$,max:K,queryResult:p}}catch(p){return console.error("Failed to create tiled data:",p),{data:[],min:0,max:0}}},getMinMax:s,getEntry:i}};function E(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function Zo(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(e){return this instanceof P?(this.v=e,this):new P(e)}function ye(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(g){return new Promise(function(b,p){s.push([h,g,b,p])>1||a(h,g)})})}function a(h,g){try{c(n[h](g))}catch(b){d(s[0][3],b)}}function c(h){h.value instanceof P?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Wn(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:P(e[i](o)),done:!1}:s?s(o):o}:s}}function mr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Zo=="function"?Zo(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}const f1=new TextDecoder("utf-8"),ws=e=>f1.decode(e),g1=new TextEncoder,Gs=e=>g1.encode(e),[F0,b1]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[An,D0]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[On,B0]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),p1=e=>typeof e=="number",cc=e=>typeof e=="boolean",ft=e=>typeof e=="function",xt=e=>e!=null&&Object(e)===e,vr=e=>xt(e)&&ft(e.then),Rn=e=>xt(e)&&ft(e[Symbol.iterator]),Kr=e=>xt(e)&&ft(e[Symbol.asyncIterator]),vs=e=>xt(e)&&xt(e.schema),lc=e=>xt(e)&&"done"in e&&"value"in e,uc=e=>xt(e)&&ft(e.stat)&&p1(e.fd),dc=e=>xt(e)&&Ys(e.body),Yi=e=>"_getDOMStream"in e&&"_getNodeStream"in e,y1=e=>xt(e)&&ft(e.abort)&&ft(e.getWriter)&&!Yi(e),Ys=e=>xt(e)&&ft(e.cancel)&&ft(e.getReader)&&!Yi(e),m1=e=>xt(e)&&ft(e.end)&&ft(e.write)&&cc(e.writable)&&!Yi(e),hc=e=>xt(e)&&ft(e.read)&&ft(e.pipe)&&cc(e.readable)&&!Yi(e),_1=e=>xt(e)&&ft(e.clear)&&ft(e.bytes)&&ft(e.position)&&ft(e.setPosition)&&ft(e.capacity)&&ft(e.getBufferIdentifier)&&ft(e.createLong),Ws=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function w1(e){const t=e[0]?[e[0]]:[];let r,n,i,s;for(let o,a,c=0,l=0,u=e.length;++c<u;){if(o=t[l],a=e[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:r,byteLength:i}=o,{byteOffset:n,byteLength:s}=a,r+i<n||n+s<r){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,r,n-r+s)}return t}function ta(e,t,r=0,n=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,i));return s.set(o,r),e}function we(e,t){const r=w1(e),n=r.reduce((u,d)=>u+d.byteLength,0);let i,s,o,a=0,c=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,n);for(const u=r.length;++c<u;){if(i=r[c],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?r[c]=i.subarray(s.length):s.length===i.length&&c++,o?ta(o,s,a):o=s;break}ta(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),r.slice(c),n-(o?o.byteLength:0)]}function et(e,t){let r=lc(t)?t.value:t;return r instanceof e?e===Uint8Array?new e(r.buffer,r.byteOffset,r.byteLength):r:r?(typeof r=="string"&&(r=Gs(r)),r instanceof ArrayBuffer?new e(r):r instanceof Ws?new e(r):_1(r)?et(e,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new e(0):new e(r.buffer,r.byteOffset,r.byteLength/e.BYTES_PER_ELEMENT):e.from(r)):new e(0)}const rn=e=>et(Int32Array,e),W=e=>et(Uint8Array,e),Is=e=>(e.next(),e);function*v1(e,t){const r=function*(i){yield i},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Ws?r(t):Rn(t)?t:r(t);return yield*Is(function*(i){let s=null;do s=i.next(yield et(e,s));while(!s.done)}(n[Symbol.iterator]())),new e}const I1=e=>v1(Uint8Array,e);function fc(e,t){return ye(this,arguments,function*(){if(vr(t))return yield P(yield P(yield*Wn(mr(fc(e,yield P(t))))));const n=function(o){return ye(this,arguments,function*(){yield yield P(yield P(o))})},i=function(o){return ye(this,arguments,function*(){yield P(yield*Wn(mr(Is(function*(a){let c=null;do c=a.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Ws?n(t):Rn(t)?i(t):Kr(t)?t:n(t);return yield P(yield*Wn(mr(Is(function(o){return ye(this,arguments,function*(){let a=null;do a=yield P(o.next(yield yield P(et(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield P(new e)})}const S1=e=>fc(Uint8Array,e);function Hs(e,t,r){if(e!==0){r=r.slice(0,t+1);for(let n=-1;++n<=t;)r[n]+=e}return r}function E1(e,t){let r=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[r]!==t[r])return!1;while(++r<n);return!0}const Yt={fromIterable(e){return Pn(T1(e))},fromAsyncIterable(e){return Pn(A1(e))},fromDOMStream(e){return Pn(O1(e))},fromNodeStream(e){return Pn(N1(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Pn=e=>(e.next(),e);function*T1(e){let t,r=!1,n=[],i,s,o,a=0;function c(){return s==="peek"?we(n,o)[0]:([i,n,a]=we(n,o),i)}({cmd:s,size:o}=yield null);const l=I1(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(n.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield c());while(o<a);while(!t)}catch(u){(r=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{r===!1&&typeof l.return=="function"&&l.return(null)}return null}function A1(e){return ye(this,arguments,function*(){let r,n=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?we(i,a)[0]:([s,i,c]=we(i,a),s)}({cmd:o,size:a}=yield yield P(null));const u=S1(e)[Symbol.asyncIterator]();try{do if({done:r,value:s}=Number.isNaN(a-c)?yield P(u.next()):yield P(u.next(a-c)),!r&&s.byteLength>0&&(i.push(s),c+=s.byteLength),r||a<=c)do({cmd:o,size:a}=yield yield P(l()));while(a<c);while(!r)}catch(d){(n=!0)&&typeof u.throw=="function"&&(yield P(u.throw(d)))}finally{n===!1&&typeof u.return=="function"&&(yield P(u.return(new Uint8Array(0))))}return yield P(null)})}function O1(e){return ye(this,arguments,function*(){let r=!1,n=!1,i=[],s,o,a,c=0;function l(){return o==="peek"?we(i,a)[0]:([s,i,c]=we(i,a),s)}({cmd:o,size:a}=yield yield P(null));const u=new R1(e);try{do if({done:r,value:s}=Number.isNaN(a-c)?yield P(u.read()):yield P(u.read(a-c)),!r&&s.byteLength>0&&(i.push(W(s)),c+=s.byteLength),r||a<=c)do({cmd:o,size:a}=yield yield P(l()));while(a<c);while(!r)}catch(d){(n=!0)&&(yield P(u.cancel(d)))}finally{n===!1?yield P(u.cancel()):e.locked&&u.releaseLock()}return yield P(null)})}class R1{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return E(this,void 0,void 0,function*(){const{reader:r,source:n}=this;r&&(yield r.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return E(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const r=yield this.reader.read();return!r.done&&(r.value=W(r)),r})}}const ts=(e,t)=>{const r=i=>n([t,i]);let n;return[t,r,new Promise(i=>(n=i)&&e.once(t,r))]};function N1(e){return ye(this,arguments,function*(){const r=[];let n="error",i=!1,s=null,o,a,c=0,l=[],u;function d(){return o==="peek"?we(l,a)[0]:([u,l,c]=we(l,a),u)}if({cmd:o,size:a}=yield yield P(null),e.isTTY)return yield yield P(new Uint8Array(0)),yield P(null);try{r[0]=ts(e,"end"),r[1]=ts(e,"error");do{if(r[2]=ts(e,"readable"),[n,s]=yield P(Promise.race(r.map(g=>g[2]))),n==="error")break;if((i=n==="end")||(Number.isFinite(a-c)?(u=W(e.read(a-c)),u.byteLength<a-c&&(u=W(e.read()))):u=W(e.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),i||a<=c)do({cmd:o,size:a}=yield yield P(d()));while(a<c)}while(!i)}finally{yield P(h(r,n==="error"?s:null))}return yield P(null);function h(g,b){return u=l=null,new Promise((p,_)=>{for(const[T,I]of g)e.off(T,I);try{const T=e.destroy;T&&T.call(e,b),b=void 0}catch(T){b=T||b}finally{b!=null?_(b):p()}})}})}var Vt;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Vt||(Vt={}));var zt;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(zt||(zt={}));var kt;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(kt||(kt={}));var Me;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Me||(Me={}));var H;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(H||(H={}));var Xe;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Xe||(Xe={}));var Q;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Q||(Q={}));var f;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(f||(f={}));var Fe;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Fe||(Fe={}));const F1=void 0;function fn(e){if(e===null)return"null";if(e===F1)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof An||e instanceof On?`[${[...e].map(t=>fn(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,r)=>typeof r=="bigint"?`${r}`:r)}const D1=Symbol.for("isArrowBigNum");function ie(e,...t){return t.length===0?Object.setPrototypeOf(et(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}ie.prototype[D1]=!0;ie.prototype.toJSON=function(){return`"${_r(this)}"`};ie.prototype.valueOf=function(){return gc(this)};ie.prototype.toString=function(){return _r(this)};ie.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return gc(this);case"string":return _r(this);case"default":return Ss(this)}return _r(this)};function Br(...e){return ie.apply(this,e)}function Lr(...e){return ie.apply(this,e)}function gn(...e){return ie.apply(this,e)}Object.setPrototypeOf(Br.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lr.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(gn.prototype,Object.create(Uint32Array.prototype));Object.assign(Br.prototype,ie.prototype,{constructor:Br,signed:!0,TypedArray:Int32Array,BigIntArray:An});Object.assign(Lr.prototype,ie.prototype,{constructor:Lr,signed:!1,TypedArray:Uint32Array,BigIntArray:On});Object.assign(gn.prototype,ie.prototype,{constructor:gn,signed:!0,TypedArray:Uint32Array,BigIntArray:On});function gc(e){const{buffer:t,byteOffset:r,length:n,signed:i}=e,s=new On(t,r,n),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),c=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}let _r,Ss;b1?(Ss=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:es(e),_r=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:es(e)):(_r=es,Ss=_r);function es(e){let t="";const r=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const o=n.length-1;do{for(r[0]=n[s=0];s<o;)n[s++]=r[1]=r[0]/10,r[0]=(r[0]-r[1]*10<<16)+n[s];n[s]=r[1]=r[0]/10,r[0]=r[0]-r[1]*10,t=`${r[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Ks{static new(t,r){switch(r){case!0:return new Br(t);case!1:return new Lr(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case An:return new Br(t)}return t.byteLength===16?new gn(t):new Lr(t)}static signed(t){return new Br(t)}static unsigned(t){return new Lr(t)}static decimal(t){return new gn(t)}constructor(t,r){return Ks.new(t,r)}}var bc,pc,yc,mc,_c,wc,vc,Ic,Sc,Ec,Tc,Ac,Oc,Rc,Nc,Fc,Dc,Bc,Lc;class O{static isNull(t){return(t==null?void 0:t.typeId)===f.Null}static isInt(t){return(t==null?void 0:t.typeId)===f.Int}static isFloat(t){return(t==null?void 0:t.typeId)===f.Float}static isBinary(t){return(t==null?void 0:t.typeId)===f.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===f.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===f.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===f.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===f.Date}static isTime(t){return(t==null?void 0:t.typeId)===f.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===f.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===f.Interval}static isList(t){return(t==null?void 0:t.typeId)===f.List}static isStruct(t){return(t==null?void 0:t.typeId)===f.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===f.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===f.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===f.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===f.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===f.Dictionary}static isDenseUnion(t){return O.isUnion(t)&&t.mode===zt.Dense}static isSparseUnion(t){return O.isUnion(t)&&t.mode===zt.Sparse}get typeId(){return f.NONE}}bc=Symbol.toStringTag;O[bc]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(O.prototype);let Ze=class extends O{toString(){return"Null"}get typeId(){return f.Null}};pc=Symbol.toStringTag;Ze[pc]=(e=>e[Symbol.toStringTag]="Null")(Ze.prototype);class tr extends O{constructor(t,r){super(),this.isSigned=t,this.bitWidth=r}get typeId(){return f.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?An:On}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}yc=Symbol.toStringTag;tr[yc]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(tr.prototype);class bn extends tr{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(bn.prototype,"ArrayType",{value:Int32Array});class pn extends O{constructor(t){super(),this.precision=t}get typeId(){return f.Float}get ArrayType(){switch(this.precision){case kt.HALF:return Uint16Array;case kt.SINGLE:return Float32Array;case kt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}mc=Symbol.toStringTag;pn[mc]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(pn.prototype);let fi=class extends O{constructor(){super()}get typeId(){return f.Binary}toString(){return"Binary"}};_c=Symbol.toStringTag;fi[_c]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(fi.prototype);let gi=class extends O{constructor(){super()}get typeId(){return f.Utf8}toString(){return"Utf8"}};wc=Symbol.toStringTag;gi[wc]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(gi.prototype);let bi=class extends O{constructor(){super()}get typeId(){return f.Bool}toString(){return"Bool"}};vc=Symbol.toStringTag;bi[vc]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(bi.prototype);let pi=class extends O{constructor(t,r,n=128){super(),this.scale=t,this.precision=r,this.bitWidth=n}get typeId(){return f.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ic=Symbol.toStringTag;pi[Ic]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(pi.prototype);class yi extends O{constructor(t){super(),this.unit=t}get typeId(){return f.Date}toString(){return`Date${(this.unit+1)*32}<${Me[this.unit]}>`}}Sc=Symbol.toStringTag;yi[Sc]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(yi.prototype);class yn extends O{constructor(t,r){super(),this.unit=t,this.bitWidth=r}get typeId(){return f.Time}toString(){return`Time${this.bitWidth}<${H[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return An}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Ec=Symbol.toStringTag;yn[Ec]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(yn.prototype);class mi extends O{constructor(t,r){super(),this.unit=t,this.timezone=r}get typeId(){return f.Timestamp}toString(){return`Timestamp<${H[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Tc=Symbol.toStringTag;mi[Tc]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(mi.prototype);class _i extends O{constructor(t){super(),this.unit=t}get typeId(){return f.Interval}toString(){return`Interval<${Xe[this.unit]}>`}}Ac=Symbol.toStringTag;_i[Ac]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(_i.prototype);let wi=class extends O{constructor(t){super(),this.children=[t]}get typeId(){return f.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Oc=Symbol.toStringTag;wi[Oc]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(wi.prototype);class Ot extends O{constructor(t){super(),this.children=t}get typeId(){return f.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Rc=Symbol.toStringTag;Ot[Rc]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Ot.prototype);class vi extends O{constructor(t,r,n){super(),this.mode=t,this.children=n,this.typeIds=r=Int32Array.from(r),this.typeIdToChildIndex=r.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return f.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Nc=Symbol.toStringTag;vi[Nc]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(vi.prototype);let Ii=class extends O{constructor(t){super(),this.byteWidth=t}get typeId(){return f.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Fc=Symbol.toStringTag;Ii[Fc]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Ii.prototype);let Si=class extends O{constructor(t,r){super(),this.listSize=t,this.children=[r]}get typeId(){return f.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Dc=Symbol.toStringTag;Si[Dc]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Si.prototype);class Ei extends O{constructor(t,r=!1){super(),this.children=[t],this.keysSorted=r}get typeId(){return f.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Bc=Symbol.toStringTag;Ei[Bc]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Ei.prototype);const B1=(e=>()=>++e)(-1);class $r extends O{constructor(t,r,n,i){super(),this.indices=r,this.dictionary=t,this.isOrdered=i||!1,this.id=n==null?B1():typeof n=="number"?n:n.low}get typeId(){return f.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Lc=Symbol.toStringTag;$r[Lc]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))($r.prototype);function De(e){const t=e;switch(e.typeId){case f.Decimal:return e.bitWidth/32;case f.Timestamp:return 2;case f.Date:return 1+t.unit;case f.Interval:return 1+t.unit;case f.FixedSizeList:return t.listSize;case f.FixedSizeBinary:return t.byteWidth;default:return 1}}class Y{visitMany(t,...r){return t.map((n,i)=>this.visit(n,...r.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,r=!0){return L1(this,t,r)}getVisitFnByTypeId(t,r=!0){return Ar(this,t,r)}visitNull(t,...r){return null}visitBool(t,...r){return null}visitInt(t,...r){return null}visitFloat(t,...r){return null}visitUtf8(t,...r){return null}visitBinary(t,...r){return null}visitFixedSizeBinary(t,...r){return null}visitDate(t,...r){return null}visitTimestamp(t,...r){return null}visitTime(t,...r){return null}visitDecimal(t,...r){return null}visitList(t,...r){return null}visitStruct(t,...r){return null}visitUnion(t,...r){return null}visitDictionary(t,...r){return null}visitInterval(t,...r){return null}visitFixedSizeList(t,...r){return null}visitMap(t,...r){return null}}function L1(e,t,r=!0){return typeof t=="number"?Ar(e,t,r):typeof t=="string"&&t in f?Ar(e,f[t],r):t&&t instanceof O?Ar(e,ea(t),r):t!=null&&t.type&&t.type instanceof O?Ar(e,ea(t.type),r):Ar(e,f.NONE,r)}function Ar(e,t,r=!0){let n=null;switch(t){case f.Null:n=e.visitNull;break;case f.Bool:n=e.visitBool;break;case f.Int:n=e.visitInt;break;case f.Int8:n=e.visitInt8||e.visitInt;break;case f.Int16:n=e.visitInt16||e.visitInt;break;case f.Int32:n=e.visitInt32||e.visitInt;break;case f.Int64:n=e.visitInt64||e.visitInt;break;case f.Uint8:n=e.visitUint8||e.visitInt;break;case f.Uint16:n=e.visitUint16||e.visitInt;break;case f.Uint32:n=e.visitUint32||e.visitInt;break;case f.Uint64:n=e.visitUint64||e.visitInt;break;case f.Float:n=e.visitFloat;break;case f.Float16:n=e.visitFloat16||e.visitFloat;break;case f.Float32:n=e.visitFloat32||e.visitFloat;break;case f.Float64:n=e.visitFloat64||e.visitFloat;break;case f.Utf8:n=e.visitUtf8;break;case f.Binary:n=e.visitBinary;break;case f.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case f.Date:n=e.visitDate;break;case f.DateDay:n=e.visitDateDay||e.visitDate;break;case f.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case f.Timestamp:n=e.visitTimestamp;break;case f.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case f.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case f.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case f.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case f.Time:n=e.visitTime;break;case f.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case f.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case f.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case f.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case f.Decimal:n=e.visitDecimal;break;case f.List:n=e.visitList;break;case f.Struct:n=e.visitStruct;break;case f.Union:n=e.visitUnion;break;case f.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case f.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case f.Dictionary:n=e.visitDictionary;break;case f.Interval:n=e.visitInterval;break;case f.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case f.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case f.FixedSizeList:n=e.visitFixedSizeList;break;case f.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${f[t]}'`)}function ea(e){switch(e.typeId){case f.Null:return f.Null;case f.Int:{const{bitWidth:t,isSigned:r}=e;switch(t){case 8:return r?f.Int8:f.Uint8;case 16:return r?f.Int16:f.Uint16;case 32:return r?f.Int32:f.Uint32;case 64:return r?f.Int64:f.Uint64}return f.Int}case f.Float:switch(e.precision){case kt.HALF:return f.Float16;case kt.SINGLE:return f.Float32;case kt.DOUBLE:return f.Float64}return f.Float;case f.Binary:return f.Binary;case f.Utf8:return f.Utf8;case f.Bool:return f.Bool;case f.Decimal:return f.Decimal;case f.Time:switch(e.unit){case H.SECOND:return f.TimeSecond;case H.MILLISECOND:return f.TimeMillisecond;case H.MICROSECOND:return f.TimeMicrosecond;case H.NANOSECOND:return f.TimeNanosecond}return f.Time;case f.Timestamp:switch(e.unit){case H.SECOND:return f.TimestampSecond;case H.MILLISECOND:return f.TimestampMillisecond;case H.MICROSECOND:return f.TimestampMicrosecond;case H.NANOSECOND:return f.TimestampNanosecond}return f.Timestamp;case f.Date:switch(e.unit){case Me.DAY:return f.DateDay;case Me.MILLISECOND:return f.DateMillisecond}return f.Date;case f.Interval:switch(e.unit){case Xe.DAY_TIME:return f.IntervalDayTime;case Xe.YEAR_MONTH:return f.IntervalYearMonth}return f.Interval;case f.Map:return f.Map;case f.List:return f.List;case f.Struct:return f.Struct;case f.Union:switch(e.mode){case zt.Dense:return f.DenseUnion;case zt.Sparse:return f.SparseUnion}return f.Union;case f.FixedSizeBinary:return f.FixedSizeBinary;case f.FixedSizeList:return f.FixedSizeList;case f.Dictionary:return f.Dictionary}throw new Error(`Unrecognized type '${f[e.typeId]}'`)}Y.prototype.visitInt8=null;Y.prototype.visitInt16=null;Y.prototype.visitInt32=null;Y.prototype.visitInt64=null;Y.prototype.visitUint8=null;Y.prototype.visitUint16=null;Y.prototype.visitUint32=null;Y.prototype.visitUint64=null;Y.prototype.visitFloat16=null;Y.prototype.visitFloat32=null;Y.prototype.visitFloat64=null;Y.prototype.visitDateDay=null;Y.prototype.visitDateMillisecond=null;Y.prototype.visitTimestampSecond=null;Y.prototype.visitTimestampMillisecond=null;Y.prototype.visitTimestampMicrosecond=null;Y.prototype.visitTimestampNanosecond=null;Y.prototype.visitTimeSecond=null;Y.prototype.visitTimeMillisecond=null;Y.prototype.visitTimeMicrosecond=null;Y.prototype.visitTimeNanosecond=null;Y.prototype.visitDenseUnion=null;Y.prototype.visitSparseUnion=null;Y.prototype.visitIntervalDayTime=null;Y.prototype.visitIntervalYearMonth=null;const kc=new Float64Array(1),Tr=new Uint32Array(kc.buffer);function xc(e){const t=(e&31744)>>10,r=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(r?Number.NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*Math.pow(2,t-15)*(1+r)}function k1(e){if(e!==e)return 32256;kc[0]=e;const t=(Tr[1]&2147483648)>>16&65535;let r=Tr[1]&2146435072,n=0;return r>=1089470464?Tr[0]>0?r=31744:(r=(r&2080374784)>>16,n=(Tr[1]&1048575)>>10):r<=1056964608?(n=1048576+(Tr[1]&1048575),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=(Tr[1]&1048575)+512>>10),t|r|n&65535}class x extends Y{}function U(e){return(t,r,n)=>{if(t.setValid(r,n!=null))return e(t,r,n)}}const x1=(e,t,r)=>{e[t]=Math.trunc(r/864e5)},Qs=(e,t,r)=>{e[t]=Math.trunc(r%4294967296),e[t+1]=Math.trunc(r/4294967296)},C1=(e,t,r)=>{e[t]=Math.trunc(r*1e3%4294967296),e[t+1]=Math.trunc(r*1e3/4294967296)},M1=(e,t,r)=>{e[t]=Math.trunc(r*1e6%4294967296),e[t+1]=Math.trunc(r*1e6/4294967296)},Cc=(e,t,r,n)=>{if(r+1<t.length){const{[r]:i,[r+1]:s}=t;e.set(n.subarray(0,s-i),i)}},U1=({offset:e,values:t},r,n)=>{const i=e+r;n?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Ue=({values:e},t,r)=>{e[t]=r},Js=({values:e},t,r)=>{e[t]=r},Mc=({values:e},t,r)=>{e[t]=k1(r)},P1=(e,t,r)=>{switch(e.type.precision){case kt.HALF:return Mc(e,t,r);case kt.SINGLE:case kt.DOUBLE:return Js(e,t,r)}},Uc=({values:e},t,r)=>{x1(e,t,r.valueOf())},Pc=({values:e},t,r)=>{Qs(e,t*2,r.valueOf())},V1=({stride:e,values:t},r,n)=>{t.set(n.subarray(0,e),e*r)},z1=({values:e,valueOffsets:t},r,n)=>Cc(e,t,r,n),$1=({values:e,valueOffsets:t},r,n)=>{Cc(e,t,r,Gs(n))},j1=(e,t,r)=>{e.type.unit===Me.DAY?Uc(e,t,r):Pc(e,t,r)},Vc=({values:e},t,r)=>Qs(e,t*2,r/1e3),zc=({values:e},t,r)=>Qs(e,t*2,r),$c=({values:e},t,r)=>C1(e,t*2,r),jc=({values:e},t,r)=>M1(e,t*2,r),q1=(e,t,r)=>{switch(e.type.unit){case H.SECOND:return Vc(e,t,r);case H.MILLISECOND:return zc(e,t,r);case H.MICROSECOND:return $c(e,t,r);case H.NANOSECOND:return jc(e,t,r)}},qc=({values:e},t,r)=>{e[t]=r},Gc=({values:e},t,r)=>{e[t]=r},Yc=({values:e},t,r)=>{e[t]=r},Wc=({values:e},t,r)=>{e[t]=r},G1=(e,t,r)=>{switch(e.type.unit){case H.SECOND:return qc(e,t,r);case H.MILLISECOND:return Gc(e,t,r);case H.MICROSECOND:return Yc(e,t,r);case H.NANOSECOND:return Wc(e,t,r)}},Y1=({values:e,stride:t},r,n)=>{e.set(n.subarray(0,t),t*r)},W1=(e,t,r)=>{const n=e.children[0],i=e.valueOffsets,s=Jt.getVisitFn(n);if(Array.isArray(r))for(let o=-1,a=i[t],c=i[t+1];a<c;)s(n,a++,r[++o]);else for(let o=-1,a=i[t],c=i[t+1];a<c;)s(n,a++,r.get(++o))},H1=(e,t,r)=>{const n=e.children[0],{valueOffsets:i}=e,s=Jt.getVisitFn(n);let{[t]:o,[t+1]:a}=i;const c=r instanceof Map?r.entries():Object.entries(r);for(const l of c)if(s(n,o,l),++o>=a)break},K1=(e,t)=>(r,n,i,s)=>n&&r(n,e,t[s]),Q1=(e,t)=>(r,n,i,s)=>n&&r(n,e,t.get(s)),J1=(e,t)=>(r,n,i,s)=>n&&r(n,e,t.get(i.name)),X1=(e,t)=>(r,n,i,s)=>n&&r(n,e,t[i.name]),Z1=(e,t,r)=>{const n=e.type.children.map(s=>Jt.getVisitFn(s.type)),i=r instanceof Map?J1(t,r):r instanceof J?Q1(t,r):Array.isArray(r)?K1(t,r):X1(t,r);e.type.children.forEach((s,o)=>i(n[o],e.children[o],s,o))},tg=(e,t,r)=>{e.type.mode===zt.Dense?Hc(e,t,r):Kc(e,t,r)},Hc=(e,t,r)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];Jt.visit(i,e.valueOffsets[t],r)},Kc=(e,t,r)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];Jt.visit(i,t,r)},eg=(e,t,r)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],r)},rg=(e,t,r)=>{e.type.unit===Xe.DAY_TIME?Qc(e,t,r):Jc(e,t,r)},Qc=({values:e},t,r)=>{e.set(r.subarray(0,2),2*t)},Jc=({values:e},t,r)=>{e[t]=r[0]*12+r[1]%12},ng=(e,t,r)=>{const{stride:n}=e,i=e.children[0],s=Jt.getVisitFn(i);if(Array.isArray(r))for(let o=-1,a=t*n;++o<n;)s(i,a+o,r[o]);else for(let o=-1,a=t*n;++o<n;)s(i,a+o,r.get(o))};x.prototype.visitBool=U(U1);x.prototype.visitInt=U(Ue);x.prototype.visitInt8=U(Ue);x.prototype.visitInt16=U(Ue);x.prototype.visitInt32=U(Ue);x.prototype.visitInt64=U(Ue);x.prototype.visitUint8=U(Ue);x.prototype.visitUint16=U(Ue);x.prototype.visitUint32=U(Ue);x.prototype.visitUint64=U(Ue);x.prototype.visitFloat=U(P1);x.prototype.visitFloat16=U(Mc);x.prototype.visitFloat32=U(Js);x.prototype.visitFloat64=U(Js);x.prototype.visitUtf8=U($1);x.prototype.visitBinary=U(z1);x.prototype.visitFixedSizeBinary=U(V1);x.prototype.visitDate=U(j1);x.prototype.visitDateDay=U(Uc);x.prototype.visitDateMillisecond=U(Pc);x.prototype.visitTimestamp=U(q1);x.prototype.visitTimestampSecond=U(Vc);x.prototype.visitTimestampMillisecond=U(zc);x.prototype.visitTimestampMicrosecond=U($c);x.prototype.visitTimestampNanosecond=U(jc);x.prototype.visitTime=U(G1);x.prototype.visitTimeSecond=U(qc);x.prototype.visitTimeMillisecond=U(Gc);x.prototype.visitTimeMicrosecond=U(Yc);x.prototype.visitTimeNanosecond=U(Wc);x.prototype.visitDecimal=U(Y1);x.prototype.visitList=U(W1);x.prototype.visitStruct=U(Z1);x.prototype.visitUnion=U(tg);x.prototype.visitDenseUnion=U(Hc);x.prototype.visitSparseUnion=U(Kc);x.prototype.visitDictionary=U(eg);x.prototype.visitInterval=U(rg);x.prototype.visitIntervalDayTime=U(Qc);x.prototype.visitIntervalYearMonth=U(Jc);x.prototype.visitFixedSizeList=U(ng);x.prototype.visitMap=U(H1);const Jt=new x,Zt=Symbol.for("parent"),kr=Symbol.for("rowIndex");class Xs{constructor(t,r){return this[Zt]=t,this[kr]=r,new Proxy(this,new sg)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[kr],r=this[Zt],n=r.type.children,i={};for(let s=-1,o=n.length;++s<o;)i[n[s].name]=Ct.visit(r.children[s],t);return i}toString(){return`{${[...this].map(([t,r])=>`${fn(t)}: ${fn(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ig(this[Zt],this[kr])}}class ig{constructor(t,r){this.childIndex=0,this.children=t.children,this.rowIndex=r,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ct.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Xs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Zt]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kr]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class sg{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Zt].type.children.map(r=>r.name)}has(t,r){return t[Zt].type.children.findIndex(n=>n.name===r)!==-1}getOwnPropertyDescriptor(t,r){if(t[Zt].type.children.findIndex(n=>n.name===r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];const n=t[Zt].type.children.findIndex(i=>i.name===r);if(n!==-1){const i=Ct.visit(t[Zt].children[n],t[kr]);return Reflect.set(t,r,i),i}}set(t,r,n){const i=t[Zt].type.children.findIndex(s=>s.name===r);return i!==-1?(Jt.visit(t[Zt].children[i],t[kr],n),Reflect.set(t,r,n)):Reflect.has(t,r)||typeof r=="symbol"?Reflect.set(t,r,n):!1}}class R extends Y{}function C(e){return(t,r)=>t.getValid(r)?e(t,r):null}const og=(e,t)=>864e5*e[t],Zs=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),ag=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,cg=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Xc=e=>new Date(e),lg=(e,t)=>Xc(og(e,t)),ug=(e,t)=>Xc(Zs(e,t)),dg=(e,t)=>null,Zc=(e,t,r)=>{if(r+1>=t.length)return null;const n=t[r],i=t[r+1];return e.subarray(n,i)},hg=({offset:e,values:t},r)=>{const n=e+r;return(t[n>>3]&1<<n%8)!==0},tl=({values:e},t)=>lg(e,t),el=({values:e},t)=>ug(e,t*2),nr=({stride:e,values:t},r)=>t[e*r],fg=({stride:e,values:t},r)=>xc(t[e*r]),rl=({values:e},t)=>e[t],gg=({stride:e,values:t},r)=>t.subarray(e*r,e*(r+1)),bg=({values:e,valueOffsets:t},r)=>Zc(e,t,r),pg=({values:e,valueOffsets:t},r)=>{const n=Zc(e,t,r);return n!==null?ws(n):null},yg=({values:e},t)=>e[t],mg=({type:e,values:t},r)=>e.precision!==kt.HALF?t[r]:xc(t[r]),_g=(e,t)=>e.type.unit===Me.DAY?tl(e,t):el(e,t),nl=({values:e},t)=>1e3*Zs(e,t*2),il=({values:e},t)=>Zs(e,t*2),sl=({values:e},t)=>ag(e,t*2),ol=({values:e},t)=>cg(e,t*2),wg=(e,t)=>{switch(e.type.unit){case H.SECOND:return nl(e,t);case H.MILLISECOND:return il(e,t);case H.MICROSECOND:return sl(e,t);case H.NANOSECOND:return ol(e,t)}},al=({values:e},t)=>e[t],cl=({values:e},t)=>e[t],ll=({values:e},t)=>e[t],ul=({values:e},t)=>e[t],vg=(e,t)=>{switch(e.type.unit){case H.SECOND:return al(e,t);case H.MILLISECOND:return cl(e,t);case H.MICROSECOND:return ll(e,t);case H.NANOSECOND:return ul(e,t)}},Ig=({values:e,stride:t},r)=>Ks.decimal(e.subarray(t*r,t*(r+1))),Sg=(e,t)=>{const{valueOffsets:r,stride:n,children:i}=e,{[t*n]:s,[t*n+1]:o}=r,c=i[0].slice(s,o-s);return new J([c])},Eg=(e,t)=>{const{valueOffsets:r,children:n}=e,{[t]:i,[t+1]:s}=r,o=n[0];return new to(o.slice(i,s-i))},Tg=(e,t)=>new Xs(e,t),Ag=(e,t)=>e.type.mode===zt.Dense?dl(e,t):hl(e,t),dl=(e,t)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Ct.visit(n,e.valueOffsets[t])},hl=(e,t)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];return Ct.visit(n,t)},Og=(e,t)=>{var r;return(r=e.dictionary)===null||r===void 0?void 0:r.get(e.values[t])},Rg=(e,t)=>e.type.unit===Xe.DAY_TIME?fl(e,t):gl(e,t),fl=({values:e},t)=>e.subarray(2*t,2*(t+1)),gl=({values:e},t)=>{const r=e[t],n=new Int32Array(2);return n[0]=Math.trunc(r/12),n[1]=Math.trunc(r%12),n},Ng=(e,t)=>{const{stride:r,children:n}=e,s=n[0].slice(t*r,r);return new J([s])};R.prototype.visitNull=C(dg);R.prototype.visitBool=C(hg);R.prototype.visitInt=C(yg);R.prototype.visitInt8=C(nr);R.prototype.visitInt16=C(nr);R.prototype.visitInt32=C(nr);R.prototype.visitInt64=C(rl);R.prototype.visitUint8=C(nr);R.prototype.visitUint16=C(nr);R.prototype.visitUint32=C(nr);R.prototype.visitUint64=C(rl);R.prototype.visitFloat=C(mg);R.prototype.visitFloat16=C(fg);R.prototype.visitFloat32=C(nr);R.prototype.visitFloat64=C(nr);R.prototype.visitUtf8=C(pg);R.prototype.visitBinary=C(bg);R.prototype.visitFixedSizeBinary=C(gg);R.prototype.visitDate=C(_g);R.prototype.visitDateDay=C(tl);R.prototype.visitDateMillisecond=C(el);R.prototype.visitTimestamp=C(wg);R.prototype.visitTimestampSecond=C(nl);R.prototype.visitTimestampMillisecond=C(il);R.prototype.visitTimestampMicrosecond=C(sl);R.prototype.visitTimestampNanosecond=C(ol);R.prototype.visitTime=C(vg);R.prototype.visitTimeSecond=C(al);R.prototype.visitTimeMillisecond=C(cl);R.prototype.visitTimeMicrosecond=C(ll);R.prototype.visitTimeNanosecond=C(ul);R.prototype.visitDecimal=C(Ig);R.prototype.visitList=C(Sg);R.prototype.visitStruct=C(Tg);R.prototype.visitUnion=C(Ag);R.prototype.visitDenseUnion=C(dl);R.prototype.visitSparseUnion=C(hl);R.prototype.visitDictionary=C(Og);R.prototype.visitInterval=C(Rg);R.prototype.visitIntervalDayTime=C(fl);R.prototype.visitIntervalYearMonth=C(gl);R.prototype.visitFixedSizeList=C(Ng);R.prototype.visitMap=C(Eg);const Ct=new R,de=Symbol.for("keys"),xr=Symbol.for("vals");class to{constructor(t){return this[de]=new J([t.children[0]]).memoize(),this[xr]=t.children[1],new Proxy(this,new Dg)}[Symbol.iterator](){return new Fg(this[de],this[xr])}get size(){return this[de].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[de],r=this[xr],n={};for(let i=-1,s=t.length;++i<s;)n[t.get(i)]=Ct.visit(r,i);return n}toString(){return`{${[...this].map(([t,r])=>`${fn(t)}: ${fn(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Fg{constructor(t,r){this.keys=t,this.vals=r,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ct.visit(this.vals,t)]})}}class Dg{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[de].toArray().map(String)}has(t,r){return t[de].includes(r)}getOwnPropertyDescriptor(t,r){if(t[de].indexOf(r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,r){if(Reflect.has(t,r))return t[r];const n=t[de].indexOf(r);if(n!==-1){const i=Ct.visit(Reflect.get(t,xr),n);return Reflect.set(t,r,i),i}}set(t,r,n){const i=t[de].indexOf(r);return i!==-1?(Jt.visit(Reflect.get(t,xr),i,n),Reflect.set(t,r,n)):Reflect.has(t,r)?Reflect.set(t,r,n):!1}}Object.defineProperties(to.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[de]:{writable:!0,enumerable:!1,configurable:!1,value:null},[xr]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let ra;function bl(e,t,r,n){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof r!="number"?i:r;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(ra=s,s=o,o=ra),o>i&&(o=i),n?n(e,s,o):[s,o]}const na=e=>e!==e;function Qr(e){if(typeof e!=="object"||e===null)return na(e)?na:r=>r===e;if(e instanceof Date){const r=e.valueOf();return n=>n instanceof Date?n.valueOf()===r:!1}return ArrayBuffer.isView(e)?r=>r?E1(e,r):!1:e instanceof Map?Lg(e):Array.isArray(e)?Bg(e):e instanceof J?kg(e):xg(e,!0)}function Bg(e){const t=[];for(let r=-1,n=e.length;++r<n;)t[r]=Qr(e[r]);return Wi(t)}function Lg(e){let t=-1;const r=[];for(const n of e.values())r[++t]=Qr(n);return Wi(r)}function kg(e){const t=[];for(let r=-1,n=e.length;++r<n;)t[r]=Qr(e.get(r));return Wi(t)}function xg(e,t=!1){const r=Object.keys(e);if(!t&&r.length===0)return()=>!1;const n=[];for(let i=-1,s=r.length;++i<s;)n[i]=Qr(e[r[i]]);return Wi(n,r)}function Wi(e,t){return r=>{if(!r||typeof r!="object")return!1;switch(r.constructor){case Array:return Cg(e,r);case Map:return ia(e,r,r.keys());case to:case Xs:case Object:case void 0:return ia(e,r,t||Object.keys(r))}return r instanceof J?Mg(e,r):!1}}function Cg(e,t){const r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t[n]))return!1;return!0}function Mg(e,t){const r=e.length;if(t.length!==r)return!1;for(let n=-1;++n<r;)if(!e[n](t.get(n)))return!1;return!0}function ia(e,t,r){const n=r[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let c=s.next(),l=n.next(),u=i.next();for(;o<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!e[o](c.value));++o,l=n.next(),u=i.next(),c=s.next());return o===a&&l.done&&u.done&&c.done?!0:(n.return&&n.return(),i.return&&i.return(),s.return&&s.return(),!1)}function pl(e,t,r,n){return(r&1<<n)!==0}function Ug(e,t,r,n){return(r&1<<n)>>n}function eo(e,t,r){const n=r.byteLength+7&-8;if(e>0||r.byteLength<n){const i=new Uint8Array(n);return i.set(e%8===0?r.subarray(e>>3):Ti(new ro(r,e,t,null,pl)).subarray(0,n)),i}return r}function Ti(e){const t=[];let r=0,n=0,i=0;for(const o of e)o&&(i|=1<<n),++n===8&&(t[r++]=i,i=n=0);(r===0||n>0)&&(t[r++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class ro{constructor(t,r,n,i,s){this.bytes=t,this.length=n,this.context=i,this.get=s,this.bit=r%8,this.byteIndex=r>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Es(e,t,r){if(r-t<=0)return 0;if(r-t<8){let s=0;for(const o of new ro(e,t,r-t,e,Ug))s+=o;return s}const n=r>>3<<3,i=t+(t%8===0?0:8-t%8);return Es(e,t,i)+Es(e,n,r)+Pg(e,i>>3,n-i>>3)}function Pg(e,t,r){let n=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=r===void 0?e.byteLength:i+r;for(;o-i>=4;)n+=rs(s.getUint32(i)),i+=4;for(;o-i>=2;)n+=rs(s.getUint16(i)),i+=2;for(;o-i>=1;)n+=rs(s.getUint8(i)),i+=1;return n}function rs(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Vg=-1;class nt{constructor(t,r,n,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(r||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;s instanceof nt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=De(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:r,values:n,nullBitmap:i,typeIds:s}=this;return r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,r;return t<=Vg&&(r=this.nullBitmap)&&(this._nullCount=t=this.length-Es(r,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,r){if(!this.nullable)return r;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:n,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=n[s]>>o&1;return r?a===0&&(n[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(n[s]&=~(1<<o),this._nullCount=this.nullCount-1),r}clone(t=this.type,r=this.offset,n=this.length,i=this._nullCount,s=this,o=this.children){return new nt(t,r,n,i,s,o,this.dictionary)}slice(t,r){const{stride:n,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?n:1,c=this._sliceBuffers(t,r,n,i);return this.clone(this.type,this.offset+t,r,o,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*r))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===f.Null)return this.clone(this.type,0,t,0);const{length:r,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,r>>3);i[r>>3]=(1<<r-(r&-8))-1,n>0&&i.set(eo(this.offset,r,this.nullBitmap),0);const s=this.buffers;return s[Fe.VALIDITY]=i,this.clone(this.type,0,t,n+(t-r),s)}_sliceBuffers(t,r,n,i){let s;const{buffers:o}=this;return(s=o[Fe.TYPE])&&(o[Fe.TYPE]=s.subarray(t,t+r)),(s=o[Fe.OFFSET])&&(o[Fe.OFFSET]=s.subarray(t,t+r+1))||(s=o[Fe.DATA])&&(o[Fe.DATA]=i===6?s:s.subarray(n*t,n*(t+r))),o}_sliceChildren(t,r,n){return t.map(i=>i.slice(r,n))}}nt.prototype.children=Object.freeze([]);class cn extends Y{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:r,["offset"]:n=0,["length"]:i=0}=t;return new nt(r,n,i,0)}visitBool(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitInt(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.data),s=W(t.nullBitmap),o=rn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(r,n,a,c,[o,i,s])}visitBinary(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.data),s=W(t.nullBitmap),o=rn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(r,n,a,c,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitDate(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitTime(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitList(t){const{["type"]:r,["offset"]:n=0,["child"]:i}=t,s=W(t.nullBitmap),o=rn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(r,n,a,c,[o,void 0,s],[i])}visitStruct(t){const{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,s=W(t.nullBitmap),{length:o=i.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:r,["offset"]:n=0,["children"]:i=[]}=t,s=W(t.nullBitmap),o=et(r.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(O.isSparseUnion(r))return new nt(r,n,a,c,[void 0,void 0,s,o],i);const l=rn(t.valueOffsets);return new nt(r,n,a,c,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.indices.ArrayType,t.data),{["dictionary"]:o=new J([new cn().visit({type:r.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(r,n,a,c,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:r,["offset"]:n=0}=t,i=W(t.nullBitmap),s=et(r.ArrayType,t.data),{["length"]:o=s.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:r,["offset"]:n=0,["child"]:i=new cn().visit({type:r.valueType})}=t,s=W(t.nullBitmap),{["length"]:o=i.length/De(r),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(r,n,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:r,["offset"]:n=0,["child"]:i=new cn().visit({type:r.childType})}=t,s=W(t.nullBitmap),o=rn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(r,n,a,c,[o,void 0,s],[i])}}function G(e){return new cn().visit(e)}class sa{constructor(t=0,r){this.numChunks=t,this.getChunkIterator=r,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function yl(e){return e.reduce((t,r)=>t+r.nullCount,0)}function ml(e){return e.reduce((t,r,n)=>(t[n+1]=t[n]+r.length,t),new Uint32Array(e.length+1))}function _l(e,t,r,n){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],c=t[s],{length:l}=a;if(c>=n)break;if(r>=c+l)continue;if(c>=r&&c+l<=n){i.push(a);continue}const u=Math.max(0,r-c),d=Math.min(n-c,l);i.push(a.slice(u,d-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function no(e,t,r,n){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return r<t[o]?n(e,i,r-t[i]):null;s=i+Math.trunc((o-i)*.5),r<t[s]?o=s:i=s}while(i<o)}function io(e,t){return e.getValid(t)}function Cr(e){function t(r,n,i){return e(r[n],i)}return function(r){const n=this.data;return no(n,this._offsets,r,t)}}function wl(e){let t;function r(n,i,s){return e(n[i],s,t)}return function(n,i){const s=this.data;t=i;const o=no(s,this._offsets,n,r);return t=void 0,o}}function vl(e){let t;function r(n,i,s){let o=s,a=0,c=0;for(let l=i-1,u=n.length;++l<u;){const d=n[l];if(~(a=e(d,t,o)))return c+a;o=0,c+=d.length}return-1}return function(n,i){t=n;const s=this.data,o=typeof i!="number"?r(s,0,0):no(s,this._offsets,i,r);return t=void 0,o}}class N extends Y{}function zg(e,t){return t===null&&e.length>0?0:-1}function $g(e,t){const{nullBitmap:r}=e;if(!r||e.nullCount<=0)return-1;let n=0;for(const i of new ro(r,e.offset+(t||0),e.length,r,pl)){if(!i)return n;++n}return-1}function z(e,t,r){if(t===void 0)return-1;if(t===null)return $g(e,r);const n=Ct.getVisitFn(e),i=Qr(t);for(let s=(r||0)-1,o=e.length;++s<o;)if(i(n(e,s)))return s;return-1}function Il(e,t,r){const n=Ct.getVisitFn(e),i=Qr(t);for(let s=(r||0)-1,o=e.length;++s<o;)if(i(n(e,s)))return s;return-1}N.prototype.visitNull=zg;N.prototype.visitBool=z;N.prototype.visitInt=z;N.prototype.visitInt8=z;N.prototype.visitInt16=z;N.prototype.visitInt32=z;N.prototype.visitInt64=z;N.prototype.visitUint8=z;N.prototype.visitUint16=z;N.prototype.visitUint32=z;N.prototype.visitUint64=z;N.prototype.visitFloat=z;N.prototype.visitFloat16=z;N.prototype.visitFloat32=z;N.prototype.visitFloat64=z;N.prototype.visitUtf8=z;N.prototype.visitBinary=z;N.prototype.visitFixedSizeBinary=z;N.prototype.visitDate=z;N.prototype.visitDateDay=z;N.prototype.visitDateMillisecond=z;N.prototype.visitTimestamp=z;N.prototype.visitTimestampSecond=z;N.prototype.visitTimestampMillisecond=z;N.prototype.visitTimestampMicrosecond=z;N.prototype.visitTimestampNanosecond=z;N.prototype.visitTime=z;N.prototype.visitTimeSecond=z;N.prototype.visitTimeMillisecond=z;N.prototype.visitTimeMicrosecond=z;N.prototype.visitTimeNanosecond=z;N.prototype.visitDecimal=z;N.prototype.visitList=z;N.prototype.visitStruct=z;N.prototype.visitUnion=z;N.prototype.visitDenseUnion=Il;N.prototype.visitSparseUnion=Il;N.prototype.visitDictionary=z;N.prototype.visitInterval=z;N.prototype.visitIntervalDayTime=z;N.prototype.visitIntervalYearMonth=z;N.prototype.visitFixedSizeList=z;N.prototype.visitMap=z;const Ai=new N;class F extends Y{}function M(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===f.Timestamp||t instanceof tr&&t.bitWidth!==64||t instanceof yn&&t.bitWidth!==64||t instanceof pn&&t.precision!==kt.HALF))return new sa(e.data.length,n=>{const i=e.data[n];return i.values.subarray(0,i.length)[Symbol.iterator]()});let r=0;return new sa(e.data.length,n=>{const s=e.data[n].length,o=e.slice(r,r+s);return r+=s,new jg(o)})}class jg{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}F.prototype.visitNull=M;F.prototype.visitBool=M;F.prototype.visitInt=M;F.prototype.visitInt8=M;F.prototype.visitInt16=M;F.prototype.visitInt32=M;F.prototype.visitInt64=M;F.prototype.visitUint8=M;F.prototype.visitUint16=M;F.prototype.visitUint32=M;F.prototype.visitUint64=M;F.prototype.visitFloat=M;F.prototype.visitFloat16=M;F.prototype.visitFloat32=M;F.prototype.visitFloat64=M;F.prototype.visitUtf8=M;F.prototype.visitBinary=M;F.prototype.visitFixedSizeBinary=M;F.prototype.visitDate=M;F.prototype.visitDateDay=M;F.prototype.visitDateMillisecond=M;F.prototype.visitTimestamp=M;F.prototype.visitTimestampSecond=M;F.prototype.visitTimestampMillisecond=M;F.prototype.visitTimestampMicrosecond=M;F.prototype.visitTimestampNanosecond=M;F.prototype.visitTime=M;F.prototype.visitTimeSecond=M;F.prototype.visitTimeMillisecond=M;F.prototype.visitTimeMicrosecond=M;F.prototype.visitTimeNanosecond=M;F.prototype.visitDecimal=M;F.prototype.visitList=M;F.prototype.visitStruct=M;F.prototype.visitUnion=M;F.prototype.visitDenseUnion=M;F.prototype.visitSparseUnion=M;F.prototype.visitDictionary=M;F.prototype.visitInterval=M;F.prototype.visitIntervalDayTime=M;F.prototype.visitIntervalYearMonth=M;F.prototype.visitFixedSizeList=M;F.prototype.visitMap=M;const so=new F,qg=(e,t)=>e+t;class ir extends Y{visitNull(t,r){return 0}visitInt(t,r){return t.type.bitWidth/8}visitFloat(t,r){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,r){return 1/8}visitDecimal(t,r){return t.type.bitWidth/8}visitDate(t,r){return(t.type.unit+1)*4}visitTime(t,r){return t.type.bitWidth/8}visitTimestamp(t,r){return t.type.unit===H.SECOND?4:8}visitInterval(t,r){return(t.type.unit+1)*4}visitStruct(t,r){return t.children.reduce((n,i)=>n+ve.visit(i,r),0)}visitFixedSizeBinary(t,r){return t.type.byteWidth}visitMap(t,r){return 8+t.children.reduce((n,i)=>n+ve.visit(i,r),0)}visitDictionary(t,r){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[r]))||0)}}const Gg=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Yg=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Wg=({valueOffsets:e,stride:t,children:r},n)=>{const i=r[0],{[n*t]:s}=e,{[n*t+1]:o}=e,a=ve.getVisitFn(i.type),c=i.slice(s,o-s);let l=8;for(let u=-1,d=o-s;++u<d;)l+=a(c,u);return l},Hg=({stride:e,children:t},r)=>{const n=t[0],i=n.slice(r*e,e),s=ve.getVisitFn(n.type);let o=0;for(let a=-1,c=i.length;++a<c;)o+=s(i,a);return o},Kg=(e,t)=>e.type.mode===zt.Dense?Sl(e,t):El(e,t),Sl=({type:e,children:t,typeIds:r,valueOffsets:n},i)=>{const s=e.typeIdToChildIndex[r[i]];return 8+ve.visit(t[s],n[i])},El=({children:e},t)=>4+ve.visitMany(e,e.map(()=>t)).reduce(qg,0);ir.prototype.visitUtf8=Gg;ir.prototype.visitBinary=Yg;ir.prototype.visitList=Wg;ir.prototype.visitFixedSizeList=Hg;ir.prototype.visitUnion=Kg;ir.prototype.visitDenseUnion=Sl;ir.prototype.visitSparseUnion=El;const ve=new ir;var Tl;const Al={},Ol={};class J{constructor(t){var r,n,i;const s=t[0]instanceof J?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof nt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(r=s[0])===null||r===void 0?void 0:r.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:c,indexOf:l,byteLength:u}=Al[o.typeId],d=s[0];this.isValid=h=>io(d,h),this.get=h=>a(d,h),this.set=(h,g)=>c(d,h,g),this.indexOf=h=>l(d,h),this.getByteLength=h=>u(d,h),this._offsets=[0,d.length];break}default:Object.setPrototypeOf(this,Ol[o.typeId]),this._offsets=ml(s);break}this.data=s,this.type=o,this.stride=De(o),this.numChildren=(i=(n=o.children)===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,r)=>t+r.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=yl(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${f[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}includes(t,r){return this.indexOf(t,r)>0}getByteLength(t){return 0}[Symbol.iterator](){return so.visit(this)}concat(...t){return new J(this.data.concat(t.flatMap(r=>r.data).flat(Number.POSITIVE_INFINITY)))}slice(t,r){return new J(bl(this,t,r,({data:n,_offsets:i},s,o)=>_l(n,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:r,length:n,stride:i,ArrayType:s}=this;switch(t.typeId){case f.Int:case f.Float:case f.Decimal:case f.Time:case f.Timestamp:switch(r.length){case 0:return new s;case 1:return r[0].values.subarray(0,n*i);default:return r.reduce((o,{values:a,length:c})=>(o.array.set(a.subarray(0,c*i),o.offset),o.offset+=c*i,o),{array:new s(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var r;return this.getChildAt((r=this.type.children)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new J(this.data.map(({children:r})=>r[t])):null}get isMemoized(){return O.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(O.isDictionary(this.type)){const t=new Oi(this.data[0].dictionary),r=this.data.map(n=>{const i=n.clone();return i.dictionary=t,i});return new J(r)}return new Oi(this)}unmemoize(){if(O.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),r=this.data.map(n=>{const i=n.clone();return i.dictionary=t,i});return new J(r)}return this}}Tl=Symbol.toStringTag;J[Tl]=(e=>{e.type=O.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(f).map(r=>f[r]).filter(r=>typeof r=="number"&&r!==f.NONE);for(const r of t){const n=Ct.getVisitFnByTypeId(r),i=Jt.getVisitFnByTypeId(r),s=Ai.getVisitFnByTypeId(r),o=ve.getVisitFnByTypeId(r);Al[r]={get:n,set:i,indexOf:s,byteLength:o},Ol[r]=Object.create(e,{isValid:{value:Cr(io)},get:{value:Cr(Ct.getVisitFnByTypeId(r))},set:{value:wl(Jt.getVisitFnByTypeId(r))},indexOf:{value:vl(Ai.getVisitFnByTypeId(r))},getByteLength:{value:Cr(ve.getVisitFnByTypeId(r))}})}return"Vector"})(J.prototype);class Oi extends J{constructor(t){super(t.data);const r=this.get,n=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const c=r.call(this,o);return s[o]=c,c}}),Object.defineProperty(this,"set",{value(o,a){n.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Oi(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new J(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Ts{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,r,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(r),t.offset()}}const ns=2,he=4,Le=4,rt=4,We=new Int32Array(2),oa=new Float32Array(We.buffer),aa=new Float64Array(We.buffer),Vn=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let xe=class As{constructor(t,r){this.low=t|0,this.high=r|0}static create(t,r){return t==0&&r==0?As.ZERO:new As(t,r)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};xe.ZERO=new xe(0,0);var Os;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Os||(Os={}));let jr=class Rl{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Rl(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new xe(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new xe(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return We[0]=this.readInt32(t),oa[0]}readFloat64(t){return We[Vn?0:1]=this.readInt32(t),We[Vn?1:0]=this.readInt32(t+4),aa[0]}writeInt8(t,r){this.bytes_[t]=r}writeUint8(t,r){this.bytes_[t]=r}writeInt16(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8}writeUint16(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8}writeInt32(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8,this.bytes_[t+2]=r>>16,this.bytes_[t+3]=r>>24}writeUint32(t,r){this.bytes_[t]=r,this.bytes_[t+1]=r>>8,this.bytes_[t+2]=r>>16,this.bytes_[t+3]=r>>24}writeInt64(t,r){this.writeInt32(t,r.low),this.writeInt32(t+4,r.high)}writeUint64(t,r){this.writeUint32(t,r.low),this.writeUint32(t+4,r.high)}writeFloat32(t,r){oa[0]=r,this.writeInt32(t,We[0])}writeFloat64(t,r){aa[0]=r,this.writeInt32(t,We[Vn?0:1]),this.writeInt32(t+4,We[Vn?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+he+Le)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let r=0;r<Le;r++)t+=String.fromCharCode(this.readInt8(this.position_+he+r));return t}__offset(t,r){const n=t-this.readInt32(t);return r<this.readInt16(n)?this.readInt16(n+r):0}__union(t,r){return t.bb_pos=r+this.readInt32(r),t.bb=this,t}__string(t,r){t+=this.readInt32(t);const n=this.readInt32(t);let i="",s=0;if(t+=he,r===Os.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;s<n;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const c=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|c&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(c&63)<<6|l&63;else{const u=this.readUint8(t+s++);o=(a&7)<<18|(c&63)<<12|(l&63)<<6|u&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1024-1)+56320))}return i}__union_with_string(t,r){return typeof t=="string"?this.__string(r):this.__union(t,r)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+he}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Le)throw new Error("FlatBuffers: file identifier must be length "+Le);for(let r=0;r<Le;r++)if(t.charCodeAt(r)!=this.readInt8(this.position()+he+r))return!1;return!0}createLong(t,r){return xe.create(t,r)}createScalarList(t,r){const n=[];for(let i=0;i<r;++i)t(i)!==null&&n.push(t(i));return n}createObjList(t,r){const n=[];for(let i=0;i<r;++i){const s=t(i);s!==null&&n.push(s.unpack())}return n}},Nl=class Fl{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let r;t?r=t:r=1024,this.bb=jr.allocate(r),this.space=r}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,r){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+r)+1&t-1;for(;this.space<n+t+r;){const i=this.bb.capacity();this.bb=Fl.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)}pad(t){for(let r=0;r<t;r++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,r,n){(this.force_defaults||r!=n)&&(this.addInt8(r),this.slot(t))}addFieldInt16(t,r,n){(this.force_defaults||r!=n)&&(this.addInt16(r),this.slot(t))}addFieldInt32(t,r,n){(this.force_defaults||r!=n)&&(this.addInt32(r),this.slot(t))}addFieldInt64(t,r,n){(this.force_defaults||!r.equals(n))&&(this.addInt64(r),this.slot(t))}addFieldFloat32(t,r,n){(this.force_defaults||r!=n)&&(this.addFloat32(r),this.slot(t))}addFieldFloat64(t,r,n){(this.force_defaults||r!=n)&&(this.addFloat64(r),this.slot(t))}addFieldOffset(t,r,n){(this.force_defaults||r!=n)&&(this.addOffset(r),this.slot(t))}addFieldStruct(t,r,n){r!=n&&(this.nested(r),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const r=t.capacity();if(r&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=r<<1,i=jr.allocate(n);return i.setPosition(n-r),i.bytes().set(t.bytes(),n-r),i}addOffset(t){this.prep(he,0),this.writeInt32(this.offset()-t+he)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let r=0;r<t;r++)this.vtable[r]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let r=this.vtable_in_use-1;for(;r>=0&&this.vtable[r]==0;r--);const n=r+1;for(;r>=0;r--)this.addInt16(this.vtable[r]!=0?t-this.vtable[r]:0);const i=2;this.addInt16(t-this.object_start);const s=(n+i)*ns;this.addInt16(s);let o=0;const a=this.space;t:for(r=0;r<this.vtables.length;r++){const c=this.bb.capacity()-this.vtables[r];if(s==this.bb.readInt16(c)){for(let l=ns;l<s;l+=ns)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;o=this.vtables[r];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,r,n){const i=n?rt:0;if(r){const s=r;if(this.prep(this.minalign,he+Le+i),s.length!=Le)throw new Error("FlatBuffers: file identifier must be length "+Le);for(let o=Le-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,he+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,r){this.finish(t,r,!0)}requiredField(t,r){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(this.bb.readInt16(i+r)!=0))throw new Error("FlatBuffers: field "+r+" must be set")}startVector(t,r,n){this.notNested(),this.vector_num_elems=r,this.prep(he,t*r),this.prep(n,t*r)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const r=this.createString(t);return this.string_maps.set(t,r),r}createString(t){if(!t)return 0;let r;if(t instanceof Uint8Array)r=t;else{r=[];let n=0;for(;n<t.length;){let i;const s=t.charCodeAt(n++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(n++);i=(s<<10)+o+(65536-56623104-56320)}i<128?r.push(i):(i<2048?r.push(i>>6&31|192):(i<65536?r.push(i>>12&15|224):r.push(i>>18&7|240,i>>12&63|128),r.push(i>>6&63|128)),r.push(i&63|128))}}this.addInt8(0),this.startVector(1,r.length,1),this.bb.setPosition(this.space-=r.length);for(let n=0,i=this.space,s=this.bb.bytes();n<r.length;n++)s[i++]=r[n];return this.endVector()}createLong(t,r){return xe.create(t,r)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const r=[];for(let n=0;n<t.length;++n){const i=t[n];if(i!==null)r.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return r}createStructOffsetList(t,r){return r(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class gt{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsKeyValue(t,r){return(r||new gt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,r){return t.setPosition(t.position()+rt),(r||new gt).__init(t.readInt32(t.position())+t.position(),t)}key(t){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}value(t){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,r){t.addFieldOffset(0,r,0)}static addValue(t,r){t.addFieldOffset(1,r,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,n){return gt.startKeyValue(t),gt.addKey(t,r),gt.addValue(t,n),gt.endKeyValue(t)}}var qr;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qr||(qr={}));var Gr;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Gr||(Gr={}));var Ri;(function(e){e[e.DenseArray=0]="DenseArray"})(Ri||(Ri={}));class Pt{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInt(t,r){return(r||new Pt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,r){return t.setPosition(t.position()+rt),(r||new Pt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,r){t.addFieldInt32(0,r,0)}static addIsSigned(t,r){t.addFieldInt8(1,+r,0)}static endInt(t){return t.endObject()}static createInt(t,r,n){return Pt.startInt(t),Pt.addBitWidth(t,r),Pt.addIsSigned(t,n),Pt.endInt(t)}}class ke{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryEncoding(t,r){return(r||new ke).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,r){return t.setPosition(t.position()+rt),(r||new ke).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new Pt).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Ri.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,r){t.addFieldInt64(0,r,t.createLong(0,0))}static addIndexType(t,r){t.addFieldOffset(1,r,0)}static addIsOrdered(t,r){t.addFieldInt8(2,+r,0)}static addDictionaryKind(t,r){t.addFieldInt16(3,r,Ri.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBinary(t,r){return(r||new dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,r){return t.setPosition(t.position()+rt),(r||new dr).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return dr.startBinary(t),dr.endBinary(t)}}class hr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBool(t,r){return(r||new hr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,r){return t.setPosition(t.position()+rt),(r||new hr).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return hr.startBool(t),hr.endBool(t)}}var Ni;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ni||(Ni={}));let Hn=class Or{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDate(t,r){return(r||new Or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,r){return t.setPosition(t.position()+rt),(r||new Or).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ni.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,Ni.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,r){return Or.startDate(t),Or.addUnit(t,r),Or.endDate(t)}};class Ft{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDecimal(t,r){return(r||new Ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,r){return t.setPosition(t.position()+rt),(r||new Ft).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,r){t.addFieldInt32(0,r,0)}static addScale(t,r){t.addFieldInt32(1,r,0)}static addBitWidth(t,r){t.addFieldInt32(2,r,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,n,i){return Ft.startDecimal(t),Ft.addPrecision(t,r),Ft.addScale(t,n),Ft.addBitWidth(t,i),Ft.endDecimal(t)}}var Yr;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Yr||(Yr={}));class fe{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeBinary(t,r){return(r||new fe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,r){return t.setPosition(t.position()+rt),(r||new fe).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return fe.startFixedSizeBinary(t),fe.addByteWidth(t,r),fe.endFixedSizeBinary(t)}}class ge{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFixedSizeList(t,r){return(r||new ge).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,r){return t.setPosition(t.position()+rt),(r||new ge).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,r){t.addFieldInt32(0,r,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return ge.startFixedSizeList(t),ge.addListSize(t,r),ge.endFixedSizeList(t)}}var Fi;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Fi||(Fi={}));class be{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFloatingPoint(t,r){return(r||new be).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,r){return t.setPosition(t.position()+rt),(r||new be).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fi.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,r){t.addFieldInt16(0,r,Fi.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,r){return be.startFloatingPoint(t),be.addPrecision(t,r),be.endFloatingPoint(t)}}var Di;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Di||(Di={}));class pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsInterval(t,r){return(r||new pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,r){return t.setPosition(t.position()+rt),(r||new pe).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Di.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,r){t.addFieldInt16(0,r,Di.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,r){return pe.startInterval(t),pe.addUnit(t,r),pe.endInterval(t)}}class fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsList(t,r){return(r||new fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,r){return t.setPosition(t.position()+rt),(r||new fr).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return fr.startList(t),fr.endList(t)}}let Kn=class Rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMap(t,r){return(r||new Rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,r){return t.setPosition(t.position()+rt),(r||new Rr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,r){t.addFieldInt8(0,+r,0)}static endMap(t){return t.endObject()}static createMap(t,r){return Rr.startMap(t),Rr.addKeysSorted(t,r),Rr.endMap(t)}};class gr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsNull(t,r){return(r||new gr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,r){return t.setPosition(t.position()+rt),(r||new gr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return gr.startNull(t),gr.endNull(t)}}class br{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsStruct_(t,r){return(r||new br).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,r){return t.setPosition(t.position()+rt),(r||new br).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return br.startStruct_(t),br.endStruct_(t)}}class Ht{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTime(t,r){return(r||new Ht).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,r){return t.setPosition(t.position()+rt),(r||new Ht).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,Yr.MILLISECOND)}static addBitWidth(t,r){t.addFieldInt32(1,r,32)}static endTime(t){return t.endObject()}static createTime(t,r,n){return Ht.startTime(t),Ht.addUnit(t,r),Ht.addBitWidth(t,n),Ht.endTime(t)}}class Kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsTimestamp(t,r){return(r||new Kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,r){return t.setPosition(t.position()+rt),(r||new Kt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.SECOND}timezone(t){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,r){t.addFieldInt16(0,r,Yr.SECOND)}static addTimezone(t,r){t.addFieldOffset(1,r,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,r,n){return Kt.startTimestamp(t),Kt.addUnit(t,r),Kt.addTimezone(t,n),Kt.endTimestamp(t)}}var Bi;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Bi||(Bi={}));class Dt{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUnion(t,r){return(r||new Dt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,r){return t.setPosition(t.position()+rt),(r||new Dt).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bi.Sparse}typeIds(t){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb.__vector(this.bb_pos+r)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,r){t.addFieldInt16(0,r,Bi.Sparse)}static addTypeIds(t,r){t.addFieldOffset(1,r,0)}static createTypeIdsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addInt32(r[n]);return t.endVector()}static startTypeIdsVector(t,r){t.startVector(4,r,4)}static endUnion(t){return t.endObject()}static createUnion(t,r,n){return Dt.startUnion(t),Dt.addMode(t,r),Dt.addTypeIds(t,n),Dt.endUnion(t)}}class pr{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsUtf8(t,r){return(r||new pr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,r){return t.setPosition(t.position()+rt),(r||new pr).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return pr.startUtf8(t),pr.endUtf8(t)}}var st;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(st||(st={}));let qt=class Qn{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsField(t,r){return(r||new Qn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,r){return t.setPosition(t.position()+rt),(r||new Qn).__init(t.readInt32(t.position())+t.position(),t)}name(t){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):st.NONE}type(t){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__union(t,this.bb_pos+r):null}dictionary(t){const r=this.bb.__offset(this.bb_pos,12);return r?(t||new ke).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(t,r){const n=this.bb.__offset(this.bb_pos,14);return n?(r||new Qn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){const n=this.bb.__offset(this.bb_pos,16);return n?(r||new gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,r){t.addFieldOffset(0,r,0)}static addNullable(t,r){t.addFieldInt8(1,+r,0)}static addTypeType(t,r){t.addFieldInt8(2,r,st.NONE)}static addType(t,r){t.addFieldOffset(3,r,0)}static addDictionary(t,r){t.addFieldOffset(4,r,0)}static addChildren(t,r){t.addFieldOffset(5,r,0)}static createChildrenVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startChildrenVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(6,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endField(t){return t.endObject()}},ce=class Ne{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsSchema(t,r){return(r||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,r){return t.setPosition(t.position()+rt),(r||new Ne).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gr.Little}fields(t,r){const n=this.bb.__offset(this.bb_pos,6);return n?(r||new qt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb.__vector(this.bb_pos+r)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,r){t.addFieldInt16(0,r,Gr.Little)}static addFields(t,r){t.addFieldOffset(1,r,0)}static createFieldsVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startFieldsVector(t,r){t.startVector(4,r,4)}static addCustomMetadata(t,r){t.addFieldOffset(2,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static addFeatures(t,r){t.addFieldOffset(3,r,0)}static createFeaturesVector(t,r){t.startVector(8,r.length,8);for(let n=r.length-1;n>=0;n--)t.addInt64(r[n]);return t.endVector()}static startFeaturesVector(t,r){t.startVector(8,r,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,r){t.finish(r)}static finishSizePrefixedSchemaBuffer(t,r){t.finish(r,void 0,!0)}static createSchema(t,r,n,i,s){return Ne.startSchema(t),Ne.addEndianness(t,r),Ne.addFields(t,n),Ne.addCustomMetadata(t,i),Ne.addFeatures(t,s),Ne.endSchema(t)}};class Ut{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsFooter(t,r){return(r||new Ut).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,r){return t.setPosition(t.position()+rt),(r||new Ut).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qr.V1}schema(t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new ce).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dictionaries(t,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new Ts).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,r){const n=this.bb.__offset(this.bb_pos,10);return n?(r||new Ts).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,r){const n=this.bb.__offset(this.bb_pos,12);return n?(r||new gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,qr.V1)}static addSchema(t,r){t.addFieldOffset(1,r,0)}static addDictionaries(t,r){t.addFieldOffset(2,r,0)}static startDictionariesVector(t,r){t.startVector(24,r,8)}static addRecordBatches(t,r){t.addFieldOffset(3,r,0)}static startRecordBatchesVector(t,r){t.startVector(24,r,8)}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,r){t.finish(r)}static finishSizePrefixedFooterBuffer(t,r){t.finish(r,void 0,!0)}}class X{constructor(t=[],r,n){this.fields=t||[],this.metadata=r||new Map,n||(n=Rs(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,r)=>`${r}: ${t}`).join(", ")} }>`}select(t){const r=new Set(t),n=this.fields.filter(i=>r.has(i.name));return new X(n,this.metadata)}selectAt(t){const r=t.map(n=>this.fields[n]).filter(Boolean);return new X(r,this.metadata)}assign(...t){const r=t[0]instanceof X?t[0]:Array.isArray(t[0])?new X(t[0]):new X(t),n=[...this.fields],i=zn(zn(new Map,this.metadata),r.metadata),s=r.fields.filter(a=>{const c=n.findIndex(l=>l.name===a.name);return~c?(n[c]=a.clone({metadata:zn(zn(new Map,n[c].metadata),a.metadata)}))&&!1:!0}),o=Rs(s,new Map);return new X([...n,...s],i,new Map([...this.dictionaries,...o]))}}X.prototype.fields=null;X.prototype.metadata=null;X.prototype.dictionaries=null;class it{constructor(t,r,n=!1,i){this.name=t,this.type=r,this.nullable=n,this.metadata=i||new Map}static new(...t){let[r,n,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:r}=t[0],n===void 0&&(n=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new it(`${r}`,n,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[r,n,i,s]=t;return!t[0]||typeof t[0]!="object"?[r=this.name,n=this.type,i=this.nullable,s=this.metadata]=t:{name:r=this.name,type:n=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],it.new(r,n,i,s)}}it.prototype.type=null;it.prototype.name=null;it.prototype.nullable=null;it.prototype.metadata=null;function zn(e,t){return new Map([...e||new Map,...t||new Map])}function Rs(e,t=new Map){for(let r=-1,n=e.length;++r<n;){const s=e[r].type;if(O.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Rs(s.children,t)}return t}var ca=xe,Qg=Nl,Jg=jr;class mn{constructor(t,r=Vt.V4,n,i){this.schema=t,this.version=r,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new Jg(W(t));const r=Ut.getRootAsFooter(t),n=X.decode(r.schema());return new Xg(n,r)}static encode(t){const r=new Qg,n=X.encode(r,t.schema);Ut.startRecordBatchesVector(r,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())er.encode(r,o);const i=r.endVector();Ut.startDictionariesVector(r,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())er.encode(r,o);const s=r.endVector();return Ut.startFooter(r),Ut.addSchema(r,n),Ut.addVersion(r,Vt.V4),Ut.addRecordBatches(r,i),Ut.addDictionaries(r,s),Ut.finishFooterBuffer(r,Ut.endFooter(r)),r.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,r=-1,n=this.numRecordBatches;++r<n;)(t=this.getRecordBatch(r))&&(yield t)}*dictionaryBatches(){for(let t,r=-1,n=this.numDictionaries;++r<n;)(t=this.getDictionaryBatch(r))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Xg extends mn{constructor(t,r){super(t,r.version()),this._footer=r}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const r=this._footer.recordBatches(t);if(r)return er.decode(r)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const r=this._footer.dictionaries(t);if(r)return er.decode(r)}return null}}class er{constructor(t,r,n){this.metaDataLength=t,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof r=="number"?r:r.low}static decode(t){return new er(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,r){const{metaDataLength:n}=r,i=new ca(r.offset,0),s=new ca(r.bodyLength,0);return Ts.createBlock(t,i,n,s)}}const ot=Object.freeze({done:!0,value:void 0});class la{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class oo{tee(){return this._getDOMStream().tee()}pipe(t,r){return this._getNodeStream().pipe(t,r)}pipeTo(t,r){return this._getDOMStream().pipeTo(t,r)}pipeThrough(t,r){return this._getDOMStream().pipeThrough(t,r)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Zg extends oo{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return E(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(ot);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Yt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Yt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return E(this,void 0,void 0,function*(){return yield this.abort(t),ot})}return(t){return E(this,void 0,void 0,function*(){return yield this.close(),ot})}read(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,n)=>{this.resolvers.push({resolve:r,reject:n})}):Promise.resolve(ot)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Jn extends Zg{write(t){if((t=W(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?ws(this.toUint8Array(!0)):this.toUint8Array(!1).then(ws)}toUint8Array(t=!1){return t?we(this._values)[0]:(()=>E(this,void 0,void 0,function*(){var r,n;const i=[];let s=0;try{for(var o=mr(this),a;a=yield o.next(),!a.done;){const c=a.value;i.push(c),s+=c.byteLength}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return we(i,s)[0]}))()}}class Li{constructor(t){t&&(this.source=new tb(Yt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Wr{constructor(t){t instanceof Wr?this.source=t.source:t instanceof Jn?this.source=new cr(Yt.fromAsyncIterable(t)):hc(t)?this.source=new cr(Yt.fromNodeStream(t)):Ys(t)?this.source=new cr(Yt.fromDOMStream(t)):dc(t)?this.source=new cr(Yt.fromDOMStream(t.body)):Rn(t)?this.source=new cr(Yt.fromIterable(t)):vr(t)?this.source=new cr(Yt.fromAsyncIterable(t)):Kr(t)&&(this.source=new cr(Yt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class tb{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,r="read"){return this.source.next({cmd:r,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||ot)}return(t){return Object.create(this.source.return&&this.source.return(t)||ot)}}class cr{constructor(t){this.source=t,this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}cancel(t){return E(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,r="read"){return E(this,void 0,void 0,function*(){return yield this.source.next({cmd:r,size:t})})}throw(t){return E(this,void 0,void 0,function*(){const r=this.source.throw&&(yield this.source.throw(t))||ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}return(t){return E(this,void 0,void 0,function*(){const r=this.source.return&&(yield this.source.return(t))||ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}}class ua extends Li{constructor(t,r){super(),this.position=0,this.buffer=W(t),this.size=typeof r>"u"?this.buffer.byteLength:r}readInt32(t){const{buffer:r,byteOffset:n}=this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:r,size:n,position:i}=this;return r&&i<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),r.subarray(i,this.position)):null}readAt(t,r){const n=this.buffer,i=Math.min(this.size,t+r);return n?n.subarray(t,i):new Uint8Array(r)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class ki extends Wr{constructor(t,r){super(),this.position=0,this._handle=t,typeof r=="number"?this.size=r:this._pending=(()=>E(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return E(this,void 0,void 0,function*(){const{buffer:r,byteOffset:n}=yield this.readAt(t,4);return new DataView(r,n).getInt32(0,!0)})}seek(t){return E(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return E(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:n,position:i}=this;if(r&&i<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const c=Math.min(n,s+Math.min(n-s,t)),l=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=a)<c&&(o+=a)<l.byteLength;)({bytesRead:a}=yield r.read(l,o,l.byteLength-o,s));return l}return null})}readAt(t,r){return E(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&t+r<i){const s=Math.min(i,t+r),o=new Uint8Array(s-t);return(yield n.read(o,0,r,t)).buffer}return new Uint8Array(r)})}close(){return E(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return E(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return E(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const eb=65536;function Fr(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Hr=8,ao=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Dl{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const r=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=r[3]*n[3];this.buffer[0]=i&65535;let s=i>>>16;return i=r[2]*n[3],s+=i,i=r[3]*n[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?eb:0,this.buffer[1]+=s>>>16,this.buffer[1]+=r[1]*n[3]+r[2]*n[2]+r[3]*n[1],this.buffer[1]+=r[0]*n[3]+r[1]*n[2]+r[2]*n[1]+r[3]*n[0]<<16,this}_plus(t){const r=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],r<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=r}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Fr(this.buffer[1])} ${Fr(this.buffer[0])}`}}class Z extends Dl{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,r=new Uint32Array(2)){return Z.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return Z.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){const n=t.length,i=new Z(r);for(let s=0;s<n;){const o=Hr<n-s?Hr:n-s,a=new Z(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),c=new Z(new Uint32Array([ao[o],0]));i.times(c),i.plus(a),s+=o}return i}static convertArray(t){const r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)Z.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new Z(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new Z(new Uint32Array(t.buffer)).plus(r)}}class Nt extends Dl{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const r=this.buffer[1]<<0,n=t.buffer[1]<<0;return r<n||r===n&&this.buffer[0]<t.buffer[0]}static from(t,r=new Uint32Array(2)){return Nt.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(2)){return Nt.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(2)){const n=t.startsWith("-"),i=t.length,s=new Nt(r);for(let o=n?1:0;o<i;){const a=Hr<i-o?Hr:i-o,c=new Nt(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),l=new Nt(new Uint32Array([ao[a],0]));s.times(l),s.plus(c),o+=a}return n?s.negate():s}static convertArray(t){const r=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)Nt.from(t[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(t,r){return new Nt(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new Nt(new Uint32Array(t.buffer)).plus(r)}}class le{constructor(t){this.buffer=t}high(){return new Nt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Nt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const r=new Z(new Uint32Array([this.buffer[3],0])),n=new Z(new Uint32Array([this.buffer[2],0])),i=new Z(new Uint32Array([this.buffer[1],0])),s=new Z(new Uint32Array([this.buffer[0],0])),o=new Z(new Uint32Array([t.buffer[3],0])),a=new Z(new Uint32Array([t.buffer[2],0])),c=new Z(new Uint32Array([t.buffer[1],0])),l=new Z(new Uint32Array([t.buffer[0],0]));let u=Z.multiply(s,l);this.buffer[0]=u.low();const d=new Z(new Uint32Array([u.high(),0]));return u=Z.multiply(i,l),d.plus(u),u=Z.multiply(s,c),d.plus(u),this.buffer[1]=d.low(),this.buffer[3]=d.lessThan(u)?1:0,this.buffer[2]=d.high(),new Z(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Z.multiply(n,l)).plus(Z.multiply(i,c)).plus(Z.multiply(s,a)),this.buffer[3]+=Z.multiply(r,l).plus(Z.multiply(n,c)).plus(Z.multiply(i,a)).plus(Z.multiply(s,o)).low(),this}plus(t){const r=new Uint32Array(4);return r[3]=this.buffer[3]+t.buffer[3]>>>0,r[2]=this.buffer[2]+t.buffer[2]>>>0,r[1]=this.buffer[1]+t.buffer[1]>>>0,r[0]=this.buffer[0]+t.buffer[0]>>>0,r[0]<this.buffer[0]>>>0&&++r[1],r[1]<this.buffer[1]>>>0&&++r[2],r[2]<this.buffer[2]>>>0&&++r[3],this.buffer[3]=r[3],this.buffer[2]=r[2],this.buffer[1]=r[1],this.buffer[0]=r[0],this}hex(){return`${Fr(this.buffer[3])} ${Fr(this.buffer[2])} ${Fr(this.buffer[1])} ${Fr(this.buffer[0])}`}static multiply(t,r){return new le(new Uint32Array(t.buffer)).times(r)}static add(t,r){return new le(new Uint32Array(t.buffer)).plus(r)}static from(t,r=new Uint32Array(4)){return le.fromString(typeof t=="string"?t:t.toString(),r)}static fromNumber(t,r=new Uint32Array(4)){return le.fromString(t.toString(),r)}static fromString(t,r=new Uint32Array(4)){const n=t.startsWith("-"),i=t.length,s=new le(r);for(let o=n?1:0;o<i;){const a=Hr<i-o?Hr:i-o,c=new le(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),l=new le(new Uint32Array([ao[a],0,0,0]));s.times(l),s.plus(c),o+=a}return n?s.negate():s}static convertArray(t){const r=new Uint32Array(t.length*4);for(let n=-1,i=t.length;++n<i;)le.from(t[n],new Uint32Array(r.buffer,r.byteOffset+4*4*n,4));return r}}class Bl extends Y{constructor(t,r,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=r,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof it?t.type:t)}visitNull(t,{length:r}=this.nextFieldNode()){return G({type:t,length:r})}visitBool(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===zt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:r,nullCount:n}=this.nextFieldNode()){return G({type:t,length:r,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,r,n=this.nextBufferRange()){return r>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,r){return this.readData(t,r)}readTypeIds(t,r){return this.readData(t,r)}readData(t,{length:r,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+r)}readDictionary(t){return this.dictionaries.get(t.id)}}class rb extends Bl{constructor(t,r,n,i){super(new Uint8Array(0),r,n,i),this.sources=t}readNullBitmap(t,r,{offset:n}=this.nextBufferRange()){return r<=0?new Uint8Array(0):Ti(this.sources[n])}readOffsets(t,{offset:r}=this.nextBufferRange()){return et(Uint8Array,et(Int32Array,this.sources[r]))}readTypeIds(t,{offset:r}=this.nextBufferRange()){return et(Uint8Array,et(t.ArrayType,this.sources[r]))}readData(t,{offset:r}=this.nextBufferRange()){const{sources:n}=this;return O.isTimestamp(t)||(O.isInt(t)||O.isTime(t))&&t.bitWidth===64||O.isDate(t)&&t.unit===Me.MILLISECOND?et(Uint8Array,Nt.convertArray(n[r])):O.isDecimal(t)?et(Uint8Array,le.convertArray(n[r])):O.isBinary(t)||O.isFixedSizeBinary(t)?nb(n[r]):O.isBool(t)?Ti(n[r]):O.isUtf8(t)?Gs(n[r].join("")):et(Uint8Array,et(t.ArrayType,n[r].map(i=>+i)))}}function nb(e){const t=e.join(""),r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n>>1]=Number.parseInt(t.slice(n,n+2),16);return r}class D extends Y{compareSchemas(t,r){return t===r||r instanceof t.constructor&&this.compareManyFields(t.fields,r.fields)}compareManyFields(t,r){return t===r||Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every((n,i)=>this.compareFields(n,r[i]))}compareFields(t,r){return t===r||r instanceof t.constructor&&t.name===r.name&&t.nullable===r.nullable&&this.visit(t.type,r.type)}}function Mt(e,t){return t instanceof e.constructor}function Nn(e,t){return e===t||Mt(e,t)}function Pe(e,t){return e===t||Mt(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Hi(e,t){return e===t||Mt(e,t)&&e.precision===t.precision}function ib(e,t){return e===t||Mt(e,t)&&e.byteWidth===t.byteWidth}function co(e,t){return e===t||Mt(e,t)&&e.unit===t.unit}function Fn(e,t){return e===t||Mt(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Dn(e,t){return e===t||Mt(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function sb(e,t){return e===t||Mt(e,t)&&e.children.length===t.children.length&&rr.compareManyFields(e.children,t.children)}function ob(e,t){return e===t||Mt(e,t)&&e.children.length===t.children.length&&rr.compareManyFields(e.children,t.children)}function lo(e,t){return e===t||Mt(e,t)&&e.mode===t.mode&&e.typeIds.every((r,n)=>r===t.typeIds[n])&&rr.compareManyFields(e.children,t.children)}function ab(e,t){return e===t||Mt(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&rr.visit(e.indices,t.indices)&&rr.visit(e.dictionary,t.dictionary)}function uo(e,t){return e===t||Mt(e,t)&&e.unit===t.unit}function cb(e,t){return e===t||Mt(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&rr.compareManyFields(e.children,t.children)}function lb(e,t){return e===t||Mt(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&rr.compareManyFields(e.children,t.children)}D.prototype.visitNull=Nn;D.prototype.visitBool=Nn;D.prototype.visitInt=Pe;D.prototype.visitInt8=Pe;D.prototype.visitInt16=Pe;D.prototype.visitInt32=Pe;D.prototype.visitInt64=Pe;D.prototype.visitUint8=Pe;D.prototype.visitUint16=Pe;D.prototype.visitUint32=Pe;D.prototype.visitUint64=Pe;D.prototype.visitFloat=Hi;D.prototype.visitFloat16=Hi;D.prototype.visitFloat32=Hi;D.prototype.visitFloat64=Hi;D.prototype.visitUtf8=Nn;D.prototype.visitBinary=Nn;D.prototype.visitFixedSizeBinary=ib;D.prototype.visitDate=co;D.prototype.visitDateDay=co;D.prototype.visitDateMillisecond=co;D.prototype.visitTimestamp=Fn;D.prototype.visitTimestampSecond=Fn;D.prototype.visitTimestampMillisecond=Fn;D.prototype.visitTimestampMicrosecond=Fn;D.prototype.visitTimestampNanosecond=Fn;D.prototype.visitTime=Dn;D.prototype.visitTimeSecond=Dn;D.prototype.visitTimeMillisecond=Dn;D.prototype.visitTimeMicrosecond=Dn;D.prototype.visitTimeNanosecond=Dn;D.prototype.visitDecimal=Nn;D.prototype.visitList=sb;D.prototype.visitStruct=ob;D.prototype.visitUnion=lo;D.prototype.visitDenseUnion=lo;D.prototype.visitSparseUnion=lo;D.prototype.visitDictionary=ab;D.prototype.visitInterval=uo;D.prototype.visitIntervalDayTime=uo;D.prototype.visitIntervalYearMonth=uo;D.prototype.visitFixedSizeList=cb;D.prototype.visitMap=lb;const rr=new D;function Ns(e,t){return rr.compareSchemas(e,t)}function is(e,t){return ub(e,t.map(r=>r.data.concat()))}function ub(e,t){const r=[...e.fields],n=[],i={numBatches:t.reduce((d,h)=>Math.max(d,h.length),0)};let s=0,o=0,a=-1;const c=t.length;let l,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(u=db(r,o,u,t,i),o>0&&(n[s++]=G({type:new Ot(r),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(r),n.map(d=>new Bt(e,d))]}function db(e,t,r,n,i){var s;const o=(t+63&-64)>>3;for(let a=-1,c=n.length;++a<c;){const l=r[a],u=l==null?void 0:l.length;if(u>=t)u===t?r[a]=l:(r[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,n[a].unshift(l.slice(t,u-t))));else{const d=e[a];e[a]=d.clone({nullable:!0}),r[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:G({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return r}var Ll;class At{constructor(...t){var r,n;if(t.length===0)return this.batches=[],this.schema=new X([]),this._offsets=[0],this;let i,s;t[0]instanceof X&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=c=>{if(c){if(c instanceof Bt)return[c];if(c instanceof At)return c.batches;if(c instanceof nt){if(c.type instanceof Ot)return[new Bt(new X(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>o(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>o(l));if(typeof c=="object"){const l=Object.keys(c),u=l.map(g=>new J([c[g]])),d=new X(l.map((g,b)=>new it(String(g),u[b].type))),[,h]=is(d,u);return h.length===0?[new Bt(c)]:h}}}return[]},a=t.flatMap(c=>o(c));if(i=(n=i??((r=a[0])===null||r===void 0?void 0:r.schema))!==null&&n!==void 0?n:new X([]),!(i instanceof X))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of a){if(!(c instanceof Bt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ns(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??ml(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,r)=>t+r.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=yl(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,r){}indexOf(t,r){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?so.visit(new J(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const r=this.schema,n=this.data.concat(t.flatMap(({data:i})=>i));return new At(r,n.map(i=>new Bt(r,i)))}slice(t,r){const n=this.schema;[t,r]=bl({length:this.numRows},t,r);const i=_l(this.data,this._offsets,t,r);return new At(n,i.map(s=>new Bt(n,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(r=>r.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const r=this.data.map(n=>n.children[t]);if(r.length===0){const{type:n}=this.schema.fields[t],i=G({type:n,length:0,nullCount:0});r.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new J(r)}return null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){r||(r=new J([G({type:new Ze,length:this.numRows})]));const s=n.fields.slice(),o=s[t].clone({type:r.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[s[t],a[t]]=[o,r],[n,i]=is(n,a)}return new At(n,i)}select(t){const r=this.schema.fields.reduce((n,i,s)=>n.set(i.name,s),new Map);return this.selectAt(t.map(n=>r.get(n)).filter(n=>n>-1))}selectAt(t){const r=this.schema.selectAt(t),n=this.batches.map(i=>i.selectAt(t));return new At(r,n)}assign(t){const r=this.schema.fields,[n,i]=t.schema.fields.reduce((a,c,l)=>{const[u,d]=a,h=r.findIndex(g=>g.name===c.name);return~h?d[h]=l:u.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...r.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...n.map(a=>t.getChildAt(a))].filter(Boolean);return new At(...is(s,o))}}Ll=Symbol.toStringTag;At[Ll]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Cr(io),e.get=Cr(Ct.getVisitFn(f.Struct)),e.set=wl(Jt.getVisitFn(f.Struct)),e.indexOf=vl(Ai.getVisitFn(f.Struct)),e.getByteLength=Cr(ve.getVisitFn(f.Struct)),"Table"))(At.prototype);var kl;let Bt=class an{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof X))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=G({nullCount:0,type:new Ot(this.schema.fields),children:this.schema.fields.map(r=>G({type:r.type,nullCount:0}))})]=t,!(this.data instanceof nt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=da(this.schema,this.data.children);break}case 1:{const[r]=t,{fields:n,children:i,length:s}=Object.keys(r).reduce((c,l,u)=>(c.children[u]=r[l],c.length=Math.max(c.length,r[l].length),c.fields[u]=it.new({name:l,type:r[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new X(n),a=G({type:new Ot(n),length:s,children:i,nullCount:0});[this.schema,this.data]=da(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=xl(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ct.visit(this.data,t)}set(t,r){return Jt.visit(this.data,t,r)}indexOf(t,r){return Ai.visit(this.data,t,r)}getByteLength(t){return ve.visit(this.data,t)}[Symbol.iterator](){return so.visit(new J([this.data]))}toArray(){return[...this]}concat(...t){return new At(this.schema,[this,...t])}slice(t,r){const[n]=new J([this.data]).slice(t,r).data;return new an(this.schema,n)}getChild(t){var r;return this.getChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new J([this.data.children[t]]):null}setChild(t,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),r)}setChildAt(t,r){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){r||(r=new J([G({type:new Ze,length:this.numRows})]));const s=n.fields.slice(),o=i.children.slice(),a=s[t].clone({type:r.type});[s[t],o[t]]=[a,r.data[0]],n=new X(s,new Map(this.schema.metadata)),i=G({type:new Ot(s),children:o})}return new an(n,i)}select(t){const r=this.schema.select(t),n=new Ot(r.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new an(r,G({type:n,length:this.numRows,children:i}))}selectAt(t){const r=this.schema.selectAt(t),n=t.map(s=>this.data.children[s]).filter(Boolean),i=G({type:new Ot(r.fields),length:this.numRows,children:n});return new an(r,i)}};kl=Symbol.toStringTag;Bt[kl]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Bt.prototype);function da(e,t,r=t.reduce((n,i)=>Math.max(n,i.length),0)){var n;const i=[...e.fields],s=[...t],o=(r+63&-64)>>3;for(const[a,c]of e.fields.entries()){const l=t[a];(!l||l.length!==r)&&(i[a]=c.clone({nullable:!0}),s[a]=(n=l==null?void 0:l._changeLengthAndBackfillNullBitmap(r))!==null&&n!==void 0?n:G({type:c.type,length:r,nullCount:r,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),G({type:new Ot(i),length:r,children:s})]}function xl(e,t,r=new Map){for(let n=-1,i=e.length;++n<i;){const o=e[n].type,a=t[n];if(O.isDictionary(o)){if(!r.has(o.id))a.dictionary&&r.set(o.id,a.dictionary);else if(r.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&xl(o.children,a.children,r)}return r}class ho extends Bt{constructor(t){const r=t.fields.map(i=>G({type:i.type})),n=G({type:new Ot(t.fields),nullCount:0,children:r});super(t,n)}}var xi;(function(e){e[e.BUFFER=0]="BUFFER"})(xi||(xi={}));var Ci;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Ci||(Ci={}));class He{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsBodyCompression(t,r){return(r||new He).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,r){return t.setPosition(t.position()+rt),(r||new He).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Ci.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):xi.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,r){t.addFieldInt8(0,r,Ci.LZ4_FRAME)}static addMethod(t,r){t.addFieldInt8(1,r,xi.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,r,n){return He.startBodyCompression(t),He.addCodec(t,r),He.addMethod(t,n),He.endBodyCompression(t)}}class Cl{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,r,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(r),t.offset()}}let Ml=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,r,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(r),t.offset()}},Be=class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsRecordBatch(t,r){return(r||new Fs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,r){return t.setPosition(t.position()+rt),(r||new Fs).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,r){const n=this.bb.__offset(this.bb_pos,6);return n?(r||new Ml).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new Cl).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const r=this.bb.__offset(this.bb_pos,10);return r?(t||new He).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,r){t.addFieldInt64(0,r,t.createLong(0,0))}static addNodes(t,r){t.addFieldOffset(1,r,0)}static startNodesVector(t,r){t.startVector(16,r,8)}static addBuffers(t,r){t.addFieldOffset(2,r,0)}static startBuffersVector(t,r){t.startVector(16,r,8)}static addCompression(t,r){t.addFieldOffset(3,r,0)}static endRecordBatch(t){return t.endObject()}},Nr=class Ds{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsDictionaryBatch(t,r){return(r||new Ds).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,r){return t.setPosition(t.position()+rt),(r||new Ds).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new Be).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,r){t.addFieldInt64(0,r,t.createLong(0,0))}static addData(t,r){t.addFieldOffset(1,r,0)}static addIsDelta(t,r){t.addFieldInt8(2,+r,0)}static endDictionaryBatch(t){return t.endObject()}};var Mi;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Mi||(Mi={}));let Ge=class ae{constructor(){this.bb=null,this.bb_pos=0}__init(t,r){return this.bb_pos=t,this.bb=r,this}static getRootAsMessage(t,r){return(r||new ae).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,r){return t.setPosition(t.position()+rt),(r||new ae).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qr.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Mi.NONE}header(t){const r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__union(t,this.bb_pos+r):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,r){const n=this.bb.__offset(this.bb_pos,12);return n?(r||new gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,r){t.addFieldInt16(0,r,qr.V1)}static addHeaderType(t,r){t.addFieldInt8(1,r,Mi.NONE)}static addHeader(t,r){t.addFieldOffset(2,r,0)}static addBodyLength(t,r){t.addFieldInt64(3,r,t.createLong(0,0))}static addCustomMetadata(t,r){t.addFieldOffset(4,r,0)}static createCustomMetadataVector(t,r){t.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)t.addOffset(r[n]);return t.endVector()}static startCustomMetadataVector(t,r){t.startVector(4,r,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,r){t.finish(r)}static finishSizePrefixedMessageBuffer(t,r){t.finish(r,void 0,!0)}static createMessage(t,r,n,i,s,o){return ae.startMessage(t),ae.addVersion(t,r),ae.addHeaderType(t,n),ae.addHeader(t,i),ae.addBodyLength(t,s),ae.addCustomMetadata(t,o),ae.endMessage(t)}};var hb=xe;class fb extends Y{visit(t,r){return t==null||r==null?void 0:super.visit(t,r)}visitNull(t,r){return gr.startNull(r),gr.endNull(r)}visitInt(t,r){return Pt.startInt(r),Pt.addBitWidth(r,t.bitWidth),Pt.addIsSigned(r,t.isSigned),Pt.endInt(r)}visitFloat(t,r){return be.startFloatingPoint(r),be.addPrecision(r,t.precision),be.endFloatingPoint(r)}visitBinary(t,r){return dr.startBinary(r),dr.endBinary(r)}visitBool(t,r){return hr.startBool(r),hr.endBool(r)}visitUtf8(t,r){return pr.startUtf8(r),pr.endUtf8(r)}visitDecimal(t,r){return Ft.startDecimal(r),Ft.addScale(r,t.scale),Ft.addPrecision(r,t.precision),Ft.addBitWidth(r,t.bitWidth),Ft.endDecimal(r)}visitDate(t,r){return Hn.startDate(r),Hn.addUnit(r,t.unit),Hn.endDate(r)}visitTime(t,r){return Ht.startTime(r),Ht.addUnit(r,t.unit),Ht.addBitWidth(r,t.bitWidth),Ht.endTime(r)}visitTimestamp(t,r){const n=t.timezone&&r.createString(t.timezone)||void 0;return Kt.startTimestamp(r),Kt.addUnit(r,t.unit),n!==void 0&&Kt.addTimezone(r,n),Kt.endTimestamp(r)}visitInterval(t,r){return pe.startInterval(r),pe.addUnit(r,t.unit),pe.endInterval(r)}visitList(t,r){return fr.startList(r),fr.endList(r)}visitStruct(t,r){return br.startStruct_(r),br.endStruct_(r)}visitUnion(t,r){Dt.startTypeIdsVector(r,t.typeIds.length);const n=Dt.createTypeIdsVector(r,t.typeIds);return Dt.startUnion(r),Dt.addMode(r,t.mode),Dt.addTypeIds(r,n),Dt.endUnion(r)}visitDictionary(t,r){const n=this.visit(t.indices,r);return ke.startDictionaryEncoding(r),ke.addId(r,new hb(t.id,0)),ke.addIsOrdered(r,t.isOrdered),n!==void 0&&ke.addIndexType(r,n),ke.endDictionaryEncoding(r)}visitFixedSizeBinary(t,r){return fe.startFixedSizeBinary(r),fe.addByteWidth(r,t.byteWidth),fe.endFixedSizeBinary(r)}visitFixedSizeList(t,r){return ge.startFixedSizeList(r),ge.addListSize(r,t.listSize),ge.endFixedSizeList(r)}visitMap(t,r){return Kn.startMap(r),Kn.addKeysSorted(r,t.keysSorted),Kn.endMap(r)}}const ss=new fb;function gb(e,t=new Map){return new X(pb(e,t),Xn(e.customMetadata),t)}function Ul(e){return new $t(e.count,Pl(e.columns),Vl(e.columns))}function bb(e){return new Ie(Ul(e.data),e.id,e.isDelta)}function pb(e,t){return(e.fields||[]).filter(Boolean).map(r=>it.fromJSON(r,t))}function ha(e,t){return(e.children||[]).filter(Boolean).map(r=>it.fromJSON(r,t))}function Pl(e){return(e||[]).reduce((t,r)=>[...t,new Sr(r.count,yb(r.VALIDITY)),...Pl(r.children)],[])}function Vl(e,t=[]){for(let r=-1,n=(e||[]).length;++r<n;){const i=e[r];i.VALIDITY&&t.push(new me(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new me(t.length,i.TYPE.length)),i.OFFSET&&t.push(new me(t.length,i.OFFSET.length)),i.DATA&&t.push(new me(t.length,i.DATA.length)),t=Vl(i.children,t)}return t}function yb(e){return(e||[]).reduce((t,r)=>t+ +(r===0),0)}function mb(e,t){let r,n,i,s,o,a;return!t||!(s=e.dictionary)?(o=ga(e,ha(e,t)),i=new it(e.name,o,e.nullable,Xn(e.customMetadata))):t.has(r=s.id)?(n=(n=s.indexType)?fa(n):new bn,a=new $r(t.get(r),n,r,s.isOrdered),i=new it(e.name,a,e.nullable,Xn(e.customMetadata))):(n=(n=s.indexType)?fa(n):new bn,t.set(r,o=ga(e,ha(e,t))),a=new $r(o,n,r,s.isOrdered),i=new it(e.name,a,e.nullable,Xn(e.customMetadata))),i||null}function Xn(e){return new Map(Object.entries(e||{}))}function fa(e){return new tr(e.isSigned,e.bitWidth)}function ga(e,t){const r=e.type.name;switch(r){case"NONE":return new Ze;case"null":return new Ze;case"binary":return new fi;case"utf8":return new gi;case"bool":return new bi;case"list":return new wi((t||[])[0]);case"struct":return new Ot(t||[]);case"struct_":return new Ot(t||[])}switch(r){case"int":{const n=e.type;return new tr(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=e.type;return new pn(kt[n.precision])}case"decimal":{const n=e.type;return new pi(n.scale,n.precision,n.bitWidth)}case"date":{const n=e.type;return new yi(Me[n.unit])}case"time":{const n=e.type;return new yn(H[n.unit],n.bitWidth)}case"timestamp":{const n=e.type;return new mi(H[n.unit],n.timezone)}case"interval":{const n=e.type;return new _i(Xe[n.unit])}case"union":{const n=e.type;return new vi(zt[n.mode],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=e.type;return new Ii(n.byteWidth)}case"fixedsizelist":{const n=e.type;return new Si(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new Ei((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var Ir=xe,_b=Nl,wb=jr;class Rt{constructor(t,r,n,i){this._version=r,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,r){const n=new Rt(0,Vt.V4,r);return n._createHeader=vb(t,r),n}static decode(t){t=new wb(W(t));const r=Ge.getRootAsMessage(t),n=r.bodyLength(),i=r.version(),s=r.headerType(),o=new Rt(n,i,s);return o._createHeader=Ib(r,s),o}static encode(t){const r=new _b;let n=-1;return t.isSchema()?n=X.encode(r,t.header()):t.isRecordBatch()?n=$t.encode(r,t.header()):t.isDictionaryBatch()&&(n=Ie.encode(r,t.header())),Ge.startMessage(r),Ge.addVersion(r,Vt.V4),Ge.addHeader(r,n),Ge.addHeaderType(r,t.headerType),Ge.addBodyLength(r,new Ir(t.bodyLength,0)),Ge.finishMessageBuffer(r,Ge.endMessage(r)),r.asUint8Array()}static from(t,r=0){if(t instanceof X)return new Rt(0,Vt.V4,Q.Schema,t);if(t instanceof $t)return new Rt(r,Vt.V4,Q.RecordBatch,t);if(t instanceof Ie)return new Rt(r,Vt.V4,Q.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Q.Schema}isRecordBatch(){return this.headerType===Q.RecordBatch}isDictionaryBatch(){return this.headerType===Q.DictionaryBatch}}class $t{constructor(t,r,n){this._nodes=r,this._buffers=n,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ie{constructor(t,r,n=!1){this._data=t,this._isDelta=n,this._id=typeof r=="number"?r:r.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class me{constructor(t,r){this.offset=typeof t=="number"?t:t.low,this.length=typeof r=="number"?r:r.low}}class Sr{constructor(t,r){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof r=="number"?r:r.low}}function vb(e,t){return()=>{switch(t){case Q.Schema:return X.fromJSON(e);case Q.RecordBatch:return $t.fromJSON(e);case Q.DictionaryBatch:return Ie.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Q[t]}, type: ${t} }`)}}function Ib(e,t){return()=>{switch(t){case Q.Schema:return X.decode(e.header(new ce));case Q.RecordBatch:return $t.decode(e.header(new Be),e.version());case Q.DictionaryBatch:return Ie.decode(e.header(new Nr),e.version())}throw new Error(`Unrecognized Message type: { name: ${Q[t]}, type: ${t} }`)}}it.encode=Lb;it.decode=Db;it.fromJSON=mb;X.encode=Bb;X.decode=Sb;X.fromJSON=gb;$t.encode=kb;$t.decode=Eb;$t.fromJSON=Ul;Ie.encode=xb;Ie.decode=Tb;Ie.fromJSON=bb;Sr.encode=Cb;Sr.decode=Ob;me.encode=Mb;me.decode=Ab;function Sb(e,t=new Map){const r=Fb(e,t);return new X(r,Zn(e),t)}function Eb(e,t=Vt.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new $t(e.length(),Rb(e),Nb(e,t))}function Tb(e,t=Vt.V4){return new Ie($t.decode(e.data(),t),e.id(),e.isDelta())}function Ab(e){return new me(e.offset(),e.length())}function Ob(e){return new Sr(e.length(),e.nullCount())}function Rb(e){const t=[];for(let r,n=-1,i=-1,s=e.nodesLength();++n<s;)(r=e.nodes(n))&&(t[++i]=Sr.decode(r));return t}function Nb(e,t){const r=[];for(let n,i=-1,s=-1,o=e.buffersLength();++i<o;)(n=e.buffers(i))&&(t<Vt.V4&&(n.bb_pos+=8*(i+1)),r[++s]=me.decode(n));return r}function Fb(e,t){const r=[];for(let n,i=-1,s=-1,o=e.fieldsLength();++i<o;)(n=e.fields(i))&&(r[++s]=it.decode(n,t));return r}function ba(e,t){const r=[];for(let n,i=-1,s=-1,o=e.childrenLength();++i<o;)(n=e.children(i))&&(r[++s]=it.decode(n,t));return r}function Db(e,t){let r,n,i,s,o,a;return!t||!(a=e.dictionary())?(i=ya(e,ba(e,t)),n=new it(e.name(),i,e.nullable(),Zn(e))):t.has(r=a.id().low)?(s=(s=a.indexType())?pa(s):new bn,o=new $r(t.get(r),s,r,a.isOrdered()),n=new it(e.name(),o,e.nullable(),Zn(e))):(s=(s=a.indexType())?pa(s):new bn,t.set(r,i=ya(e,ba(e,t))),o=new $r(i,s,r,a.isOrdered()),n=new it(e.name(),o,e.nullable(),Zn(e))),n||null}function Zn(e){const t=new Map;if(e)for(let r,n,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(r=e.customMetadata(i))&&(n=r.key())!=null&&t.set(n,r.value());return t}function pa(e){return new tr(e.isSigned(),e.bitWidth())}function ya(e,t){const r=e.typeType();switch(r){case st.NONE:return new Ze;case st.Null:return new Ze;case st.Binary:return new fi;case st.Utf8:return new gi;case st.Bool:return new bi;case st.List:return new wi((t||[])[0]);case st.Struct_:return new Ot(t||[])}switch(r){case st.Int:{const n=e.type(new Pt);return new tr(n.isSigned(),n.bitWidth())}case st.FloatingPoint:{const n=e.type(new be);return new pn(n.precision())}case st.Decimal:{const n=e.type(new Ft);return new pi(n.scale(),n.precision(),n.bitWidth())}case st.Date:{const n=e.type(new Hn);return new yi(n.unit())}case st.Time:{const n=e.type(new Ht);return new yn(n.unit(),n.bitWidth())}case st.Timestamp:{const n=e.type(new Kt);return new mi(n.unit(),n.timezone())}case st.Interval:{const n=e.type(new pe);return new _i(n.unit())}case st.Union:{const n=e.type(new Dt);return new vi(n.mode(),n.typeIdsArray()||[],t||[])}case st.FixedSizeBinary:{const n=e.type(new fe);return new Ii(n.byteWidth())}case st.FixedSizeList:{const n=e.type(new ge);return new Si(n.listSize(),(t||[])[0])}case st.Map:{const n=e.type(new Kn);return new Ei((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${st[r]}" (${r})`)}function Bb(e,t){const r=t.fields.map(s=>it.encode(e,s));ce.startFieldsVector(e,r.length);const n=ce.createFieldsVector(e,r),i=t.metadata&&t.metadata.size>0?ce.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),c=e.createString(`${o}`);return gt.startKeyValue(e),gt.addKey(e,a),gt.addValue(e,c),gt.endKeyValue(e)})):-1;return ce.startSchema(e),ce.addFields(e,n),ce.addEndianness(e,Ub?Gr.Little:Gr.Big),i!==-1&&ce.addCustomMetadata(e,i),ce.endSchema(e)}function Lb(e,t){let r=-1,n=-1,i=-1;const s=t.type;let o=t.typeId;O.isDictionary(s)?(o=s.dictionary.typeId,i=ss.visit(s,e),n=ss.visit(s.dictionary,e)):n=ss.visit(s,e);const a=(s.children||[]).map(u=>it.encode(e,u)),c=qt.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?qt.createCustomMetadataVector(e,[...t.metadata].map(([u,d])=>{const h=e.createString(`${u}`),g=e.createString(`${d}`);return gt.startKeyValue(e),gt.addKey(e,h),gt.addValue(e,g),gt.endKeyValue(e)})):-1;return t.name&&(r=e.createString(t.name)),qt.startField(e),qt.addType(e,n),qt.addTypeType(e,o),qt.addChildren(e,c),qt.addNullable(e,!!t.nullable),r!==-1&&qt.addName(e,r),i!==-1&&qt.addDictionary(e,i),l!==-1&&qt.addCustomMetadata(e,l),qt.endField(e)}function kb(e,t){const r=t.nodes||[],n=t.buffers||[];Be.startNodesVector(e,r.length);for(const o of r.slice().reverse())Sr.encode(e,o);const i=e.endVector();Be.startBuffersVector(e,n.length);for(const o of n.slice().reverse())me.encode(e,o);const s=e.endVector();return Be.startRecordBatch(e),Be.addLength(e,new Ir(t.length,0)),Be.addNodes(e,i),Be.addBuffers(e,s),Be.endRecordBatch(e)}function xb(e,t){const r=$t.encode(e,t.data);return Nr.startDictionaryBatch(e),Nr.addId(e,new Ir(t.id,0)),Nr.addIsDelta(e,t.isDelta),Nr.addData(e,r),Nr.endDictionaryBatch(e)}function Cb(e,t){return Ml.createFieldNode(e,new Ir(t.length,0),new Ir(t.nullCount,0))}function Mb(e,t){return Cl.createBuffer(e,new Ir(t.offset,0),new Ir(t.length,0))}const Ub=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),fo=e=>`Expected ${Q[e]} Message in stream, but was null or length 0.`,go=e=>`Header pointer of flatbuffer-encoded ${Q[e]} Message is null or length 0.`,zl=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,$l=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class jl{constructor(t){this.source=t instanceof Li?t:new Li(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?ot:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(fo(t));return r.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const r=W(this.source.read(t));if(r.byteLength<t)throw new Error($l(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()}readSchema(t=!1){const r=Q.Schema,n=this.readMessage(r),i=n==null?void 0:n.header();if(t&&!i)throw new Error(go(r));return i}readMetadataLength(){const t=this.source.read(Ki),r=t&&new jr(t),n=(r==null?void 0:r.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(t){const r=this.source.read(t);if(!r)return ot;if(r.byteLength<t)throw new Error(zl(t,r.byteLength));return{done:!1,value:Rt.decode(r)}}}class Pb{constructor(t,r){this.source=t instanceof Wr?t:uc(t)?new ki(t,r):new Wr(t)}[Symbol.asyncIterator](){return this}next(){return E(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?ot:t})}throw(t){return E(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return E(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return E(this,void 0,void 0,function*(){let r;if((r=yield this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(fo(t));return r.value})}readMessageBody(t){return E(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const r=W(yield this.source.read(t));if(r.byteLength<t)throw new Error($l(t,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()})}readSchema(t=!1){return E(this,void 0,void 0,function*(){const r=Q.Schema,n=yield this.readMessage(r),i=n==null?void 0:n.header();if(t&&!i)throw new Error(go(r));return i})}readMetadataLength(){return E(this,void 0,void 0,function*(){const t=yield this.source.read(Ki),r=t&&new jr(t),n=(r==null?void 0:r.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(t){return E(this,void 0,void 0,function*(){const r=yield this.source.read(t);if(!r)return ot;if(r.byteLength<t)throw new Error(zl(t,r.byteLength));return{done:!1,value:Rt.decode(r)}})}}class Vb extends jl{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof la?t:new la(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Rt.fromJSON(t.schema,Q.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const r=t.dictionaries[this._dictionaryIndex++];return this._body=r.data.columns,{done:!1,value:Rt.fromJSON(r,Q.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const r=t.batches[this._batchIndex++];return this._body=r.columns,{done:!1,value:Rt.fromJSON(r,Q.RecordBatch)}}return this._body=[],ot}readMessageBody(t){return r(this._body);function r(n){return(n||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...r(s.children)],[])}}readMessage(t){let r;if((r=this.next()).done)return null;if(t!=null&&r.value.headerType!==t)throw new Error(fo(t));return r.value}readSchema(){const t=Q.Schema,r=this.readMessage(t),n=r==null?void 0:r.header();if(!r||!n)throw new Error(go(t));return n}}const Ki=4,Bs="ARROW1",_n=new Uint8Array(Bs.length);for(let e=0;e<Bs.length;e+=1)_n[e]=Bs.codePointAt(e);function bo(e,t=0){for(let r=-1,n=_n.length;++r<n;)if(_n[r]!==e[t+r])return!1;return!0}const Bn=_n.length,ql=Bn+Ki,zb=Bn*2+Ki;class Qt extends oo{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const r=this._impl.open(t);return vr(r)?r.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Yt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Yt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Qt?t:vs(t)?Gb(t):uc(t)?Hb(t):vr(t)?(()=>E(this,void 0,void 0,function*(){return yield Qt.from(yield t)}))():dc(t)||Ys(t)||hc(t)||Kr(t)?Wb(new Wr(t)):Yb(new Li(t))}static readAll(t){return t instanceof Qt?t.isSync()?ma(t):_a(t):vs(t)||ArrayBuffer.isView(t)||Rn(t)||lc(t)?ma(t):_a(t)}}class Ui extends Qt{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ye(this,arguments,function*(){yield P(yield*Wn(mr(this[Symbol.iterator]())))})}}class Pi extends Qt{constructor(t){super(t),this._impl=t}readAll(){var t,r;return E(this,void 0,void 0,function*(){const n=new Array;try{for(var i=mr(this),s;s=yield i.next(),!s.done;){const o=s.value;n.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(r=i.return)&&(yield r.call(i))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Gl extends Ui{constructor(t){super(t),this._impl=t}}class $b extends Pi{constructor(t){super(t),this._impl=t}}class Yl{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,r){const n=this._loadVectors(t,r,this.schema.fields),i=G({type:new Ot(this.schema.fields),length:t.length,children:n});return new Bt(this.schema,i)}_loadDictionaryBatch(t,r){const{id:n,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(n);if(i||!a){const c=o.dictionaries.get(n),l=this._loadVectors(t.data,r,[c]);return(a&&i?a.concat(new J(l)):new J(l)).memoize()}return a.memoize()}_loadVectors(t,r,n){return new Bl(r,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class Vi extends Yl{constructor(t,r){super(r),this._reader=vs(t)?new Vb(this._handle=t):new jl(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Hl(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):ot}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):ot}next(){if(this.closed)return ot;let t;const{_reader:r}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=r.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new ho(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class zi extends Yl{constructor(t,r){super(r),this._reader=new Pb(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return E(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return E(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Hl(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return E(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):ot})}return(t){return E(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):ot})}next(){return E(this,void 0,void 0,function*(){if(this.closed)return ot;let t;const{_reader:r}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=yield r.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=yield r.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new ho(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return E(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Wl extends Vi{constructor(t,r){super(t instanceof ua?t:new ua(t),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var r;if(this.closed)return null;this._footer||this.open();const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const i=this._reader.readMessage(Q.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var r;const n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const i=this._reader.readMessage(Q.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,r=t.size-ql,n=t.readInt32(r),i=t.readAt(r-n,n);return mn.decode(i)}_readNextMessageAndValidate(t){var r;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class jb extends zi{constructor(t,...r){const n=typeof r[0]!="number"?r.shift():void 0,i=r[0]instanceof Map?r.shift():void 0;super(t instanceof ki?t:new ki(t,n),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const r=Object.create(null,{open:{get:()=>super.open}});return E(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield r.open.call(this,t)})}readRecordBatch(t){var r;return E(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const i=yield this._reader.readMessage(Q.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var r;return E(this,void 0,void 0,function*(){const n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const i=yield this._reader.readMessage(Q.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return E(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const r=t.size-ql,n=yield t.readInt32(r),i=yield t.readAt(r-n,n);return mn.decode(i)})}_readNextMessageAndValidate(t){return E(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=this._footer.getRecordBatch(this._recordBatchIndex);if(r&&(yield this._handle.seek(r.offset)))return yield this._reader.readMessage(t)}return null})}}class qb extends Vi{constructor(t,r){super(t,r)}_loadVectors(t,r,n){return new rb(r,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Hl(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*ma(e){const t=Qt.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function _a(e){return ye(this,arguments,function*(){const r=yield P(Qt.from(e));try{if(!(yield P(r.open({autoDestroy:!1}))).closed)do yield yield P(r);while(!(yield P(r.reset().open())).closed)}finally{yield P(r.cancel())}})}function Gb(e){return new Ui(new qb(e))}function Yb(e){const t=e.peek(Bn+7&-8);return t&&t.byteLength>=4?bo(t)?new Gl(new Wl(e.read())):new Ui(new Vi(e)):new Ui(new Vi(function*(){}()))}function Wb(e){return E(this,void 0,void 0,function*(){const t=yield e.peek(Bn+7&-8);return t&&t.byteLength>=4?bo(t)?new Gl(new Wl(yield e.read())):new Pi(new zi(e)):new Pi(new zi(function(){return ye(this,arguments,function*(){})}()))})}function Hb(e){return E(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),r=new ki(e,t);return t>=zb&&bo(yield r.readAt(0,Bn+7&-8))?new $b(new jb(r)):new Pi(new zi(r))})}class ht extends Y{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const r=i=>i.flatMap(s=>Array.isArray(s)?r(s):s instanceof Bt?s.data.children:s.data),n=new ht;return n.visitMany(r(t)),n}visit(t){if(t instanceof J)return this.visitMany(t.data),this;const{type:r}=t;if(!O.isDictionary(r)){const{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");O.isNull(r)||ee.call(this,i<=0?new Uint8Array(0):eo(t.offset,n,t.nullBitmap)),this.nodes.push(new Sr(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function ee(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new me(this._byteLength,t)),this._byteLength+=t,this}function Kb(e){const{type:t,length:r,typeIds:n,valueOffsets:i}=e;if(ee.call(this,n),t.mode===zt.Sparse)return Ls.call(this,e);if(t.mode===zt.Dense){if(e.offset<=0)return ee.call(this,i),Ls.call(this,e);{const s=n.reduce((u,d)=>Math.max(u,d),n[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),c=new Int32Array(r),l=Hs(-i[0],r,i);for(let u,d,h=-1;++h<r;)(d=a[u=n[h]])===-1&&(d=a[u]=l[u]),c[h]=l[h]-d,++o[u];ee.call(this,c);for(let u,d=-1,h=t.children.length;++d<h;)if(u=e.children[d]){const g=t.typeIds[d],b=Math.min(r,o[g]);this.visit(u.slice(a[g],b))}}}return this}function Qb(e){let t;return e.nullCount>=e.length?ee.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ee.call(this,eo(e.offset,e.length,t)):ee.call(this,Ti(e.values))}function sr(e){return ee.call(this,e.values.subarray(0,e.length*e.stride))}function Kl(e){const{length:t,values:r,valueOffsets:n}=e,i=n[0],s=n[t],o=Math.min(s-i,r.byteLength-i);return ee.call(this,Hs(-n[0],t,n)),ee.call(this,r.subarray(i,i+o)),this}function po(e){const{length:t,valueOffsets:r}=e;return r&&ee.call(this,Hs(r[0],t,r)),this.visit(e.children[0])}function Ls(e){return this.visitMany(e.type.children.map((t,r)=>e.children[r]).filter(Boolean))[0]}ht.prototype.visitBool=Qb;ht.prototype.visitInt=sr;ht.prototype.visitFloat=sr;ht.prototype.visitUtf8=Kl;ht.prototype.visitBinary=Kl;ht.prototype.visitFixedSizeBinary=sr;ht.prototype.visitDate=sr;ht.prototype.visitTimestamp=sr;ht.prototype.visitTime=sr;ht.prototype.visitDecimal=sr;ht.prototype.visitList=po;ht.prototype.visitStruct=Ls;ht.prototype.visitUnion=Kb;ht.prototype.visitInterval=sr;ht.prototype.visitFixedSizeList=po;ht.prototype.visitMap=po;class Ql extends oo{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Jn,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,xt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,r){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return vr(t)?t.then(r=>this.writeAll(r)):Kr(t)?wo(this,t):_o(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,r=null){return t===this._sink||t instanceof Jn?this._sink=t:(this._sink=new Jn,t&&y1(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&m1(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!r||!Ns(r,this._schema))&&(r==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=r,this._writeSchema(r))),this}write(t){let r=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof At&&!(r=t.schema))return this.finish()&&void 0;if(t instanceof Bt&&!(r=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(r&&!Ns(r,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,r)}t instanceof Bt?t instanceof ho||this._writeRecordBatch(t):t instanceof At?this.writeAll(t.batches):Rn(t)&&this.writeAll(t)}_writeMessage(t,r=8){const n=r-1,i=Rt.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+n&~n,c=a-s-o;return t.headerType===Q.RecordBatch?this._recordBatchBlocks.push(new er(a,t.bodyLength,this._position)):t.headerType===Q.DictionaryBatch&&this._dictionaryBlocks.push(new er(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){const r=W(t);r&&r.byteLength>0&&(this._sink.write(r),this._position+=r.byteLength)}return this}_writeSchema(t){return this._writeMessage(Rt.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(_n)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:r,nodes:n,bufferRegions:i,buffers:s}=ht.assemble(t),o=new $t(t.numRows,n,i),a=Rt.from(o,r);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,r,n=!1){this._dictionaryDeltaOffsets.set(r,t.length+(this._dictionaryDeltaOffsets.get(r)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ht.assemble(new J([t])),c=new $t(t.length,s,o),l=new Ie(c,r,n),u=Rt.from(l,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let r,n,i;for(let s=-1,o=t.length;++s<o;)(r=t[s])&&(n=r.byteLength)>0&&(this._write(r),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[r,n]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(r)||0;if(i===0||(n=n==null?void 0:n.slice(i)).length>0)for(const s of n.data)this._writeDictionaryBatch(s,r,i>0),i+=s.length}return this}}class yo extends Ql{static writeAll(t,r){const n=new yo(r);return vr(t)?t.then(i=>n.writeAll(i)):Kr(t)?wo(n,t):_o(n,t)}}class mo extends Ql{static writeAll(t){const r=new mo;return vr(t)?t.then(n=>r.writeAll(n)):Kr(t)?wo(r,t):_o(r,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const r=mn.encode(new mn(t,Vt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(r)._write(Int32Array.of(r.byteLength))._writeMagic()}}function _o(e,t){let r=t;t instanceof At&&(r=t.batches,e.reset(void 0,t.schema));for(const n of r)e.write(n);return e.finish()}function wo(e,t){var r,n,i,s;return E(this,void 0,void 0,function*(){try{for(r=mr(t);n=yield r.next(),!n.done;){const o=n.value;e.write(o)}}catch(o){i={error:o}}finally{try{n&&!n.done&&(s=r.return)&&(yield s.call(r))}finally{if(i)throw i.error}}return e.finish()})}function Jb(e,t="stream"){return(t==="stream"?yo:mo).writeAll(e).toUint8Array(!0)}var Xb=Object.create,Jl=Object.defineProperty,Zb=Object.getOwnPropertyDescriptor,t2=Object.getOwnPropertyNames,e2=Object.getPrototypeOf,r2=Object.prototype.hasOwnProperty,n2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),i2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of t2(t))!r2.call(e,i)&&i!==r&&Jl(e,i,{get:()=>t[i],enumerable:!(n=Zb(t,i))||n.enumerable});return e},s2=(e,t,r)=>(r=e!=null?Xb(e2(e)):{},i2(t||!e||!e.__esModule?Jl(r,"default",{value:e,enumerable:!0}):r,e)),o2=n2((e,t)=>{t.exports=Worker}),Xl=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Xl||{}),vo=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(vo||{}),Zl=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Zl||{}),tu=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(tu||{}),eu=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(eu||{}),a2=class{log(e){}},ru=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}};function c2(e){switch(e){case 0:return"NONE";case 1:return"DEBUG";case 2:return"INFO";case 3:return"WARNING";case 4:return"ERROR";default:return"?"}}function l2(e){switch(e){case 0:return"NONE";case 1:return"OK";case 2:return"ERROR";case 3:return"START";case 4:return"RUN";case 5:return"CAPTURE";default:return"?"}}function u2(e){switch(e){case 1:return"CONNECT";case 2:return"DISCONNECT";case 5:return"INSTANTIATE";case 3:return"OPEN";case 4:return"QUERY";default:return"?"}}function d2(e){switch(e){case 0:return"NONE";case 1:return"WEB WORKER";case 2:return"NODE WORKER";case 3:return"DUCKDB BINDINGS";case 4:return"DUCKDB";default:return"?"}}var nu=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(nu||{}),iu=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),r=Qt.from(t);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new At(r)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let r=new Io(this._bindings,this._conn,t),n=await Qt.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new su(this._bindings,this._conn,t)}async insertArrowTable(e,t){let r=Jb(e,"stream");await this.insertArrowFromIPCStream(r,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Io=class{constructor(e,t,r){this.db=e,this.conn=t,this.header=r,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},su=class{constructor(e,t,r){this.bindings=e,this.connectionId=t,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),r=Qt.from(t);return console.assert(r.isSync()),console.assert(r.isFile()),new At(r)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),r=new Io(this.bindings,this.connectionId,t),n=await Qt.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}},ou=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(ou||{}),au=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(au||{}),q=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((r,n)=>{this.promiseResolver=r,this.promiseRejecter=n})}};function ti(e){switch(e.typeId){case f.Binary:return{sqlType:"binary"};case f.Bool:return{sqlType:"bool"};case f.Date:return{sqlType:"date"};case f.DateDay:return{sqlType:"date32[d]"};case f.DateMillisecond:return{sqlType:"date64[ms]"};case f.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case f.Float:return{sqlType:"float"};case f.Float16:return{sqlType:"float16"};case f.Float32:return{sqlType:"float32"};case f.Float64:return{sqlType:"float64"};case f.Int:return{sqlType:"int32"};case f.Int16:return{sqlType:"int16"};case f.Int32:return{sqlType:"int32"};case f.Int64:return{sqlType:"int64"};case f.Uint16:return{sqlType:"uint16"};case f.Uint32:return{sqlType:"uint32"};case f.Uint64:return{sqlType:"uint64"};case f.Uint8:return{sqlType:"uint8"};case f.IntervalDayTime:return{sqlType:"interval[dt]"};case f.IntervalYearMonth:return{sqlType:"interval[m]"};case f.List:return{sqlType:"list",valueType:ti(e.valueType)};case f.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case f.Null:return{sqlType:"null"};case f.Utf8:return{sqlType:"utf8"};case f.Struct:return{sqlType:"struct",fields:e.children.map(t=>ks(t.name,t.type))};case f.Map:{let t=e;return{sqlType:"map",keyType:ti(t.keyType),valueType:ti(t.valueType)}}case f.Time:return{sqlType:"time[s]"};case f.TimeMicrosecond:return{sqlType:"time[us]"};case f.TimeMillisecond:return{sqlType:"time[ms]"};case f.TimeNanosecond:return{sqlType:"time[ns]"};case f.TimeSecond:return{sqlType:"time[s]"};case f.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case f.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case f.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case f.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case f.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error(`unsupported arrow type: ${e.toString()}`)}function ks(e,t){let r=ti(t);return r.name=e,r}var h2=new TextEncoder,cu=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,r)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let r=this._nextMessageId++;return this._pendingRequests.set(r,e),this._worker.postMessage({messageId:r,type:e.type,data:e.data},t),await e.promise}onMessage(e){let t=e.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let n of this._onInstantiationProgress)n(t.data);return}}let r=this._pendingRequests.get(t.requestId);if(!r){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let n=new Error(t.data.message);n.name=t.data.name,n.stack=t.data.stack,r.promiseRejecter(n);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){r.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){r.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){r.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){r.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){r.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){r.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){r.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){r.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){r.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){r.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){r.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){r.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){r.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(t.data);return}break}r.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(e){console.error(e),console.error(`error in duckdb worker: ${e.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let e=new q("RESET",null);return await this.postTask(e)}async ping(){let e=new q("PING",null);await this.postTask(e)}async dropFile(e){let t=new q("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new q("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new q("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,r=n=>{}){this._onInstantiationProgress.push(r);let n=new q("INSTANTIATE",[e,t]);return await this.postTask(n)}async getVersion(){let e=new q("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new q("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new q("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new q("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new q("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new iu(this,e)}async disconnect(e){let t=new q("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let r=new q("RUN_QUERY",[e,t]);return await this.postTask(r)}async startPendingQuery(e,t){let r=new q("START_PENDING_QUERY",[e,t]);return await this.postTask(r)}async pollPendingQuery(e){let t=new q("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new q("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new q("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let r=new q("GET_TABLE_NAMES",[e,t]);return await this.postTask(r)}async createPrepared(e,t){let r=new q("CREATE_PREPARED",[e,t]);return await this.postTask(r)}async closePrepared(e,t){let r=new q("CLOSE_PREPARED",[e,t]);await this.postTask(r)}async runPrepared(e,t,r){let n=new q("RUN_PREPARED",[e,t,r]);return await this.postTask(n)}async sendPrepared(e,t,r){let n=new q("SEND_PREPARED",[e,t,r]);return await this.postTask(n)}async globFiles(e){let t=new q("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let r=h2.encode(t);await this.registerFileBuffer(e,r)}async registerFileURL(e,t,r,n){t===void 0&&(t=e);let i=new q("REGISTER_FILE_URL",[e,t,r,n]);await this.postTask(i)}async registerEmptyFileBuffer(e){let t=new q("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let r=new q("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(r,[t.buffer])}async registerFileHandle(e,t,r,n){let i=new q("REGISTER_FILE_HANDLE",[e,t,r,n]);await this.postTask(i,[])}async collectFileStatistics(e,t){let r=new q("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(r,[])}async exportFileStatistics(e){let t=new q("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new q("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let r=new q("COPY_FILE_TO_PATH",[e,t]);await this.postTask(r)}async insertArrowFromIPCStream(e,t,r){if(t.length==0)return;let n=new q("INSERT_ARROW_FROM_IPC_STREAM",[e,t,r]);await this.postTask(n,[t.buffer])}async insertCSVFromPath(e,t,r){if(r.columns!==void 0){let i=[];for(let s in r.columns){let o=r.columns[s];i.push(ks(s,o))}r.columnsFlat=i,delete r.columns}let n=new q("IMPORT_CSV_FROM_PATH",[e,t,r]);await this.postTask(n)}async insertJSONFromPath(e,t,r){if(r.columns!==void 0){let i=[];for(let s in r.columns){let o=r.columns[s];i.push(ks(s,o))}r.columnsFlat=i,delete r.columns}let n=new q("IMPORT_JSON_FROM_PATH",[e,t,r]);await this.postTask(n)}},f2=class{constructor(){this._bindings=null,this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"OK",data:null},[])}failWith(e,t){let r={name:t.name,message:t.message,stack:t.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"ERROR",data:r},[])}async onMessage(e){switch(e.type){case"PING":this.sendOK(e);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(e,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],t=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"INSTANTIATE_PROGRESS",data:t},[])}),this.sendOK(e)}catch(t){this._bindings=null,this.failWith(e,t)}return}if(!this._bindings)return this.failWith(e,new Error("duckdb is not initialized"));try{switch(e.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(e);break;case"OPEN":this._bindings.open(e.data),this.sendOK(e);break;case"DROP_FILE":this._bindings.dropFile(e.data),this.sendOK(e);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(e);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(e);break;case"CONNECT":{let t=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"CONNECTION_INFO",data:t.useUnsafe((r,n)=>n)},[]);break}case"DISCONNECT":this._bindings.disconnect(e.data),this.sendOK(e);break;case"CREATE_PREPARED":{let t=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"PREPARED_STATEMENT_ID",data:t},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break}case"RUN_PREPARED":{let t=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"RUN_QUERY":{let t=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"SEND_PREPARED":{let t=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER",data:t},[t.buffer]);break}case"START_PENDING_QUERY":{let t=this._bindings.startPendingQuery(e.data[0],e.data[1]),r=[];t&&r.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},r);break}case"POLL_PENDING_QUERY":{let t=this._bindings.pollPendingQuery(e.data),r=[];t&&r.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},r);break}case"CANCEL_PENDING_QUERY":{let t=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SUCCESS",data:t},[]);break}case"FETCH_QUERY_RESULTS":{let t=this._bindings.fetchQueryResults(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_CHUNK",data:t},[t.buffer]);break}case"GET_TABLE_NAMES":{let t=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"TABLE_NAMES",data:t},[]);break}case"GLOB_FILE_INFOS":{let t=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_INFOS",data:t},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case"COPY_FILE_TO_BUFFER":{let t=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_BUFFER",data:t},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(e.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"TOKENIZE":{let t=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SCRIPT_TOKENS",data:t},[]);break}}}catch(t){return this.failWith(e,t)}}},g2=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),b2=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),p2=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),y2=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),So={name:"@duckdb/duckdb-wasm",version:"1.27.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.24.8",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},lu=So.name,uu=So.version,Eo=So.version.split("."),m2=Eo[0],_2=Eo[1],w2=Eo[2],To=()=>typeof navigator>"u",du=()=>To()?"node":navigator.userAgent,v2=()=>du().includes("Firefox"),I2=()=>/^((?!chrome|android).)*safari/i.test(du());function S2(){let e=`https://cdn.jsdelivr.net/npm/${lu}@${uu}/dist/`;return{mvp:{mainModule:`${e}duckdb-mvp.wasm`,mainWorker:`${e}duckdb-browser-mvp.worker.js`},eh:{mainModule:`${e}duckdb-eh.wasm`,mainWorker:`${e}duckdb-browser-eh.worker.js`}}}var os=null,as=null,cs=null,ls=null,us=null;async function hu(){return os==null&&(os=typeof BigInt64Array<"u"),as==null&&(as=await b2()),cs==null&&(cs=await y2()),ls==null&&(ls=await p2()),us==null&&(us=await g2()),{bigInt64Array:os,crossOriginIsolated:To()||globalThis.crossOriginIsolated||!1,wasmExceptions:as,wasmSIMD:ls,wasmThreads:cs,wasmBulkMemory:us}}async function E2(e){let t=await hu();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}var T2=s2(o2());async function A2(e){let t=new Request(e),r=await fetch(t),n=URL.createObjectURL(await r.blob());return new T2.default(n)}function O2(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}O2();var fu=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(fu||{});const R2=Object.freeze(Object.defineProperty({__proto__:null,AsyncDuckDB:cu,AsyncDuckDBConnection:iu,AsyncDuckDBDispatcher:f2,AsyncPreparedStatement:su,AsyncResultStreamIterator:Io,ConsoleLogger:ru,DuckDBAccessMode:Xl,DuckDBDataProtocol:fu,LogEvent:tu,LogLevel:vo,LogOrigin:eu,LogTopic:Zl,PACKAGE_NAME:lu,PACKAGE_VERSION:uu,PACKAGE_VERSION_MAJOR:m2,PACKAGE_VERSION_MINOR:_2,PACKAGE_VERSION_PATCH:w2,StatusCode:nu,VoidLogger:a2,WorkerRequestType:ou,WorkerResponseType:au,WorkerTask:q,createWorker:A2,getJsDelivrBundles:S2,getLogEventLabel:l2,getLogLevelLabel:c2,getLogOriginLabel:d2,getLogTopicLabel:u2,getPlatformFeatures:hu,isFirefox:v2,isNode:To,isSafari:I2,selectBundle:E2},Symbol.toStringTag,{value:"Module"})),N2={db:null,isLoading:!1,sharedConnection:null,tables:{},combinedSchema:{},previousQueries:[]},F2=()=>{console.log("Initializing data store");const e=Us(ii(N2),"DataStore"),{set:t,update:r,subscribe:n}=e,i=c=>{r(l=>(l.isLoading=c,l))};let s=null;s=(async()=>{const{db:l}=ct(e);if(l)return console.log("Database already initialized"),l;i(!0);const u=await hs(()=>import("./duckdb-mvp.c7d5d8fa.js"),[],import.meta.url).then(_=>_.default),d=await hs(()=>import("./duckdb-browser-mvp.worker.3cf3a758.js"),[],import.meta.url).then(_=>_.default),h=new ru(vo.WARNING),g=new d,b=new cu(h,g);await b.instantiate(u);const p=await b.connect();return r(_=>(_.db=b,_.isLoading=!1,_.sharedConnection=p,_)),console.debug("Initialized duckdb"),b})();const o=async(c,l)=>{const u=performance.now();let d,h;try{d=await l}catch(g){h=g}finally{const g=performance.now();r(b=>(b.previousQueries.push({query:c,success:h===void 0,executionTime:g-u}),b))}if(h)throw h;return d},a=async c=>{try{await s}catch(u){console.error("Failed to initialize duckdb:",u);return}const{sharedConnection:l}=ct(e);if(l)return o(c,l.query(c))};return{subscribe:n,set:t,update:r,rawStore:e,setIsLoading:i,executeQuery:a,getConnection:async()=>{try{await s}catch(l){console.error("Failed to initialize duckdb:",l);return}const{sharedConnection:c}=ct(e);if(c)return c},getTables:async()=>{const c="SELECT table_name FROM information_schema.tables;";try{const l=await a(c);return l?l.toArray().map(u=>u.table_name):[]}catch(l){return console.error(l),[]}},getTableSchema:async c=>{const l=`DESCRIBE SELECT * FROM "${c}";`;try{const u=await a(l);if(!u)return{};const d={};return u.toArray().forEach(h=>{switch(h.column_type){case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"FLOAT":case"DOUBLE":d[h.column_name]="number";break;default:d[h.column_name]="string"}}),d}catch(u){return console.error(u),{}}},getDistinctValues:async(c,l)=>{try{const u=await a(`SELECT DISTINCT "${l}" FROM "${c}"`);return u?u.toArray().map(d=>d[l]):[]}catch{return[]}}}},D2=()=>{const e=F2();return{...e,...d1(e,e.rawStore),...h1(e)}},ue=D2(),xs=e=>btoa(JSON.stringify(e)),gu=e=>JSON.parse(atob(e)),bu=(e,t,r)=>{switch(t){case"string":return r;case"number":return Number(r);case"boolean":return r==="true";case"object":return gu(r)}},pu=(e,t,r)=>{switch(t){case"string":return r;case"number":return r.toString();case"boolean":return r.toString();case"object":return Array.isArray(r)&&r.length===0?null:xs(r)}return null},B2=(e,t,r,n)=>{const i=new URLSearchParams(location.search);console.log("withDecoder",i),e.set(n(i.get(t)));const s=c=>{const l=new URLSearchParams(location.search),u=r(c);return u==null?(l.delete(t),l):(l.set(t,u),l)},o=e.update;e.update=c=>{o(l=>{const u=c(l),d=s(u);return d.toString()===location.search.slice(1)||history.replaceState(null,"",`${location.pathname}?${d.toString()}`),u})};const a=e.set;return e.set=c=>{a(c);const l=ct(e),u=s(l);history.replaceState(null,"",`${location.pathname}?${u.toString()}`)},e},L2=(e,t,r=pu,n=bu)=>{const i=new URLSearchParams(location.search),s=Object.entries(t);e.update(l=>(s.forEach(([u,d])=>{const h=i.get(u.toString());h!==null&&(l[u]=n(u.toString(),d,h),console.debug("[state-decode]",u,h,l[u]))}),console.log("Restored state",l),l));const o=l=>{const u=new URLSearchParams(location.search);return s.forEach(([d,h])=>{const g=l[d];if(g===void 0){u.delete(d.toString());return}const b=r(d.toString(),h,g);if(b==null){u.delete(d.toString());return}u.set(d.toString(),b)}),u},a=e.update;e.update=l=>{a(u=>{const d=l(u),h=o(d);return h.toString()===location.search.slice(1)||history.replaceState(null,"",`${location.pathname}?${h.toString()}`),d})};const c=e.set;return e.set=l=>{c(l);const u=ct(e),d=o(u);history.replaceState(null,"",`${location.pathname}?${d.toString()}`)},e},$0=["#3498db","#e74c3c","#2ECC71","#F39C12","#9B59B6","#34495E","#E67E22","#1ABC9C","#7F8C8D","#F1C40F","#E74C3C","#1ABC9C","#9B59B6","#F39C12","#E67E22"],$n={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],7:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],8:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],9:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],10:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],11:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],7:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],8:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],9:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],10:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],11:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],7:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],8:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],9:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],10:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],11:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],7:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],8:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],9:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],10:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],11:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],7:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],8:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],9:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],10:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],11:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)"],7:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)"],8:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)"],7:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"],8:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)","rgb(102,102,102)"],type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)"],7:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)"],8:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)"],9:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)","rgb(153,153,153)"],type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)"],6:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)"],7:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)"],8:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)"],9:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)"],10:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)"],11:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)"],12:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)"],7:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)"],8:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)"],7:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)"],8:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)"],9:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)"],10:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)"],11:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)"],12:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)","rgb(177,89,40)"],type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)"],7:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)"],8:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)","rgb(204,204,204)"],type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)"],6:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)"],7:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)"],8:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],9:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)","rgb(242,242,242)"],type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],7:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],8:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],9:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(179,0,0)","rgb(127,0,0)"],type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],7:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],8:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],9:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(4,90,141)","rgb(2,56,88)"],type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],7:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],8:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],9:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(129,15,124)","rgb(77,0,75)"],type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],7:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],8:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],9:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(166,54,3)","rgb(127,39,4)"],type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],7:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],8:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],9:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],7:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],8:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],9:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(153,52,4)","rgb(102,37,6)"],type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],7:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],8:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],9:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,104,55)","rgb(0,69,41)"],type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],7:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],8:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],9:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(165,15,21)","rgb(103,0,13)"],type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],7:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],8:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],9:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)","rgb(73,0,106)"],type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],7:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],8:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],9:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],7:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],8:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],9:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(37,52,148)","rgb(8,29,88)"],type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],7:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],8:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],9:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(84,39,143)","rgb(63,0,125)"],type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],7:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],8:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],9:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,104,172)","rgb(8,64,129)"],type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],7:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],8:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],9:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)","rgb(0,0,0)"],type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],7:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],8:["rgb(255,255,204)","rgb(255,237,160)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],7:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],8:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],9:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(152,0,67)","rgb(103,0,31)"],type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],7:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],9:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"],type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],7:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],8:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],9:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,108,89)","rgb(1,70,54)"],type:"seq"}};class yu extends Wu{constructor(r={}){super({});qe(this,"_dataStore");qe(this,"_optionsStore");qe(this,"dataStore");qe(this,"optionsStore");qe(this,"setFilterOption",(r,n)=>{this._optionsStore.update(i=>(i[r]=n,i.isValid=this.isValid(i),i)),this.applyOptionsIfValid()});this._dataStore=ii(void 0),this.dataStore=ko(this._dataStore);const n={...r,isRendered:!1,isValid:this.isValid(r)};this._optionsStore=Us(B2(ii(n),"filterStore",i=>xs(i),i=>{if(!i||i==="undefined")return n;const s=gu(i);return console.log("URL decoded state",s),{isRendered:!1,isValid:this.isValid(s),...s}}),"PlaneGraphOptions",{color:"orange"}),this.optionsStore=ko(this._optionsStore),this.reloadFilterOptions(),this.applyOptionsIfValid()}toString(){const r=ct(this._optionsStore);return console.log("Encoding",r),xs({type:this.getType(),state:r})}isValid(r){if(!r)return!1;const n=Object.entries(this.filterOptions).every(([i,s])=>s.type==="row"?s.keys.every((o,a)=>s.items[a].required?r[o]!==void 0:!0):s.required?r[i]!==void 0:!0);return console.log({isValid:n}),n}reloadFilterOptions(){const r=ct(ue),n=Object.entries(r.combinedSchema).filter(([,s])=>s==="string").map(([s])=>s),i=Object.entries(r.combinedSchema).filter(([,s])=>s==="number").map(([s])=>s);this.filterOptions={groupBy:{type:"string",options:n,label:"Group By"},aggregation:{type:"string",label:"Aggregation",required:!0,options:Object.values(hi),default:hi.MIN},xColumnName:{type:"row",keys:["xColumnName","scaleX"],grow:[.7,.3],items:[{type:"string",options:i,label:"X Axis",required:!0},{type:"string",options:Object.values(Gt),label:"X Scale",required:!0}]},yColumnName:{type:"row",keys:["yColumnName","scaleY"],grow:[.7,.3],items:[{type:"string",options:i,label:"Y Axis",required:!0},{type:"string",options:Object.values(Gt),label:"Y Scale",required:!0}]},zColumnName:{type:"row",keys:["zColumnName","scaleZ"],grow:[.7,.3],items:[{type:"string",options:i,label:"Z Axis",required:!0},{type:"string",options:[Gt.LINEAR,Gt.LOG],label:"Z Scale",required:!0}]},tileCount:{type:"number",options:[2,128],label:"Tile Count",required:!0}}}getType(){return $i.PLANE}getCurrentOptions(){return ct(this._optionsStore)}async getGlobalRange(r,n){const i=ct(ue),s=Object.keys(i.tables);try{return(await Promise.all(s.map(a=>ue.getMinMax(a,r,n)))).reduce((a,[c,l])=>[Math.min(a[0],c),Math.max(a[1],l)],[0,-1/0])}catch{return null}}async applyOptionsIfValid(){const r=ct(this._optionsStore);if(console.log("applying store",r),r.isValid!==!0)return;const n=ct(ue);try{const i=Object.keys(n.tables);console.debug("loading data from tables",i);const s=await this.getGlobalRange(r.xColumnName,r.scaleX),o=await this.getGlobalRange(r.yColumnName,r.scaleY),a=await this.getGlobalRange(r.zColumnName,r.scaleZ);if(!s||!o||!a){Ke.error({message:"Data range invalid",description:JSON.stringify({column:r.xColumnName,xAxisRange:s,yAxisRange:o,zAxisRange:a})});return}console.debug("axis ranges",{xAxisRange:s,yAxisRange:o,zAxisRange:a});const c=await Promise.all(i.map(d=>ue.getTiledData(d,r,s,o,a))),l=await Promise.all(i.map(async d=>{const h=await ue.getDistinctValues(d,r.groupBy);if(h.length>30){const b=`Too many options returned by group by number=${h.length} (limit 10)`;throw Ke.error({message:b}),new Error(b)}return(await Promise.all(h.map(b=>ue.getTiledData(d,r,s,o,a,{columnName:r.groupBy,value:b})))).map((b,p)=>({points:b.data,min:b.min,max:b.max,isChild:!0,name:h[p],color:$n.Set2[8][p%$n.Set2[8].length],meta:{rows:b.queryResult}}))})),u=c.map((d,h)=>({points:d.data,layers:l[h],min:d.min,max:d.max,name:i[h],color:$n.Paired[12][h%$n.Paired[12].length],meta:{rows:d.queryResult}}));this._dataStore.set({layers:u,labels:{x:r.xColumnName,y:r.yColumnName,z:r.zColumnName},ranges:{x:s,y:o,z:a},tileRange:{x:r.xTileCount??r.tileCount,z:r.zTileCount??r.tileCount}})}catch(i){console.error("Failed to load tiled data:",i);return}}}const mu={isLoading:!0,preloadedDatasets:[],selectedTables:[]},k2=(e,t,r)=>{if(e==="graphOptions")return console.log("Encoding graph options",r),r?r.getType():void 0;if(e==="selectedTables"){console.error("ENCODING BROKEN");return}return pu(e,t,r)};let ei=null;const wa=(e,t,r)=>{switch(e){case"graphOptions":{switch(r){case $i.PLANE:{ei=new yu;return}}break}case"selectedTables":{console.error("ENCODING BROKEN");return}}return bu(e,t,r)},va=ii(JSON.parse(JSON.stringify(mu))),x2=()=>{console.log("### INIT STORE ###",ct(va));const e=Us(L2(va,{selectedTables:"object",graphOptions:"object"},k2,wa),"FilterStore",{...xu,color:"green"}),{set:t,update:r,subscribe:n}=e,i=a=>{r(c=>(c.isLoading=a,c))},s=async a=>{i(!0);try{const c=await ue.loadCsvsFromRefs(a);e.update(l=>(l.selectedTables=[...l.selectedTables,...a],l))}catch(c){console.error("Failed to load tables:",c);return}finally{i(!1)}},o=()=>{const a=ct(e);a.graphOptions&&(a.graphOptions.reloadFilterOptions(),a.graphOptions.applyOptionsIfValid())};return{set:t,update:r,subscribe:n,selectTables:s,removeTable:async a=>{try{await ue.removeTable(a),await o()}catch{Ke.error({message:`Failed to remove table "${a}"`})}},reset:()=>{ue.resetDatabase();const a=JSON.parse(JSON.stringify(mu));a.preloadedDatasets=ct(e).preloadedDatasets,a.isLoading=!1,t(a)},initWithPreloadedDatasets:async a=>{console.log("Loading datasets",a),r(l=>(l.preloadedDatasets=a,l));const{selectedTables:c}=ct(e);if(c.length!==0){const l=c.filter(h=>h.source===Wt.BUILD_IN),u=c.filter(h=>h.source===Wt.FILE),d=c.filter(h=>h.source===Wt.URL);try{l.length!==0&&await s(l),wa.length!==0&&await s(d),u.length!==0&&alert("TODO: request user to reupload tables"),ei&&ei!==null&&(r(h=>(h.graphOptions=ei??void 0,h)),await o())}catch(h){console.error("Failed to load selected tables:",h)}}i(!1)},selectDataset:a=>{r(c=>(c.selectedDataset=a,c))},selectBuildInTables:async(a,c)=>{if(a!==ct(e).selectedDataset)return;const l=c.flatMap(u=>u.files.map(d=>({tableName:u.name,displayName:d.name,source:Wt.BUILD_IN,url:d.dataURL,dataset:a})));try{await s(l),await o();return}catch{Ke.error({message:"Failed to load external tables",description:c.map(u=>u.name).join(",")})}},selectTableFromURL:async a=>{const c=[{tableName:a.pathname.replaceAll("/","-"),source:Wt.URL,url:a.href}];try{await s(c),await o();return}catch(l){Ke.error({message:"Failed to load tables from file",description:`${c.map(u=>u.tableName).join(",")}, err=${l??"Unknown Error"}`})}},selectTablesFromFiles:async a=>{const c=[];for(const l of a)c.push({tableName:l.name,source:Wt.FILE,file:l});try{await s(c),await o();return}catch(l){Ke.error({message:"Failed to load tables from file",description:`${c.map(u=>u.tableName).join(",")}, err=${l??"Unknown Error"}`})}},selectGraphType:async a=>{switch(a){case $i.PLANE:r(c=>(c.graphOptions=new yu,c))}}}},ds=x2();function C2(e){let t,r,n,i,s,o;return{c(){t=L("span"),r=pt("Drag and drop files here "),n=L("br"),i=pt(" or "),s=L("br"),o=pt(" click to select")},l(a){t=k(a,"SPAN",{});var c=A(t);r=yt(c,"Drag and drop files here "),n=k(c,"BR",{}),i=yt(c," or "),s=k(c,"BR",{}),o=yt(c," click to select"),c.forEach(y)},m(a,c){B(a,t,c),S(t,r),S(t,n),S(t,i),S(t,s),S(t,o)},d(a){a&&y(t)}}}function M2(e){let t,r;return{c(){t=L("span"),r=pt("Drop the files here")},l(n){t=k(n,"SPAN",{});var i=A(t);r=yt(i,"Drop the files here"),i.forEach(y)},m(n,i){B(n,t,i),S(t,r)},d(n){n&&y(t)}}}function U2(e){let t,r,n,i;function s(c,l){return c[0]?M2:C2}let o=s(e),a=o(e);return{c(){t=L("div"),r=L("span"),a.c(),this.h()},l(c){t=k(c,"DIV",{class:!0});var l=A(t);r=k(l,"SPAN",{class:!0});var u=A(r);a.l(u),u.forEach(y),l.forEach(y),this.h()},h(){m(r,"class","text-xl font-semibold text-background-400 dark:text-background-300"),m(t,"class","border-4 min-h-[320px] rounded-xl p-6 border-background-300/70 dark:border-background-700/60 text-center border-dotted svelte-1prujco"),lt(t,"dragging",e[0])},m(c,l){B(c,t,l),S(t,r),a.m(r,null),n||(i=[lr(t,"dragenter",e[1]),lr(t,"dragover",P2),lr(t,"dragleave",e[2]),lr(t,"drop",e[3])],n=!0)},p(c,[l]){o!==(o=s(c))&&(a.d(1),a=o(c),a&&(a.c(),a.m(r,null))),l&1&&lt(t,"dragging",c[0])},i:bt,o:bt,d(c){c&&y(t),a.d(),n=!1,Cs(i)}}}function P2(e){e.preventDefault()}function V2(e,t,r){let{onFileDropped:n=void 0}=t,i=!1;function s(c){c.preventDefault(),r(0,i=!0)}function o(c){c.preventDefault(),r(0,i=!1)}function a(c){var u;c.preventDefault(),r(0,i=!1);const l=(u=c.dataTransfer)==null?void 0:u.files;l&&l.length>0&&n&&n(l)}return e.$$set=c=>{"onFileDropped"in c&&r(4,n=c.onFileDropped)},[i,s,o,a,n]}class z2 extends Se{constructor(t){super(),Ee(this,t,V2,U2,Te,{onFileDropped:4})}}function $2(e){let t,r;const n=e[1].default,i=wn(n,e,e[0],null);return{c(){t=L("label"),i&&i.c(),this.h()},l(s){t=k(s,"LABEL",{class:!0});var o=A(t);i&&i.l(o),o.forEach(y),this.h()},h(){m(t,"class","font-bold text-sm px-3 pb text-secondary-500 dark:text-secondary-400")},m(s,o){B(s,t,o),i&&i.m(t,null),r=!0},p(s,[o]){i&&i.p&&(!r||o&1)&&vn(i,n,s,s[0],r?Sn(n,s[0],o,null):In(s[0]),null)},i(s){r||(V(i,s),r=!0)},o(s){j(i,s),r=!1},d(s){s&&y(t),i&&i.d(s)}}}function j2(e,t,r){let{$$slots:n={},$$scope:i}=t;return e.$$set=s=>{"$$scope"in s&&r(0,i=s.$$scope)},[i,n]}class q2 extends Se{constructor(t){super(),Ee(this,t,j2,$2,Te,{})}}const _u=e=>{const t=document.querySelector("main");return t==null||t.appendChild(e).focus(),{destroy(){t!=null&&t.contains(e)&&(t==null||t.removeChild(e))}}},wu=(e,t)=>{let r=e;for(;r;){if(r.classList&&r.classList.contains(t))return r;r=r.parentElement}return null},G2="portal-root";var vu=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEADING=2]="LEADING",e[e.TRAILING=3]="TRAILING",e))(vu||{});const Y2=(e,t,r,n=3)=>{const i=e.getBoundingClientRect(),s=t.getBoundingClientRect();let o=s.left,a=s.top;switch(r){case 0:a=s.top-i.height-20-n;break;case 1:a=s.top+s.height+n;break;case 2:o=s.left-i.width-n;break;case 3:o=s.left+s.width+n;break;default:console.error("Invalid placement value");return}return o+i.width>window.innerWidth&&(o=window.innerWidth-(i.width+n)),a+i.height>window.innerHeight&&(a=window.innerHeight-(i.height+n)),o<0&&(o=n),a<0&&(a=n),[o,a]},W2=(e,t,r,n=3)=>{const i=e.getBoundingClientRect();let s=t,o=r;return s+i.width>window.innerWidth&&(s=window.innerWidth-(i.width+n)),o+i.height>window.innerHeight&&(o=window.innerHeight-(i.height+n)),s<0&&(s=n),o<0&&(o=n),[s,o]},Iu={rootClass:G2,placement:1},H2=(e,t={})=>{const{rootClass:r,placement:n}={...Iu,...t},i=e.parentElement;if(!i)return _u(e);const s=Y2(e,i,n);if(!s)return;const[o,a]=s;e.style.left=`${o}px`,e.style.top=`${a}px`;const c=wu(e,r);let l;return c?l=c:l=document.querySelector("main"),l==null||l.appendChild(e).focus(),{destroy(){l!=null&&l.contains(e)&&(l==null||l.removeChild(e))}}},j0=(e,t)=>{const{rootClass:r,x:n,y:i}={...Iu,...t};if(!e.parentElement)return _u(e);const o=W2(e,n,i);if(!o)return;const[a,c]=o;e.style.left=`${a}px`,e.style.top=`${c}px`;const l=wu(e,r);let u;return l?u=l:u=document.querySelector("main"),u==null||u.appendChild(e).focus,{destroy(){u!=null&&u.contains(e)&&(u==null||u.removeChild(e))}}},K2=(e,t)=>{var o;let r=((o=t.whitelist)==null?void 0:o.filter(a=>a!==void 0))??[],n=t.onClickOutside;const i=a=>{const c=a.target;!e.contains(c)&&!r.some(l=>l.isSameNode(c))&&n()},s={passive:!0,capture:!0};return document.addEventListener("click",i,s),{destroy(){document.removeEventListener("click",i,s)},update(a){var c;r=((c=a.whitelist)==null?void 0:c.filter(l=>l!==void 0))??[],n=a.onClickOutside}}};const Q2=e=>({}),Ia=e=>({}),J2=e=>({}),Sa=e=>({}),X2=e=>({}),Ea=e=>({});function Z2(e){let t,r,n;const i=[e[8],{class:"flex items-center justify-between gap-2 "+e[3]}];let s={$$slots:{trailing:[i0],default:[e0]},$$scope:{ctx:e}};for(let o=0;o<i.length;o+=1)s=Pr(s,i[o]);return r=new si({props:s}),r.$on("click",e[6]),{c(){t=L("div"),_t(r.$$.fragment),this.h()},l(o){t=k(o,"DIV",{class:!0});var a=A(t);wt(r.$$.fragment,a),a.forEach(y),this.h()},h(){m(t,"class","mb-2 svelte-njxy10")},m(o,a){B(o,t,a),vt(r,t,null),n=!0},p(o,a){const c=a&264?ka(i,[a&256&&xa(o[8]),a&8&&{class:"flex items-center justify-between gap-2 "+o[3]}]):{};a&1025&&(c.$$scope={dirty:a,ctx:o}),r.$set(c)},i(o){n||(V(r.$$.fragment,o),n=!0)},o(o){j(r.$$.fragment,o),n=!1},d(o){o&&y(t),It(r)}}}function t0(e){let t;const r=e[9].trigger,n=wn(r,e,e[10],Ea);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&1024)&&vn(n,r,i,i[10],t?Sn(r,i[10],s,X2):In(i[10]),Ea)},i(i){t||(V(n,i),t=!0)},o(i){j(n,i),t=!1},d(i){n&&n.d(i)}}}function e0(e){let t;const r=e[9].button,n=wn(r,e,e[10],Sa);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&1024)&&vn(n,r,i,i[10],t?Sn(r,i[10],s,J2):In(i[10]),Sa)},i(i){t||(V(n,i),t=!0)},o(i){j(n,i),t=!1},d(i){n&&n.d(i)}}}function r0(e){let t,r;return t=new $u({props:{size:"14"}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,i){vt(t,n,i),r=!0},i(n){r||(V(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){It(t,n)}}}function n0(e){let t,r;return t=new Gu({props:{size:"14"}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,i){vt(t,n,i),r=!0},i(n){r||(V(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){It(t,n)}}}function i0(e){let t,r,n,i;const s=[n0,r0],o=[];function a(c,l){return c[0]?0:1}return t=a(e),r=o[t]=s[t](e),{c(){r.c(),n=ni()},l(c){r.l(c),n=ni()},m(c,l){o[t].m(c,l),B(c,n,l),i=!0},p(c,l){let u=t;t=a(c),t!==u&&(Qe(),j(o[u],1,1,()=>{o[u]=null}),Je(),r=o[t],r||(r=o[t]=s[t](c),r.c()),V(r,1),r.m(n.parentNode,n))},i(c){i||(V(r),i=!0)},o(c){j(r),i=!1},d(c){o[t].d(c),c&&y(n)}}}function Ta(e){let t,r,n,i,s,o,a,c,l;const u=e[9].content,d=wn(u,e,e[10],Ia);return{c(){t=L("div"),r=L("div"),n=L("div"),i=L("div"),d&&d.c(),this.h()},l(h){t=k(h,"DIV",{class:!0});var g=A(t);r=k(g,"DIV",{class:!0});var b=A(r);n=k(b,"DIV",{class:!0});var p=A(n);i=k(p,"DIV",{role:!0,class:!0});var _=A(i);d&&d.l(_),_.forEach(y),p.forEach(y),b.forEach(y),g.forEach(y),this.h()},h(){m(i,"role","none"),m(i,"class","svelte-njxy10"),m(n,"class","dropdown-content w-full overflow-auto max-h-[400px] svelte-njxy10"),m(r,"class","overflow-hidden rounded-xl shadow-2xl shadow-background-700 dark:shadow-background-950 bg-background-50/80 dark:bg-background-800/95 backdrop-blur-sm svelte-njxy10"),m(t,"class","z-1000 absolute left-0 mt-2 ring-background-200/5 dark:ring-background-950/5 focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 svelte-njxy10")},m(h,g){B(h,t,g),S(t,r),S(r,n),S(n,i),d&&d.m(i,null),a=!0,c||(l=[Do(K2.call(null,t,e[5])),Do(s=H2.call(null,t,{placement:e[1]}))],c=!0)},p(h,g){d&&d.p&&(!a||g&1024)&&vn(d,u,h,h[10],a?Sn(u,h[10],g,Q2):In(h[10]),Ia),s&&Au(s.update)&&g&2&&s.update.call(null,{placement:h[1]})},i(h){a||(V(d,h),Ou(()=>{a&&(o||(o=Bo(t,xo,{duration:100},!0)),o.run(1))}),a=!0)},o(h){j(d,h),o||(o=Bo(t,xo,{duration:100},!1)),o.run(0),a=!1},d(h){h&&y(t),d&&d.d(h),h&&o&&o.end(),c=!1,Cs(l)}}}function s0(e){let t,r,n,i,s,o;const a=[t0,Z2],c=[];function l(d,h){return d[7].trigger?0:1}r=l(e),n=c[r]=a[r](e);let u=e[0]&&Ta(e);return{c(){t=L("div"),n.c(),i=ut(),u&&u.c(),this.h()},l(d){t=k(d,"DIV",{class:!0});var h=A(t);n.l(h),i=dt(h),u&&u.l(h),h.forEach(y),this.h()},h(){m(t,"class",s="inline-block ring-offset-2 rounded-md ring-offset-background-50 dark:ring-offset-background-800 "+e[4]+" svelte-njxy10"),lt(t,"ring-4",e[0]),lt(t,"pointer-events-none",e[2]),lt(t,"opacity-50",e[2])},m(d,h){B(d,t,h),c[r].m(t,null),S(t,i),u&&u.m(t,null),o=!0},p(d,[h]){let g=r;r=l(d),r===g?c[r].p(d,h):(Qe(),j(c[g],1,1,()=>{c[g]=null}),Je(),n=c[r],n?n.p(d,h):(n=c[r]=a[r](d),n.c()),V(n,1),n.m(t,i)),d[0]?u?(u.p(d,h),h&1&&V(u,1)):(u=Ta(d),u.c(),V(u,1),u.m(t,null)):u&&(Qe(),j(u,1,1,()=>{u=null}),Je()),(!o||h&16&&s!==(s="inline-block ring-offset-2 rounded-md ring-offset-background-50 dark:ring-offset-background-800 "+d[4]+" svelte-njxy10"))&&m(t,"class",s),(!o||h&17)&&lt(t,"ring-4",d[0]),(!o||h&20)&&lt(t,"pointer-events-none",d[2]),(!o||h&20)&&lt(t,"opacity-50",d[2])},i(d){o||(V(n),V(u),o=!0)},o(d){j(n),j(u),o=!1},d(d){d&&y(t),c[r].d(),u&&u.d()}}}const Su="base-dropdown-ctx",q0=()=>Nu(Su),o0=e=>Ru(Su,e);function a0(e,t,r){const n=["placement","isOpen","disabled","buttonClass","class"];let i=ri(t,n),{$$slots:s={},$$scope:o}=t;const a=Ba(s);let{placement:c=vu.BOTTOM}=t,{isOpen:l=!1}=t,{disabled:u=!1}=t,{buttonClass:d=void 0}=t,{class:h=void 0}=t;const g={onClickOutside:p},b=_=>{_.preventDefault(),r(0,l=!l)};function p(){r(0,l=!1)}return o0({open:()=>r(0,l=!0),close:()=>r(0,l=!1)}),e.$$set=_=>{t=Pr(Pr({},t),La(_)),r(8,i=ri(t,n)),"placement"in _&&r(1,c=_.placement),"isOpen"in _&&r(0,l=_.isOpen),"disabled"in _&&r(2,u=_.disabled),"buttonClass"in _&&r(3,d=_.buttonClass),"class"in _&&r(4,h=_.class),"$$scope"in _&&r(10,o=_.$$scope)},[l,c,u,d,h,g,b,a,i,s,o]}class c0 extends Se{constructor(t){super(),Ee(this,t,a0,s0,Te,{placement:1,isOpen:0,disabled:2,buttonClass:3,class:4})}}function Aa(e,t,r){const n=e.slice();n[26]=t[r],n[29]=r;const i=n[0].has(n[26].value);return n[27]=i,n}function Oa(e){let t,r;return t=new q2({props:{$$slots:{default:[l0]},$$scope:{ctx:e}}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,i){vt(t,n,i),r=!0},p(n,i){const s={};i&2097288&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(V(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){It(t,n)}}}function Ra(e){let t,r;return{c(){t=L("sup"),r=pt("*"),this.h()},l(n){t=k(n,"SUP",{class:!0});var i=A(t);r=yt(i,"*"),i.forEach(y),this.h()},h(){m(t,"class","text-red-700")},m(n,i){B(n,t,i),S(t,r)},d(n){n&&y(t)}}}function l0(e){let t,r,n=e[3]&&Ra();return{c(){t=pt(e[7]),n&&n.c(),r=ni()},l(i){t=yt(i,e[7]),n&&n.l(i),r=ni()},m(i,s){B(i,t,s),n&&n.m(i,s),B(i,r,s)},p(i,s){s&128&&Ms(t,i[7]),i[3]?n||(n=Ra(),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(i){i&&y(t),n&&n.d(i),i&&y(r)}}}function u0(e){let t,r;return{c(){t=L("span"),r=pt(e[9]),this.h()},l(n){t=k(n,"SPAN",{class:!0});var i=A(t);r=yt(i,e[9]),i.forEach(y),this.h()},h(){m(t,"class","text-sm"),lt(t,"opacity-30",e[0].size===0)},m(n,i){B(n,t,i),S(t,r)},p(n,i){i&512&&Ms(r,n[9]),i&1&&lt(t,"opacity-30",n[0].size===0)},i:bt,o:bt,d(n){n&&y(t)}}}function d0(e){let t;const r=e[18].default,n=wn(r,e,e[21],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&2097152)&&vn(n,r,i,i[21],t?Sn(r,i[21],s,null):In(i[21]),null)},i(i){t||(V(n,i),t=!0)},o(i){j(n,i),t=!1},d(i){n&&n.d(i)}}}function h0(e){let t,r,n,i;const s=[d0,u0],o=[];function a(c,l){return c[14].default?0:1}return r=a(e),n=o[r]=s[r](e),{c(){t=L("span"),n.c(),this.h()},l(c){t=k(c,"SPAN",{slot:!0});var l=A(t);n.l(l),l.forEach(y),this.h()},h(){m(t,"slot","button")},m(c,l){B(c,t,l),o[r].m(t,null),i=!0},p(c,l){let u=r;r=a(c),r===u?o[r].p(c,l):(Qe(),j(o[u],1,1,()=>{o[u]=null}),Je(),n=o[r],n?n.p(c,l):(n=o[r]=s[r](c),n.c()),V(n,1),n.m(t,null))},i(c){i||(V(n),i=!0)},o(c){j(n),i=!1},d(c){c&&y(t),o[r].d()}}}function f0(e){let t,r,n,i;return r=new Pu({}),{c(){t=L("i"),_t(r.$$.fragment),this.h()},l(s){t=k(s,"I",{});var o=A(t);wt(r.$$.fragment,o),o.forEach(y),this.h()},h(){t.hidden=n=!e[27]},m(s,o){B(s,t,o),vt(r,t,null),i=!0},p(s,o){(!i||o&3&&n!==(n=!s[27]))&&(t.hidden=n)},i(s){i||(V(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&y(t),It(r)}}}function g0(e){let t,r,n;return{c(){t=L("div"),r=L("div"),this.h()},l(i){t=k(i,"DIV",{class:!0});var s=A(t);r=k(s,"DIV",{class:!0}),A(r).forEach(y),s.forEach(y),this.h()},h(){r.hidden=n=!e[27],m(r,"class","rounded-full w-3 h-3 bg-primary-500"),m(t,"class","rounded-full op w-6 h-6 border-2 flex items-center justify-center"),lt(t,"border-foreground-500",!e[27]),lt(t,"border-primary-500",e[27])},m(i,s){B(i,t,s),S(t,r)},p(i,s){s&3&&n!==(n=!i[27])&&(r.hidden=n),s&3&&lt(t,"border-foreground-500",!i[27]),s&3&&lt(t,"border-primary-500",i[27])},i:bt,o:bt,d(i){i&&y(t)}}}function Na(e){let t,r,n,i,s,o,a,c=e[26].label+"",l,u,d,h,g;const b=[g0,f0],p=[];function _(I,$){return I[4]?0:1}i=_(e),s=p[i]=b[i](e);function T(){return e[19](e[26])}return{c(){t=L("li"),r=L("button"),n=L("div"),s.c(),o=ut(),a=L("span"),l=pt(c),u=ut(),this.h()},l(I){t=k(I,"LI",{tabindex:!0,class:!0});var $=A(t);r=k($,"BUTTON",{class:!0});var K=A(r);n=k(K,"DIV",{class:!0});var at=A(n);s.l(at),at.forEach(y),o=dt(K),a=k(K,"SPAN",{});var St=A(a);l=yt(St,c),St.forEach(y),K.forEach(y),u=dt($),$.forEach(y),this.h()},h(){m(n,"class","w-6 pt pb"),lt(a,"font-bold",e[27]),lt(a,"opacity-60",!e[27]),m(r,"class","p-2 hover:bg-primary-100 dark:hover:bg-secondary-700 w-full text-left flex gap-2 focus:bg-primary-200 focus:dark:bg-secondary-700"),m(t,"tabindex",e[29]),m(t,"class","border-spacing-1 border-b dark:border-background-900 last:border-b-0")},m(I,$){B(I,t,$),S(t,r),S(r,n),p[i].m(n,null),S(r,o),S(r,a),S(a,l),S(t,u),d=!0,h||(g=lr(r,"click",T),h=!0)},p(I,$){e=I;let K=i;i=_(e),i===K?p[i].p(e,$):(Qe(),j(p[K],1,1,()=>{p[K]=null}),Je(),s=p[i],s?s.p(e,$):(s=p[i]=b[i](e),s.c()),V(s,1),s.m(n,null)),(!d||$&2)&&c!==(c=e[26].label+"")&&Ms(l,c),(!d||$&3)&&lt(a,"font-bold",e[27]),(!d||$&3)&&lt(a,"opacity-60",!e[27])},i(I){d||(V(s),d=!0)},o(I){j(s),d=!1},d(I){I&&y(t),p[i].d(),h=!1,g()}}}function Fa(e){let t,r,n,i,s,o;return n=new si({props:{size:Co.SM,color:Cu.PRIMARY,$$slots:{default:[b0]},$$scope:{ctx:e}}}),n.$on("click",e[12]),s=new si({props:{size:Co.SM,$$slots:{default:[p0]},$$scope:{ctx:e}}}),s.$on("click",e[11]),{c(){t=L("div"),r=L("div"),_t(n.$$.fragment),i=ut(),_t(s.$$.fragment),this.h()},l(a){t=k(a,"DIV",{class:!0});var c=A(t);r=k(c,"DIV",{class:!0});var l=A(r);wt(n.$$.fragment,l),i=dt(l),wt(s.$$.fragment,l),l.forEach(y),c.forEach(y),this.h()},h(){m(r,"class","p-2 flex justify-end gap-2"),m(t,"class","sticky bottom-0 left-0 right-0 border-t dark:border-t-background-700 bg-background-50 dark:bg-background-800 backdrop-blur-sm")},m(a,c){B(a,t,c),S(t,r),vt(n,r,null),S(r,i),vt(s,r,null),o=!0},p(a,c){const l={};c&2097152&&(l.$$scope={dirty:c,ctx:a}),n.$set(l);const u={};c&2097152&&(u.$$scope={dirty:c,ctx:a}),s.$set(u)},i(a){o||(V(n.$$.fragment,a),V(s.$$.fragment,a),o=!0)},o(a){j(n.$$.fragment,a),j(s.$$.fragment,a),o=!1},d(a){a&&y(t),It(n),It(s)}}}function b0(e){let t;return{c(){t=pt("Select all")},l(r){t=yt(r,"Select all")},m(r,n){B(r,t,n)},d(r){r&&y(t)}}}function p0(e){let t;return{c(){t=pt("Clear")},l(r){t=yt(r,"Clear")},m(r,n){B(r,t,n)},d(r){r&&y(t)}}}function y0(e){let t,r,n,i,s=e[1],o=[];for(let l=0;l<s.length;l+=1)o[l]=Na(Aa(e,s,l));const a=l=>j(o[l],1,1,()=>{o[l]=null});let c=!e[4]&&Fa(e);return{c(){t=L("div"),r=L("ul");for(let l=0;l<o.length;l+=1)o[l].c();n=ut(),c&&c.c(),this.h()},l(l){t=k(l,"DIV",{slot:!0});var u=A(t);r=k(u,"UL",{});var d=A(r);for(let h=0;h<o.length;h+=1)o[h].l(d);d.forEach(y),n=dt(u),c&&c.l(u),u.forEach(y),this.h()},h(){m(t,"slot","content")},m(l,u){B(l,t,u),S(t,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);S(t,n),c&&c.m(t,null),i=!0},p(l,u){if(u&1043){s=l[1];let d;for(d=0;d<s.length;d+=1){const h=Aa(l,s,d);o[d]?(o[d].p(h,u),V(o[d],1)):(o[d]=Na(h),o[d].c(),V(o[d],1),o[d].m(r,null))}for(Qe(),d=s.length;d<o.length;d+=1)a(d);Je()}l[4]?c&&(Qe(),j(c,1,1,()=>{c=null}),Je()):c?(c.p(l,u),u&16&&V(c,1)):(c=Fa(l),c.c(),V(c,1),c.m(t,null))},i(l){if(!i){for(let u=0;u<s.length;u+=1)V(o[u]);V(c),i=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)j(o[u]);j(c),i=!1},d(l){l&&y(t),Lu(o,l),c&&c.d()}}}function m0(e){let t,r,n,i,s,o=e[7]!==void 0&&Oa(e);const a=[{buttonClass:e[6]?"w-full":void 0},{disabled:!(e[1]&&e[1].length>0||e[8])||e[5]},e[13]];function c(u){e[20](u)}let l={$$slots:{content:[y0],button:[h0]},$$scope:{ctx:e}};for(let u=0;u<a.length;u+=1)l=Pr(l,a[u]);return e[2]!==void 0&&(l.isOpen=e[2]),n=new c0({props:l}),Fu.push(()=>Du(n,"isOpen",c)),{c(){t=L("div"),o&&o.c(),r=ut(),_t(n.$$.fragment),this.h()},l(u){t=k(u,"DIV",{class:!0});var d=A(t);o&&o.l(d),r=dt(d),wt(n.$$.fragment,d),d.forEach(y),this.h()},h(){m(t,"class","flex-col"),lt(t,"flex",e[6]),lt(t,"inline-flex",!e[6])},m(u,d){B(u,t,d),o&&o.m(t,null),S(t,r),vt(n,t,null),s=!0},p(u,[d]){u[7]!==void 0?o?(o.p(u,d),d&128&&V(o,1)):(o=Oa(u),o.c(),V(o,1),o.m(t,r)):o&&(Qe(),j(o,1,1,()=>{o=null}),Je());const h=d&8546?ka(a,[d&64&&{buttonClass:u[6]?"w-full":void 0},d&290&&{disabled:!(u[1]&&u[1].length>0||u[8])||u[5]},d&8192&&xa(u[13])]):{};d&2114067&&(h.$$scope={dirty:d,ctx:u}),!i&&d&4&&(i=!0,h.isOpen=u[2],Bu(()=>i=!1)),n.$set(h),(!s||d&64)&&lt(t,"flex",u[6]),(!s||d&64)&&lt(t,"inline-flex",!u[6])},i(u){s||(V(o),V(n.$$.fragment,u),s=!0)},o(u){j(o),j(n.$$.fragment,u),s=!1},d(u){u&&y(t),o&&o.d(),It(n)}}}function _0(e,t,r){const n=["isOpen","required","singular","disabled","expand","label","selection","optionOrderer","options","meta","values","optionConstructor"];let i=ri(t,n),{$$slots:s={},$$scope:o}=t;const a=Ba(s);let{isOpen:c=!1}=t,{required:l=!1}=t,{singular:u=!1}=t,{disabled:d=!1}=t,{expand:h=!0}=t,{label:g=void 0}=t,{selection:b=new Set}=t,{optionOrderer:p=void 0}=t,{options:_=[]}=t,{meta:T=void 0}=t,{values:I=void 0}=t,{optionConstructor:$=void 0}=t;const K=Ca();function at(v,or){r(1,_=v.map((Tt,Xr)=>or(Tt,Xr,T))),p&&r(1,_=_.sort(p)),r(0,b=new Set(_.filter(Tt=>Tt.initiallySelected).map(Tt=>Tt.value)));const Xt=_.filter(Tt=>b.has(Tt.value)),ar=mt(Xt);ar!==St&&r(9,St=ar)}let St=mt(_.filter(v=>b.has(v.value)));function jt(v){if(u){r(0,b=new Set([v.value])),K("select",{selected:[v],meta:T});return}b.has(v.value)?b.delete(v.value):b.add(v.value),r(0,b=new Set(b));const or=_.filter(Xt=>b.has(Xt.value));K("select",{selected:or,meta:T})}function Ve(){r(0,b=new Set),K("select",{selected:[],meta:T})}function Et(){r(0,b=new Set(_.map(v=>v.value))),K("select",{selected:_,meta:T})}function mt(v){return v.length===0?"Select":u?v[0].label||"Select":_.length===v.length?"All selected":`(${v.length}) selected`}const Jr=v=>jt(v);function ze(v){c=v,r(2,c)}return e.$$set=v=>{t=Pr(Pr({},t),La(v)),r(13,i=ri(t,n)),"isOpen"in v&&r(2,c=v.isOpen),"required"in v&&r(3,l=v.required),"singular"in v&&r(4,u=v.singular),"disabled"in v&&r(5,d=v.disabled),"expand"in v&&r(6,h=v.expand),"label"in v&&r(7,g=v.label),"selection"in v&&r(0,b=v.selection),"optionOrderer"in v&&r(15,p=v.optionOrderer),"options"in v&&r(1,_=v.options),"meta"in v&&r(16,T=v.meta),"values"in v&&r(17,I=v.values),"optionConstructor"in v&&r(8,$=v.optionConstructor),"$$scope"in v&&r(21,o=v.$$scope)},e.$$.update=()=>{e.$$.dirty&32770&&p&&r(1,_=_.sort(p)),e.$$.dirty&3&&r(9,St=mt(_.filter(v=>b.has(v.value)))),e.$$.dirty&131328&&I&&$&&at(I,$)},[b,_,c,l,u,d,h,g,$,St,jt,Ve,Et,i,a,p,T,I,s,Jr,ze,o]}class Da extends Se{constructor(t){super(),Ee(this,t,_0,m0,Te,{isOpen:2,required:3,singular:4,disabled:5,expand:6,label:7,selection:0,optionOrderer:15,options:1,meta:16,values:17,optionConstructor:8})}}function w0(e){let t;return{c(){t=L("hr"),this.h()},l(r){t=k(r,"HR",{class:!0}),this.h()},h(){m(t,"class","mt-4 mb-2 w-full dark:border-background-950")},m(r,n){B(r,t,n)},p:bt,i:bt,o:bt,d(r){r&&y(t)}}}class jn extends Se{constructor(t){super(),Ee(this,t,null,w0,Te,{})}}function v0(e){let t;return{c(){t=pt("Load")},l(r){t=yt(r,"Load")},m(r,n){B(r,t,n)},d(r){r&&y(t)}}}function I0(e){var Oo;let t,r,n,i,s,o,a,c,l,u,d,h,g,b,p,_,T,I,$,K,at,St,jt,Ve,Et,mt,Jr,ze,v,or,Xt,ar,Tt,Xr,Ln,se,oe,Qi,$e,kn,Ji,Ao;return c=new Da({props:{label:"Dataset",expand:!0,singular:!0,optionConstructor:e[6],values:e[1].preloadedDatasets}}),c.$on("select",e[2]),u=new Da({props:{disabled:!e[1].selectedDataset,label:"Table",expand:!0,optionConstructor:e[7],values:((Oo=e[1].selectedDataset)==null?void 0:Oo.items)??[]}}),u.$on("select",e[3]),g=new jn({}),I=new jn({}),jt=new z2({props:{onFileDropped:e[4]}}),mt=new jn({}),Xt=new jn({}),$e=new si({props:{$$slots:{default:[v0]},$$scope:{ctx:e}}}),{c(){t=L("h2"),r=pt("Please select dataset"),n=ut(),i=L("p"),s=pt("from filter data provided by us"),o=ut(),a=L("div"),_t(c.$$.fragment),l=ut(),_t(u.$$.fragment),d=ut(),h=L("div"),_t(g.$$.fragment),b=ut(),p=L("div"),_=pt("OR"),T=ut(),_t(I.$$.fragment),$=ut(),K=L("p"),at=pt("your own dataset in CSV format"),St=ut(),_t(jt.$$.fragment),Ve=ut(),Et=L("div"),_t(mt.$$.fragment),Jr=ut(),ze=L("div"),v=pt("OR"),or=ut(),_t(Xt.$$.fragment),ar=ut(),Tt=L("p"),Xr=pt("a CSV dataset from url"),Ln=ut(),se=L("form"),oe=L("input"),Qi=ut(),_t($e.$$.fragment),this.h()},l(w){t=k(w,"H2",{class:!0});var tt=A(t);r=yt(tt,"Please select dataset"),tt.forEach(y),n=dt(w),i=k(w,"P",{class:!0});var Zr=A(i);s=yt(Zr,"from filter data provided by us"),Zr.forEach(y),o=dt(w),a=k(w,"DIV",{class:!0});var je=A(a);wt(c.$$.fragment,je),l=dt(je),wt(u.$$.fragment,je),je.forEach(y),d=dt(w),h=k(w,"DIV",{class:!0});var Oe=A(h);wt(g.$$.fragment,Oe),b=dt(Oe),p=k(Oe,"DIV",{class:!0});var tn=A(p);_=yt(tn,"OR"),tn.forEach(y),T=dt(Oe),wt(I.$$.fragment,Oe),Oe.forEach(y),$=dt(w),K=k(w,"P",{class:!0});var Ro=A(K);at=yt(Ro,"your own dataset in CSV format"),Ro.forEach(y),St=dt(w),wt(jt.$$.fragment,w),Ve=dt(w),Et=k(w,"DIV",{class:!0});var Er=A(Et);wt(mt.$$.fragment,Er),Jr=dt(Er),ze=k(Er,"DIV",{class:!0});var No=A(ze);v=yt(No,"OR"),No.forEach(y),or=dt(Er),wt(Xt.$$.fragment,Er),Er.forEach(y),ar=dt(w),Tt=k(w,"P",{class:!0});var Fo=A(Tt);Xr=yt(Fo,"a CSV dataset from url"),Fo.forEach(y),Ln=dt(w),se=k(w,"FORM",{class:!0});var xn=A(se);oe=k(xn,"INPUT",{type:!0,placeholder:!0,class:!0}),Qi=dt(xn),wt($e.$$.fragment,xn),xn.forEach(y),this.h()},h(){m(t,"class","text-2xl font-bold mb-5"),m(i,"class","mb-2"),m(a,"class","grid grid-cols-2 gap-2"),m(p,"class","mx-4 opacity-50"),m(h,"class","flex mt-5 mb-5 items-center justify-center"),m(K,"class","mb-2"),m(ze,"class","mx-4 opacity-50"),m(Et,"class","flex mt-5 mb-5 items-center justify-center"),m(Tt,"class","mb-2"),m(oe,"type","url"),m(oe,"placeholder","URL"),m(oe,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),m(se,"class","flex gap-2")},m(w,tt){B(w,t,tt),S(t,r),B(w,n,tt),B(w,i,tt),S(i,s),B(w,o,tt),B(w,a,tt),vt(c,a,null),S(a,l),vt(u,a,null),B(w,d,tt),B(w,h,tt),vt(g,h,null),S(h,b),S(h,p),S(p,_),S(h,T),vt(I,h,null),B(w,$,tt),B(w,K,tt),S(K,at),B(w,St,tt),vt(jt,w,tt),B(w,Ve,tt),B(w,Et,tt),vt(mt,Et,null),S(Et,Jr),S(Et,ze),S(ze,v),S(Et,or),vt(Xt,Et,null),B(w,ar,tt),B(w,Tt,tt),S(Tt,Xr),B(w,Ln,tt),B(w,se,tt),S(se,oe),Lo(oe,e[0]),S(se,Qi),vt($e,se,null),kn=!0,Ji||(Ao=[lr(oe,"input",e[8]),lr(se,"submit",e[5])],Ji=!0)},p(w,[tt]){var tn;const Zr={};tt&2&&(Zr.values=w[1].preloadedDatasets),c.$set(Zr);const je={};tt&2&&(je.disabled=!w[1].selectedDataset),tt&2&&(je.values=((tn=w[1].selectedDataset)==null?void 0:tn.items)??[]),u.$set(je),tt&1&&oe.value!==w[0]&&Lo(oe,w[0]);const Oe={};tt&1024&&(Oe.$$scope={dirty:tt,ctx:w}),$e.$set(Oe)},i(w){kn||(V(c.$$.fragment,w),V(u.$$.fragment,w),V(g.$$.fragment,w),V(I.$$.fragment,w),V(jt.$$.fragment,w),V(mt.$$.fragment,w),V(Xt.$$.fragment,w),V($e.$$.fragment,w),kn=!0)},o(w){j(c.$$.fragment,w),j(u.$$.fragment,w),j(g.$$.fragment,w),j(I.$$.fragment,w),j(jt.$$.fragment,w),j(mt.$$.fragment,w),j(Xt.$$.fragment,w),j($e.$$.fragment,w),kn=!1},d(w){w&&y(t),w&&y(n),w&&y(i),w&&y(o),w&&y(a),It(c),It(u),w&&y(d),w&&y(h),It(g),It(I),w&&y($),w&&y(K),w&&y(St),It(jt,w),w&&y(Ve),w&&y(Et),It(mt),It(Xt),w&&y(ar),w&&y(Tt),w&&y(Ln),w&&y(se),It($e),Ji=!1,Cs(Ao)}}}function S0(e,t,r){let n;ku(e,ds,g=>r(1,n=g));var i=void 0;const s=Ca();function o(g){const b=n.preloadedDatasets.filter(p=>p===g.detail.selected[0].value);b.length===0?s("selectDataset"):s("selectDataset",b[0])}function a(g){s("selectTable",{buildInTables:{dataset:ct(ds).selectedDataset,paths:g.detail.selected}})}function c(g){s("selectTable",{externalTables:{fileList:g}})}function l(){if(!i)return;const g=new URL(i);s("selectTable",{externalTables:{url:g}})}const u=(g,b,p)=>({label:g.name,value:g,id:b,initiallySelected:g===ct(ds).selectedDataset}),d=(g,b,p)=>({label:g.name,value:g,id:b});function h(){i=this.value,r(0,i)}return[i,n,o,a,c,l,u,d,h]}class G0 extends Se{constructor(t){super(),Ee(this,t,S0,I0,Te,{})}}export{Gu as C,Da as D,N0 as G,q2 as L,vu as P,re as S,G0 as T,dn as a,Wo as b,Ja as c,Wh as d,G2 as e,ue as f,ds as g,jn as h,Ye as i,$i as j,$n as k,$0 as l,Gt as m,c0 as n,q0 as o,_u as p,$u as q,Rh as r,j0 as s,yu as t};
