var Fc=Object.defineProperty;var Bc=(r,t,e)=>t in r?Fc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ke=(r,t,e)=>(Bc(r,typeof t!="symbol"?t+"":t,e),e);import{S as te,i as ee,s as re,O as Ir,P as Sr,m as O,h as p,n as y,b as D,D as T,G as pt,k as C,a as lt,l as U,c as ut,I as Dr,J as Lr,K as kr,L as Mr,g as V,d as $,ab as dt,C as gt,Y as Ke,Z as Ms,q as yt,r as mt,v as Pe,f as xe,ac as wn,a1 as ao,ad as Er,ae as co,W as Si,H as Nc,E as Dc,F as Ei,T as Lc,y as _t,z as wt,A as vt,af as lo,ag as uo,B as It,e as vn,R as kc,_ as ho,u as Cs,M as Mc,X as Ti,N as Oi}from"./index.14b8a44d.js";import{_ as ms}from"./preload-helper.a4192956.js";import{w as In,r as Ai}from"./index.fb042441.js";import{n as Ae,w as Us,d as Cc,f as Ri,B as Sn,b as Fi,c as Uc}from"./fadeSlide.f65added.js";function Pc(r){let t,e,n;return{c(){t=Ir("svg"),e=Ir("polyline"),this.h()},l(s){t=Sr(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=O(t);e=Sr(i,"polyline",{points:!0}),O(e).forEach(p),i.forEach(p),this.h()},h(){y(e,"points","20 6 9 17 4 12"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"width",r[0]),y(t,"height",r[0]),y(t,"fill","none"),y(t,"viewBox","0 0 24 24"),y(t,"stroke","currentColor"),y(t,"stroke-width",r[1]),y(t,"stroke-linecap","round"),y(t,"stroke-linejoin","round"),y(t,"class",n="feather feather-check "+r[2])},m(s,i){D(s,t,i),T(t,e)},p(s,[i]){i&1&&y(t,"width",s[0]),i&1&&y(t,"height",s[0]),i&2&&y(t,"stroke-width",s[1]),i&4&&n!==(n="feather feather-check "+s[2])&&y(t,"class",n)},i:pt,o:pt,d(s){s&&p(t)}}}function xc(r,t,e){let{size:n="24"}=t,{strokeWidth:s=2}=t,{class:i=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=o=>{"size"in o&&e(0,n=o.size),"strokeWidth"in o&&e(1,s=o.strokeWidth),"class"in o&&e(2,i=o.class)},[n,s,i]}class Vc extends te{constructor(t){super(),ee(this,t,xc,Pc,re,{size:0,strokeWidth:1,class:2})}}function jc(r){let t,e,n;return{c(){t=Ir("svg"),e=Ir("polyline"),this.h()},l(s){t=Sr(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=O(t);e=Sr(i,"polyline",{points:!0}),O(e).forEach(p),i.forEach(p),this.h()},h(){y(e,"points","6 9 12 15 18 9"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"width",r[0]),y(t,"height",r[0]),y(t,"fill","none"),y(t,"viewBox","0 0 24 24"),y(t,"stroke","currentColor"),y(t,"stroke-width",r[1]),y(t,"stroke-linecap","round"),y(t,"stroke-linejoin","round"),y(t,"class",n="feather feather-chevron-down "+r[2])},m(s,i){D(s,t,i),T(t,e)},p(s,[i]){i&1&&y(t,"width",s[0]),i&1&&y(t,"height",s[0]),i&2&&y(t,"stroke-width",s[1]),i&4&&n!==(n="feather feather-chevron-down "+s[2])&&y(t,"class",n)},i:pt,o:pt,d(s){s&&p(t)}}}function zc(r,t,e){let{size:n="24"}=t,{strokeWidth:s=2}=t,{class:i=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=o=>{"size"in o&&e(0,n=o.size),"strokeWidth"in o&&e(1,s=o.strokeWidth),"class"in o&&e(2,i=o.class)},[n,s,i]}class $c extends te{constructor(t){super(),ee(this,t,zc,jc,re,{size:0,strokeWidth:1,class:2})}}function Gc(r){let t,e,n;return{c(){t=Ir("svg"),e=Ir("polyline"),this.h()},l(s){t=Sr(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=O(t);e=Sr(i,"polyline",{points:!0}),O(e).forEach(p),i.forEach(p),this.h()},h(){y(e,"points","18 15 12 9 6 15"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"width",r[0]),y(t,"height",r[0]),y(t,"fill","none"),y(t,"viewBox","0 0 24 24"),y(t,"stroke","currentColor"),y(t,"stroke-width",r[1]),y(t,"stroke-linecap","round"),y(t,"stroke-linejoin","round"),y(t,"class",n="feather feather-chevron-up "+r[2])},m(s,i){D(s,t,i),T(t,e)},p(s,[i]){i&1&&y(t,"width",s[0]),i&1&&y(t,"height",s[0]),i&2&&y(t,"stroke-width",s[1]),i&4&&n!==(n="feather feather-chevron-up "+s[2])&&y(t,"class",n)},i:pt,o:pt,d(s){s&&p(t)}}}function Wc(r,t,e){let{size:n="24"}=t,{strokeWidth:s=2}=t,{class:i=""}=t;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=o=>{"size"in o&&e(0,n=o.size),"strokeWidth"in o&&e(1,s=o.strokeWidth),"class"in o&&e(2,i=o.class)},[n,s,i]}class Yc extends te{constructor(t){super(),ee(this,t,Wc,Gc,re,{size:0,strokeWidth:1,class:2})}}function qc(r){let t,e,n,s;return{c(){t=C("div"),e=C("div"),n=lt(),s=C("div"),this.h()},l(i){t=U(i,"DIV",{class:!0});var o=O(t);e=U(o,"DIV",{class:!0}),O(e).forEach(p),n=ut(o),s=U(o,"DIV",{class:!0}),O(s).forEach(p),o.forEach(p),this.h()},h(){y(e,"class","bg-gradient-to-tr from-background-50 to-background-200 dark:from-background-950 dark:to-background-950 svelte-grc2oa"),y(s,"class","grid-background svelte-grc2oa"),y(t,"class","grid-bg-container svelte-grc2oa")},m(i,o){D(i,t,o),T(t,e),T(t,n),T(t,s)},p:pt,i:pt,o:pt,d(i){i&&p(t)}}}class m1 extends te{constructor(t){super(),ee(this,t,null,qc,re,{})}}function Hc(r){let t,e;const n=r[1].default,s=Dr(n,r,r[0],null);return{c(){t=C("div"),s&&s.c(),this.h()},l(i){t=U(i,"DIV",{class:!0});var o=O(t);s&&s.l(o),o.forEach(p),this.h()},h(){y(t,"class","max-w-prose min-w-[480px] bg-background-50 ring-1 ring-background-900/5 dark:bg-background-800 dark:ring-background-950/5 shadow-xl p-10 rounded-2xl")},m(i,o){D(i,t,o),s&&s.m(t,null),e=!0},p(i,[o]){s&&s.p&&(!e||o&1)&&Lr(s,n,i,i[0],e?Mr(n,i[0],o,null):kr(i[0]),null)},i(i){e||(V(s,i),e=!0)},o(i){$(s,i),e=!1},d(i){i&&p(t),s&&s.d(i)}}}function Qc(r,t,e){let{$$slots:n={},$$scope:s}=t;return r.$$set=i=>{"$$scope"in i&&e(0,s=i.$$scope)},[s,n]}class _1 extends te{constructor(t){super(),ee(this,t,Qc,Hc,re,{})}}var ts=(r=>(r.PLANE="plane",r))(ts||{});class Kc{constructor(t){ke(this,"active",!1);ke(this,"filterOptions");this.filterOptions=t}static fromString(t){return null}}var nr=(r=>(r[r.BUILD_IN=0]="BUILD_IN",r[r.URL=1]="URL",r[r.FILE=2]="FILE",r))(nr||{});const Jc=(r,t)=>{const e=async d=>{r.setIsLoading(!0);try{return await d()}finally{r.setIsLoading(!1)}},n=async d=>{console.log("Rewriting entries for table:",d);const f=`
	ALTER TABLE "${d}" ADD COLUMN family TEXT;
	ALTER TABLE "${d}" ADD COLUMN mode TEXT;
	ALTER TABLE "${d}" ADD COLUMN vectorization TEXT;
	ALTER TABLE "${d}" ADD COLUMN fixture TEXT;
	ALTER TABLE "${d}" ADD COLUMN s FLOAT;
	ALTER TABLE "${d}" ADD COLUMN n_threads INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_partitions INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_elements_build INTEGER;
	ALTER TABLE "${d}" ADD COLUMN n_elements_lookup INTEGER;
	ALTER TABLE "${d}" ADD COLUMN shared_elements FLOAT;

	WITH SplitValues AS (
		SELECT
		name,
		SPLIT_PART(name, '_', 1) AS family,
		SPLIT_PART(name, '_', 2) AS mode,
		SPLIT_PART(name, '_', 4) AS vectorization,
		SPLIT_PART(name, '/', 2) AS fixture,
		CAST(SPLIT_PART(name, '/', 3) AS FLOAT) / 100 AS s,
		CAST(SPLIT_PART(name, '/', 4) AS INTEGER) AS n_threads,
		CAST(SPLIT_PART(name, '/', 5) AS INTEGER) AS n_partitions,
		CAST(SPLIT_PART(name, '/', 6) AS INTEGER) AS n_elements_build,
		CAST(SPLIT_PART(name, '/', 7) AS INTEGER) AS n_elements_lookup,
		CAST(SPLIT_PART(name, '/', 8) AS FLOAT) / 100 AS shared_elements
		FROM "${d}")
	UPDATE "${d}" AS t
		SET
			family = sv.family,
			mode = sv.mode,
			vectorization = sv.vectorization,
			fixture = sv.fixture,
			s = sv.s,
			n_threads = sv.n_threads,
			n_partitions = sv.n_partitions,
			n_elements_build = sv.n_elements_build,
			n_elements_lookup = sv.n_elements_lookup,
	shared_elements = sv.shared_elements
	FROM SplitValues AS sv
	WHERE t.name = sv.name;

	UPDATE "${d}" as t
		SET fpr = 'NaN'
		WHERE fpr = -1;
		`;return r.executeQuery(f)},s=(d,f)=>e(async()=>{const g=await r.getConnection(),{db:_}=dt(t),{DuckDBDataProtocol:m}=await ms(()=>Promise.resolve().then(()=>fh),void 0,import.meta.url);if(!(!_||!g)){r.setIsLoading(!0);try{await _.registerFileHandle(d.name,d,m.BROWSER_FILEREADER,!0),console.log("Registered file handle:",f),await i(d.name,f,!1)}catch(S){const I=`Failed to load table ${f} from file ${d.name}`;throw console.error(I,S),Ae.error({message:I,description:S==null?void 0:S.message}),S}finally{r.setIsLoading(!1)}}}),i=async(d,f,g=!0,_=!0,m=!0)=>{const S=await r.getConnection();if(S){g&&r.setIsLoading(!0);try{await S.insertCSVFromPath(d,{name:f,detect:!0,create:_});const I=await r.getTableSchema(f),z={name:f,dataUrl:d,schema:I,filterOptions:{}};return m&&t.update(q=>(q.tables[f]=z,q)),z}catch(I){const z=`Failed to load table ${f} from path ${d}`;throw console.error(z,I),Ae.error({message:z,description:I==null?void 0:I.message}),I}finally{g&&r.setIsLoading(!1)}}},o=async d=>{try{await n(d);const f=await r.getTableSchema(d),g={};return console.log("Rewrite response:",{schema:f,filterOptions:g,table:d}),{schema:f,filterOptions:g,name:d,dataUrl:""}}catch(f){console.error(`Failed to rewrite entries for table ${d}:`,f);return}},a=(d=void 0)=>{const{tables:f}=dt(t);return Object.entries(f).reduce((g,[_,m],S)=>S===0?(g=m.schema,g):(Object.entries(g).forEach(([I,z])=>{if(!(d!==void 0&&!d.includes(I))){if(!m.schema[I]){delete g[I];return}if(z!==m.schema[I]){delete g[I];return}}}),g),{})},c=async(d,f=!0,g=!0,_=!0)=>{switch(console.debug("Loading table reference:",d),d.source){case nr.BUILD_IN:{const m=new URL(d.url,location.href).href;return i(m,d.tableName,f,g,_)}case nr.URL:{const m=d.url;return i(m,d.tableName,f,g,_)}case nr.FILE:return s(d.file,d.tableName)}};return{loadEntriesFromFileList:async d=>{const f=[];for(const g of d){const _=g.name.replace(".csv","");f.push(s(g,_))}await Promise.all(f)},loadCsvFromFile:s,loadCsvFromUrl:i,loadTableReferences:async d=>e(async()=>{if(d.length===0)return;console.debug("Loading table references:",d);const f=d.reduce((_,m)=>(_[m.tableName]||(_[m.tableName]=[]),_[m.tableName].push(m),_),{});if(console.debug("Grouped table references:",f),Object.keys(f).every(_=>!!dt(t).tables[_])){console.log("All tables are already loaded, skipping");return}const g=Promise.all(Object.entries(f).flatMap(async([_,m])=>{if(m.length===0)return[];const S=[];for(const[I,z]of m.entries()){const q=await c(z,!1,I===0,!1);q&&S.push(q)}return o(_)}));try{const _=await g,m=_.filter(S=>S!==void 0);return console.log("Loaded tables:",{tableDefinitions:m,promiseResult:_}),t.update(S=>(m.forEach(I=>{S.tables[I.name]=I}),S.combinedSchema=a(),S)),m}catch(_){console.error("Failed to load CSVs:",_)}}),resetDatabase:async()=>{const{sharedConnection:d}=dt(t);if(!d)return;const f=await r.getTables();console.log("Dropping tables:",f);const g=f.map(_=>`DROP TABLE "${_}";`).join(`
`);try{await r.executeQuery(g)}catch(_){console.error(_)}t.update(_=>(_.tables={},_))},removeTable:async d=>{const{sharedConnection:f}=dt(t);if(!(!f||!(await r.getTables()).find(m=>m===d)))try{await r.executeQuery(`DROP TABLE "${d}"`),r.update(m=>(delete m.tables[d],m)),a()}catch{Ae.error({message:`Could not delete table ${d}`})}}}};var Gt=(r=>(r.LINEAR="linear",r.LOG="log",r))(Gt||{}),En=(r=>(r.MIN="min",r.MAX="max",r.AVG="avg",r.SUM="sum",r))(En||{});const Zc=r=>{const t=async(c,l=[])=>{const u=await Promise.all(l.map(d=>r.getDistinctValues(c,d))),b={};return u.forEach((d,f)=>{const g=l[f];b[g]={options:d,type:d.length>0?typeof d[0]:"unknown"}}),b},e=(c,l,u="")=>{switch(c){case Gt.LINEAR:return`${u}${l}${u}`;case Gt.LOG:return`LOG2(${u}${l}${u})`}},n={xColumnName:"iterations",yColumnName:"fpr",zColumnName:"cpu_time",tileCount:20,scaleY:Gt.LINEAR,scaleX:Gt.LINEAR,scaleZ:Gt.LINEAR,aggregation:En.MIN},s=async(c,l,u)=>{const b=`SELECT * FROM "${c}" WHERE "${l}" = ${u};`,d=await r.executeQuery(b);if(!d)throw new Error("Failed to get min/max");const f=d.toArray();if(f.length===1)return f[0]},i=async(c,l,u)=>{const b=`SELECT MIN(${e(u,l,'"')}) AS min, MAX(${e(u,l,'"')}) AS max FROM ${c}
		WHERE ${u===Gt.LOG?`"${l}" >= 0 and "${l}" != 'NaN'`:`"${l}" != 'NaN'`}
		`,d=await r.executeQuery(b);if(!d)throw new Error("Failed to get min/max");const f=d.toArray();if(f.length!==1)throw new Error("Invalid number of rows");return[f[0].min,f[0].max]},o=async(c,l,u,b,d,f)=>{const g=l.xTileCount??l.tileCount,_=l.zTileCount??l.tileCount,[m,S]=u??await i(c,l.xColumnName,l.scaleX),[I,z]=d??await i(c,l.zColumnName,l.scaleZ),q=(S-m)/g,ct=(z-I)/_,at=e(l.scaleX,l.xColumnName,'"'),xt=e(l.scaleZ,l.zColumnName,'"'),He=e(l.scaleY,l.yColumnName,'"'),se=`
		SELECT
			${f?`"${f.columnName}",`:""}
			${l.aggregation}(${He}) AS y,
			any_value("name") as name,
			FLOOR((${at} - ${m}) / ${q}) AS x,
		   	FLOOR((${xt} - ${I}) / ${ct}) AS z,
			any_value("${l.xColumnName}") as "rawX", any_value("${l.yColumnName}") as "rawY", any_value("${l.zColumnName}") as "rawZ"
	FROM "${c}"
	WHERE "${l.yColumnName}" != 'NaN' and x != 'NaN' and z != 'NaN'
	${f?`and "${f.columnName}" = '${f.value}'`:""}
	${l.scaleY===Gt.LOG?`and "${l.yColumnName}" >= 0`:""}
	GROUP BY z, x, ${f?`"${f.columnName}",`:""}
	ORDER BY z ASC, x ASC;
	`;try{const Vt=await r.executeQuery(se);return Vt?Vt.toArray():[]}catch(Vt){return console.error(Vt),[]}};return{getFiltersOptions:t,getTiledData:async(c,l={},u,b,d,f)=>{const g={...n,...l};try{const _=await o(c,g,u,b,d,f),m=(g.zTileCount??g.tileCount)+1,S=(g.xTileCount??g.tileCount)+1,I=new Array(S).fill(0).map(()=>new Array(m).fill(0));let z=Number.MAX_VALUE,q=Number.MIN_VALUE;return _.forEach((ct,at)=>{ct.x<0||ct.z<0||Number.isNaN(ct.y)||(z=Math.min(z,ct.y),q=Math.max(q,ct.y),I[ct.z][ct.x]=ct.y)}),{data:I,min:z,max:q,queryResult:_}}catch(_){return console.error("Failed to create tiled data:",_),{data:[],min:0,max:0}}},getMinMax:i,getEntry:s}};function E(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(b){o(b)}}function c(u){try{l(n.throw(u))}catch(b){o(b)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(r,t||[])).next())})}function Bi(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(r){return this instanceof x?(this.v=r,this):new x(r)}function ge(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(g,_){i.push([d,f,g,_])>1||a(d,f)})})}function a(d,f){try{c(n[d](f))}catch(g){b(i[0][3],g)}}function c(d){d.value instanceof x?Promise.resolve(d.value.v).then(l,u):b(i[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function b(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function dn(r){var t,e;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=r[s]?function(o){return(e=!e)?{value:x(r[s](o)),done:!1}:i?i(o):o}:i}}function sr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof Bi=="function"?Bi(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=r[i]&&function(o){return new Promise(function(a,c){o=r[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}const Xc=new TextDecoder("utf-8"),_s=r=>Xc.decode(r),tl=new TextEncoder,Ps=r=>tl.encode(r),[w1,el]=(()=>{const r=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw r()}return t.asIntN=()=>{throw r()},t.asUintN=()=>{throw r()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Kr,v1]=(()=>{const r=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Jr,I1]=(()=>{const r=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),rl=r=>typeof r=="number",bo=r=>typeof r=="boolean",bt=r=>typeof r=="function",Nt=r=>r!=null&&Object(r)===r,or=r=>Nt(r)&&bt(r.then),Zr=r=>Nt(r)&&bt(r[Symbol.iterator]),Cr=r=>Nt(r)&&bt(r[Symbol.asyncIterator]),ws=r=>Nt(r)&&Nt(r.schema),fo=r=>Nt(r)&&"done"in r&&"value"in r,go=r=>Nt(r)&&bt(r.stat)&&rl(r.fd),po=r=>Nt(r)&&xs(r.body),es=r=>"_getDOMStream"in r&&"_getNodeStream"in r,nl=r=>Nt(r)&&bt(r.abort)&&bt(r.getWriter)&&!es(r),xs=r=>Nt(r)&&bt(r.cancel)&&bt(r.getReader)&&!es(r),sl=r=>Nt(r)&&bt(r.end)&&bt(r.write)&&bo(r.writable)&&!es(r),yo=r=>Nt(r)&&bt(r.read)&&bt(r.pipe)&&bo(r.readable)&&!es(r),il=r=>Nt(r)&&bt(r.clear)&&bt(r.bytes)&&bt(r.position)&&bt(r.setPosition)&&bt(r.capacity)&&bt(r.getBufferIdentifier)&&bt(r.createLong),Vs=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function ol(r){const t=r[0]?[r[0]]:[];let e,n,s,i;for(let o,a,c=0,l=0,u=r.length;++c<u;){if(o=t[l],a=r[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:e,byteLength:s}=o,{byteOffset:n,byteLength:i}=a,e+s<n||n+i<e){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,e,n-e+i)}return t}function Ni(r,t,e=0,n=t.byteLength){const s=r.byteLength,i=new Uint8Array(r.buffer,r.byteOffset,s),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,s));return i.set(o,e),r}function ye(r,t){const e=ol(r),n=e.reduce((u,b)=>u+b.byteLength,0);let s,i,o,a=0,c=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,n);for(const u=e.length;++c<u;){if(s=e[c],i=s.subarray(0,Math.min(s.length,l-a)),l<=a+i.length){i.length<s.length?e[c]=s.subarray(i.length):i.length===s.length&&c++,o?Ni(o,i,a):o=i;break}Ni(o||(o=new Uint8Array(l)),i,a),a+=i.length}return[o||new Uint8Array(0),e.slice(c),n-(o?o.byteLength:0)]}function tt(r,t){let e=fo(t)?t.value:t;return e instanceof r?r===Uint8Array?new r(e.buffer,e.byteOffset,e.byteLength):e:e?(typeof e=="string"&&(e=Ps(e)),e instanceof ArrayBuffer?new r(e):e instanceof Vs?new r(e):il(e)?tt(r,e.bytes()):ArrayBuffer.isView(e)?e.byteLength<=0?new r(0):new r(e.buffer,e.byteOffset,e.byteLength/r.BYTES_PER_ELEMENT):r.from(e)):new r(0)}const Vr=r=>tt(Int32Array,r),H=r=>tt(Uint8Array,r),vs=r=>(r.next(),r);function*al(r,t){const e=function*(s){yield s},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Vs?e(t):Zr(t)?t:e(t);return yield*vs(function*(s){let i=null;do i=s.next(yield tt(r,i));while(!i.done)}(n[Symbol.iterator]())),new r}const cl=r=>al(Uint8Array,r);function mo(r,t){return ge(this,arguments,function*(){if(or(t))return yield x(yield x(yield*dn(sr(mo(r,yield x(t))))));const n=function(o){return ge(this,arguments,function*(){yield yield x(yield x(o))})},s=function(o){return ge(this,arguments,function*(){yield x(yield*dn(sr(vs(function*(a){let c=null;do c=a.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Vs?n(t):Zr(t)?s(t):Cr(t)?t:n(t);return yield x(yield*dn(sr(vs(function(o){return ge(this,arguments,function*(){let a=null;do a=yield x(o.next(yield yield x(tt(r,a))));while(!a.done)})}(i[Symbol.asyncIterator]()))))),yield x(new r)})}const ll=r=>mo(Uint8Array,r);function js(r,t,e){if(r!==0){e=e.slice(0,t+1);for(let n=-1;++n<=t;)e[n]+=r}return e}function ul(r,t){let e=0;const n=r.length;if(n!==t.length)return!1;if(n>0)do if(r[e]!==t[e])return!1;while(++e<n);return!0}const Wt={fromIterable(r){return on(dl(r))},fromAsyncIterable(r){return on(hl(r))},fromDOMStream(r){return on(bl(r))},fromNodeStream(r){return on(gl(r))},toDOMStream(r,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(r,t){throw new Error('"toNodeStream" not available in this environment')}},on=r=>(r.next(),r);function*dl(r){let t,e=!1,n=[],s,i,o,a=0;function c(){return i==="peek"?ye(n,o)[0]:([s,n,a]=ye(n,o),s)}({cmd:i,size:o}=yield null);const l=cl(r)[Symbol.iterator]();try{do if({done:t,value:s}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&s.byteLength>0&&(n.push(s),a+=s.byteLength),t||o<=a)do({cmd:i,size:o}=yield c());while(o<a);while(!t)}catch(u){(e=!0)&&typeof l.throw=="function"&&l.throw(u)}finally{e===!1&&typeof l.return=="function"&&l.return(null)}return null}function hl(r){return ge(this,arguments,function*(){let e,n=!1,s=[],i,o,a,c=0;function l(){return o==="peek"?ye(s,a)[0]:([i,s,c]=ye(s,a),i)}({cmd:o,size:a}=yield yield x(null));const u=ll(r)[Symbol.asyncIterator]();try{do if({done:e,value:i}=Number.isNaN(a-c)?yield x(u.next()):yield x(u.next(a-c)),!e&&i.byteLength>0&&(s.push(i),c+=i.byteLength),e||a<=c)do({cmd:o,size:a}=yield yield x(l()));while(a<c);while(!e)}catch(b){(n=!0)&&typeof u.throw=="function"&&(yield x(u.throw(b)))}finally{n===!1&&typeof u.return=="function"&&(yield x(u.return(new Uint8Array(0))))}return yield x(null)})}function bl(r){return ge(this,arguments,function*(){let e=!1,n=!1,s=[],i,o,a,c=0;function l(){return o==="peek"?ye(s,a)[0]:([i,s,c]=ye(s,a),i)}({cmd:o,size:a}=yield yield x(null));const u=new fl(r);try{do if({done:e,value:i}=Number.isNaN(a-c)?yield x(u.read()):yield x(u.read(a-c)),!e&&i.byteLength>0&&(s.push(H(i)),c+=i.byteLength),e||a<=c)do({cmd:o,size:a}=yield yield x(l()));while(a<c);while(!e)}catch(b){(n=!0)&&(yield x(u.cancel(b)))}finally{n===!1?yield x(u.cancel()):r.locked&&u.releaseLock()}return yield x(null)})}class fl{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return E(this,void 0,void 0,function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return E(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=H(e)),e})}}const as=(r,t)=>{const e=s=>n([t,s]);let n;return[t,e,new Promise(s=>(n=s)&&r.once(t,e))]};function gl(r){return ge(this,arguments,function*(){const e=[];let n="error",s=!1,i=null,o,a,c=0,l=[],u;function b(){return o==="peek"?ye(l,a)[0]:([u,l,c]=ye(l,a),u)}if({cmd:o,size:a}=yield yield x(null),r.isTTY)return yield yield x(new Uint8Array(0)),yield x(null);try{e[0]=as(r,"end"),e[1]=as(r,"error");do{if(e[2]=as(r,"readable"),[n,i]=yield x(Promise.race(e.map(f=>f[2]))),n==="error")break;if((s=n==="end")||(Number.isFinite(a-c)?(u=H(r.read(a-c)),u.byteLength<a-c&&(u=H(r.read()))):u=H(r.read()),u.byteLength>0&&(l.push(u),c+=u.byteLength)),s||a<=c)do({cmd:o,size:a}=yield yield x(b()));while(a<c)}while(!s)}finally{yield x(d(e,n==="error"?i:null))}return yield x(null);function d(f,g){return u=l=null,new Promise((_,m)=>{for(const[S,I]of f)r.off(S,I);try{const S=r.destroy;S&&S.call(r,g),g=void 0}catch(S){g=S||g}finally{g!=null?m(g):_()}})}})}var Ct;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(Ct||(Ct={}));var Ut;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(Ut||(Ut={}));var Bt;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(Bt||(Bt={}));var Fe;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(Fe||(Fe={}));var Q;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(Q||(Q={}));var Ve;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ve||(Ve={}));var K;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(K||(K={}));var h;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.Float=3]="Float",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct=13]="Struct",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Dictionary=-1]="Dictionary",r[r.Int8=-2]="Int8",r[r.Int16=-3]="Int16",r[r.Int32=-4]="Int32",r[r.Int64=-5]="Int64",r[r.Uint8=-6]="Uint8",r[r.Uint16=-7]="Uint16",r[r.Uint32=-8]="Uint32",r[r.Uint64=-9]="Uint64",r[r.Float16=-10]="Float16",r[r.Float32=-11]="Float32",r[r.Float64=-12]="Float64",r[r.DateDay=-13]="DateDay",r[r.DateMillisecond=-14]="DateMillisecond",r[r.TimestampSecond=-15]="TimestampSecond",r[r.TimestampMillisecond=-16]="TimestampMillisecond",r[r.TimestampMicrosecond=-17]="TimestampMicrosecond",r[r.TimestampNanosecond=-18]="TimestampNanosecond",r[r.TimeSecond=-19]="TimeSecond",r[r.TimeMillisecond=-20]="TimeMillisecond",r[r.TimeMicrosecond=-21]="TimeMicrosecond",r[r.TimeNanosecond=-22]="TimeNanosecond",r[r.DenseUnion=-23]="DenseUnion",r[r.SparseUnion=-24]="SparseUnion",r[r.IntervalDayTime=-25]="IntervalDayTime",r[r.IntervalYearMonth=-26]="IntervalYearMonth"})(h||(h={}));var Ie;(function(r){r[r.OFFSET=0]="OFFSET",r[r.DATA=1]="DATA",r[r.VALIDITY=2]="VALIDITY",r[r.TYPE=3]="TYPE"})(Ie||(Ie={}));const pl=void 0;function $r(r){if(r===null)return"null";if(r===pl)return"undefined";switch(typeof r){case"number":return`${r}`;case"bigint":return`${r}`;case"string":return`"${r}"`}return typeof r[Symbol.toPrimitive]=="function"?r[Symbol.toPrimitive]("string"):ArrayBuffer.isView(r)?r instanceof Kr||r instanceof Jr?`[${[...r].map(t=>$r(t))}]`:`[${r}]`:ArrayBuffer.isView(r)?`[${r}]`:JSON.stringify(r,(t,e)=>typeof e=="bigint"?`${e}`:e)}const yl=Symbol.for("isArrowBigNum");function ne(r,...t){return t.length===0?Object.setPrototypeOf(tt(this.TypedArray,r),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(r,...t),this.constructor.prototype)}ne.prototype[yl]=!0;ne.prototype.toJSON=function(){return`"${ir(this)}"`};ne.prototype.valueOf=function(){return _o(this)};ne.prototype.toString=function(){return ir(this)};ne.prototype[Symbol.toPrimitive]=function(r="default"){switch(r){case"number":return _o(this);case"string":return ir(this);case"default":return Is(this)}return ir(this)};function yr(...r){return ne.apply(this,r)}function mr(...r){return ne.apply(this,r)}function Gr(...r){return ne.apply(this,r)}Object.setPrototypeOf(yr.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(mr.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Gr.prototype,Object.create(Uint32Array.prototype));Object.assign(yr.prototype,ne.prototype,{constructor:yr,signed:!0,TypedArray:Int32Array,BigIntArray:Kr});Object.assign(mr.prototype,ne.prototype,{constructor:mr,signed:!1,TypedArray:Uint32Array,BigIntArray:Jr});Object.assign(Gr.prototype,ne.prototype,{constructor:Gr,signed:!0,TypedArray:Uint32Array,BigIntArray:Jr});function _o(r){const{buffer:t,byteOffset:e,length:n,signed:s}=r,i=new Jr(t,e,n),o=s&&i[i.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),c=BigInt(0);if(o){for(const l of i)a+=~l*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(const l of i)a+=l*(BigInt(1)<<BigInt(32)*c++);return a}let ir,Is;el?(Is=r=>r.byteLength===8?new r.BigIntArray(r.buffer,r.byteOffset,1)[0]:cs(r),ir=r=>r.byteLength===8?`${new r.BigIntArray(r.buffer,r.byteOffset,1)[0]}`:cs(r)):(ir=cs,Is=ir);function cs(r){let t="";const e=new Uint32Array(2);let n=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let i=-1;const o=n.length-1;do{for(e[0]=n[i=0];i<o;)n[i++]=e[1]=e[0]/10,e[0]=(e[0]-e[1]*10<<16)+n[i];n[i]=e[1]=e[0]/10,e[0]=e[0]-e[1]*10,t=`${e[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return t??"0"}class zs{static new(t,e){switch(e){case!0:return new yr(t);case!1:return new mr(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Kr:return new yr(t)}return t.byteLength===16?new Gr(t):new mr(t)}static signed(t){return new yr(t)}static unsigned(t){return new mr(t)}static decimal(t){return new Gr(t)}constructor(t,e){return zs.new(t,e)}}var wo,vo,Io,So,Eo,To,Oo,Ao,Ro,Fo,Bo,No,Do,Lo,ko,Mo,Co,Uo,Po;class A{static isNull(t){return(t==null?void 0:t.typeId)===h.Null}static isInt(t){return(t==null?void 0:t.typeId)===h.Int}static isFloat(t){return(t==null?void 0:t.typeId)===h.Float}static isBinary(t){return(t==null?void 0:t.typeId)===h.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===h.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===h.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===h.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===h.Date}static isTime(t){return(t==null?void 0:t.typeId)===h.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===h.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===h.Interval}static isList(t){return(t==null?void 0:t.typeId)===h.List}static isStruct(t){return(t==null?void 0:t.typeId)===h.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===h.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===h.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===h.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===h.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===h.Dictionary}static isDenseUnion(t){return A.isUnion(t)&&t.mode===Ut.Dense}static isSparseUnion(t){return A.isUnion(t)&&t.mode===Ut.Sparse}get typeId(){return h.NONE}}wo=Symbol.toStringTag;A[wo]=(r=>(r.children=null,r.ArrayType=Array,r[Symbol.toStringTag]="DataType"))(A.prototype);let je=class extends A{toString(){return"Null"}get typeId(){return h.Null}};vo=Symbol.toStringTag;je[vo]=(r=>r[Symbol.toStringTag]="Null")(je.prototype);class ze extends A{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return h.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Kr:Jr}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Io=Symbol.toStringTag;ze[Io]=(r=>(r.isSigned=null,r.bitWidth=null,r[Symbol.toStringTag]="Int"))(ze.prototype);class Wr extends ze{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Wr.prototype,"ArrayType",{value:Int32Array});class Yr extends A{constructor(t){super(),this.precision=t}get typeId(){return h.Float}get ArrayType(){switch(this.precision){case Bt.HALF:return Uint16Array;case Bt.SINGLE:return Float32Array;case Bt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}So=Symbol.toStringTag;Yr[So]=(r=>(r.precision=null,r[Symbol.toStringTag]="Float"))(Yr.prototype);let Tn=class extends A{constructor(){super()}get typeId(){return h.Binary}toString(){return"Binary"}};Eo=Symbol.toStringTag;Tn[Eo]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Binary"))(Tn.prototype);let On=class extends A{constructor(){super()}get typeId(){return h.Utf8}toString(){return"Utf8"}};To=Symbol.toStringTag;On[To]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Utf8"))(On.prototype);let An=class extends A{constructor(){super()}get typeId(){return h.Bool}toString(){return"Bool"}};Oo=Symbol.toStringTag;An[Oo]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Bool"))(An.prototype);let Rn=class extends A{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return h.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ao=Symbol.toStringTag;Rn[Ao]=(r=>(r.scale=null,r.precision=null,r.ArrayType=Uint32Array,r[Symbol.toStringTag]="Decimal"))(Rn.prototype);class Fn extends A{constructor(t){super(),this.unit=t}get typeId(){return h.Date}toString(){return`Date${(this.unit+1)*32}<${Fe[this.unit]}>`}}Ro=Symbol.toStringTag;Fn[Ro]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Date"))(Fn.prototype);class qr extends A{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return h.Time}toString(){return`Time${this.bitWidth}<${Q[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Kr}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Fo=Symbol.toStringTag;qr[Fo]=(r=>(r.unit=null,r.bitWidth=null,r[Symbol.toStringTag]="Time"))(qr.prototype);class Bn extends A{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return h.Timestamp}toString(){return`Timestamp<${Q[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Bo=Symbol.toStringTag;Bn[Bo]=(r=>(r.unit=null,r.timezone=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Timestamp"))(Bn.prototype);class Nn extends A{constructor(t){super(),this.unit=t}get typeId(){return h.Interval}toString(){return`Interval<${Ve[this.unit]}>`}}No=Symbol.toStringTag;Nn[No]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Interval"))(Nn.prototype);let Dn=class extends A{constructor(t){super(),this.children=[t]}get typeId(){return h.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Do=Symbol.toStringTag;Dn[Do]=(r=>(r.children=null,r[Symbol.toStringTag]="List"))(Dn.prototype);class Et extends A{constructor(t){super(),this.children=t}get typeId(){return h.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Lo=Symbol.toStringTag;Et[Lo]=(r=>(r.children=null,r[Symbol.toStringTag]="Struct"))(Et.prototype);class Ln extends A{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((s,i,o)=>(s[i]=o)&&s||s,Object.create(null))}get typeId(){return h.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}ko=Symbol.toStringTag;Ln[ko]=(r=>(r.mode=null,r.typeIds=null,r.children=null,r.typeIdToChildIndex=null,r.ArrayType=Int8Array,r[Symbol.toStringTag]="Union"))(Ln.prototype);let kn=class extends A{constructor(t){super(),this.byteWidth=t}get typeId(){return h.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Mo=Symbol.toStringTag;kn[Mo]=(r=>(r.byteWidth=null,r.ArrayType=Uint8Array,r[Symbol.toStringTag]="FixedSizeBinary"))(kn.prototype);let Mn=class extends A{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return h.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Co=Symbol.toStringTag;Mn[Co]=(r=>(r.children=null,r.listSize=null,r[Symbol.toStringTag]="FixedSizeList"))(Mn.prototype);class Cn extends A{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return h.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Uo=Symbol.toStringTag;Cn[Uo]=(r=>(r.children=null,r.keysSorted=null,r[Symbol.toStringTag]="Map_"))(Cn.prototype);const ml=(r=>()=>++r)(-1);class Tr extends A{constructor(t,e,n,s){super(),this.indices=e,this.dictionary=t,this.isOrdered=s||!1,this.id=n==null?ml():typeof n=="number"?n:n.low}get typeId(){return h.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Po=Symbol.toStringTag;Tr[Po]=(r=>(r.id=null,r.indices=null,r.isOrdered=null,r.dictionary=null,r[Symbol.toStringTag]="Dictionary"))(Tr.prototype);function Se(r){const t=r;switch(r.typeId){case h.Decimal:return r.bitWidth/32;case h.Timestamp:return 2;case h.Date:return 1+t.unit;case h.Interval:return 1+t.unit;case h.FixedSizeList:return t.listSize;case h.FixedSizeBinary:return t.byteWidth;default:return 1}}class Y{visitMany(t,...e){return t.map((n,s)=>this.visit(n,...e.map(i=>i[s])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return _l(this,t,e)}getVisitFnByTypeId(t,e=!0){return hr(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function _l(r,t,e=!0){return typeof t=="number"?hr(r,t,e):typeof t=="string"&&t in h?hr(r,h[t],e):t&&t instanceof A?hr(r,Di(t),e):t!=null&&t.type&&t.type instanceof A?hr(r,Di(t.type),e):hr(r,h.NONE,e)}function hr(r,t,e=!0){let n=null;switch(t){case h.Null:n=r.visitNull;break;case h.Bool:n=r.visitBool;break;case h.Int:n=r.visitInt;break;case h.Int8:n=r.visitInt8||r.visitInt;break;case h.Int16:n=r.visitInt16||r.visitInt;break;case h.Int32:n=r.visitInt32||r.visitInt;break;case h.Int64:n=r.visitInt64||r.visitInt;break;case h.Uint8:n=r.visitUint8||r.visitInt;break;case h.Uint16:n=r.visitUint16||r.visitInt;break;case h.Uint32:n=r.visitUint32||r.visitInt;break;case h.Uint64:n=r.visitUint64||r.visitInt;break;case h.Float:n=r.visitFloat;break;case h.Float16:n=r.visitFloat16||r.visitFloat;break;case h.Float32:n=r.visitFloat32||r.visitFloat;break;case h.Float64:n=r.visitFloat64||r.visitFloat;break;case h.Utf8:n=r.visitUtf8;break;case h.Binary:n=r.visitBinary;break;case h.FixedSizeBinary:n=r.visitFixedSizeBinary;break;case h.Date:n=r.visitDate;break;case h.DateDay:n=r.visitDateDay||r.visitDate;break;case h.DateMillisecond:n=r.visitDateMillisecond||r.visitDate;break;case h.Timestamp:n=r.visitTimestamp;break;case h.TimestampSecond:n=r.visitTimestampSecond||r.visitTimestamp;break;case h.TimestampMillisecond:n=r.visitTimestampMillisecond||r.visitTimestamp;break;case h.TimestampMicrosecond:n=r.visitTimestampMicrosecond||r.visitTimestamp;break;case h.TimestampNanosecond:n=r.visitTimestampNanosecond||r.visitTimestamp;break;case h.Time:n=r.visitTime;break;case h.TimeSecond:n=r.visitTimeSecond||r.visitTime;break;case h.TimeMillisecond:n=r.visitTimeMillisecond||r.visitTime;break;case h.TimeMicrosecond:n=r.visitTimeMicrosecond||r.visitTime;break;case h.TimeNanosecond:n=r.visitTimeNanosecond||r.visitTime;break;case h.Decimal:n=r.visitDecimal;break;case h.List:n=r.visitList;break;case h.Struct:n=r.visitStruct;break;case h.Union:n=r.visitUnion;break;case h.DenseUnion:n=r.visitDenseUnion||r.visitUnion;break;case h.SparseUnion:n=r.visitSparseUnion||r.visitUnion;break;case h.Dictionary:n=r.visitDictionary;break;case h.Interval:n=r.visitInterval;break;case h.IntervalDayTime:n=r.visitIntervalDayTime||r.visitInterval;break;case h.IntervalYearMonth:n=r.visitIntervalYearMonth||r.visitInterval;break;case h.FixedSizeList:n=r.visitFixedSizeList;break;case h.Map:n=r.visitMap;break}if(typeof n=="function")return n;if(!e)return()=>null;throw new Error(`Unrecognized type '${h[t]}'`)}function Di(r){switch(r.typeId){case h.Null:return h.Null;case h.Int:{const{bitWidth:t,isSigned:e}=r;switch(t){case 8:return e?h.Int8:h.Uint8;case 16:return e?h.Int16:h.Uint16;case 32:return e?h.Int32:h.Uint32;case 64:return e?h.Int64:h.Uint64}return h.Int}case h.Float:switch(r.precision){case Bt.HALF:return h.Float16;case Bt.SINGLE:return h.Float32;case Bt.DOUBLE:return h.Float64}return h.Float;case h.Binary:return h.Binary;case h.Utf8:return h.Utf8;case h.Bool:return h.Bool;case h.Decimal:return h.Decimal;case h.Time:switch(r.unit){case Q.SECOND:return h.TimeSecond;case Q.MILLISECOND:return h.TimeMillisecond;case Q.MICROSECOND:return h.TimeMicrosecond;case Q.NANOSECOND:return h.TimeNanosecond}return h.Time;case h.Timestamp:switch(r.unit){case Q.SECOND:return h.TimestampSecond;case Q.MILLISECOND:return h.TimestampMillisecond;case Q.MICROSECOND:return h.TimestampMicrosecond;case Q.NANOSECOND:return h.TimestampNanosecond}return h.Timestamp;case h.Date:switch(r.unit){case Fe.DAY:return h.DateDay;case Fe.MILLISECOND:return h.DateMillisecond}return h.Date;case h.Interval:switch(r.unit){case Ve.DAY_TIME:return h.IntervalDayTime;case Ve.YEAR_MONTH:return h.IntervalYearMonth}return h.Interval;case h.Map:return h.Map;case h.List:return h.List;case h.Struct:return h.Struct;case h.Union:switch(r.mode){case Ut.Dense:return h.DenseUnion;case Ut.Sparse:return h.SparseUnion}return h.Union;case h.FixedSizeBinary:return h.FixedSizeBinary;case h.FixedSizeList:return h.FixedSizeList;case h.Dictionary:return h.Dictionary}throw new Error(`Unrecognized type '${h[r.typeId]}'`)}Y.prototype.visitInt8=null;Y.prototype.visitInt16=null;Y.prototype.visitInt32=null;Y.prototype.visitInt64=null;Y.prototype.visitUint8=null;Y.prototype.visitUint16=null;Y.prototype.visitUint32=null;Y.prototype.visitUint64=null;Y.prototype.visitFloat16=null;Y.prototype.visitFloat32=null;Y.prototype.visitFloat64=null;Y.prototype.visitDateDay=null;Y.prototype.visitDateMillisecond=null;Y.prototype.visitTimestampSecond=null;Y.prototype.visitTimestampMillisecond=null;Y.prototype.visitTimestampMicrosecond=null;Y.prototype.visitTimestampNanosecond=null;Y.prototype.visitTimeSecond=null;Y.prototype.visitTimeMillisecond=null;Y.prototype.visitTimeMicrosecond=null;Y.prototype.visitTimeNanosecond=null;Y.prototype.visitDenseUnion=null;Y.prototype.visitSparseUnion=null;Y.prototype.visitIntervalDayTime=null;Y.prototype.visitIntervalYearMonth=null;const xo=new Float64Array(1),dr=new Uint32Array(xo.buffer);function Vo(r){const t=(r&31744)>>10,e=(r&1023)/1024,n=Math.pow(-1,(r&32768)>>15);switch(t){case 31:return n*(e?Number.NaN:1/0);case 0:return n*(e?6103515625e-14*e:0)}return n*Math.pow(2,t-15)*(1+e)}function wl(r){if(r!==r)return 32256;xo[0]=r;const t=(dr[1]&2147483648)>>16&65535;let e=dr[1]&2146435072,n=0;return e>=1089470464?dr[0]>0?e=31744:(e=(e&2080374784)>>16,n=(dr[1]&1048575)>>10):e<=1056964608?(n=1048576+(dr[1]&1048575),n=1048576+(n<<(e>>20)-998)>>21,e=0):(e=e-1056964608>>10,n=(dr[1]&1048575)+512>>10),t|e|n&65535}class L extends Y{}function P(r){return(t,e,n)=>{if(t.setValid(e,n!=null))return r(t,e,n)}}const vl=(r,t,e)=>{r[t]=Math.trunc(e/864e5)},$s=(r,t,e)=>{r[t]=Math.trunc(e%4294967296),r[t+1]=Math.trunc(e/4294967296)},Il=(r,t,e)=>{r[t]=Math.trunc(e*1e3%4294967296),r[t+1]=Math.trunc(e*1e3/4294967296)},Sl=(r,t,e)=>{r[t]=Math.trunc(e*1e6%4294967296),r[t+1]=Math.trunc(e*1e6/4294967296)},jo=(r,t,e,n)=>{if(e+1<t.length){const{[e]:s,[e+1]:i}=t;r.set(n.subarray(0,i-s),s)}},El=({offset:r,values:t},e,n)=>{const s=r+e;n?t[s>>3]|=1<<s%8:t[s>>3]&=~(1<<s%8)},Be=({values:r},t,e)=>{r[t]=e},Gs=({values:r},t,e)=>{r[t]=e},zo=({values:r},t,e)=>{r[t]=wl(e)},Tl=(r,t,e)=>{switch(r.type.precision){case Bt.HALF:return zo(r,t,e);case Bt.SINGLE:case Bt.DOUBLE:return Gs(r,t,e)}},$o=({values:r},t,e)=>{vl(r,t,e.valueOf())},Go=({values:r},t,e)=>{$s(r,t*2,e.valueOf())},Ol=({stride:r,values:t},e,n)=>{t.set(n.subarray(0,r),r*e)},Al=({values:r,valueOffsets:t},e,n)=>jo(r,t,e,n),Rl=({values:r,valueOffsets:t},e,n)=>{jo(r,t,e,Ps(n))},Fl=(r,t,e)=>{r.type.unit===Fe.DAY?$o(r,t,e):Go(r,t,e)},Wo=({values:r},t,e)=>$s(r,t*2,e/1e3),Yo=({values:r},t,e)=>$s(r,t*2,e),qo=({values:r},t,e)=>Il(r,t*2,e),Ho=({values:r},t,e)=>Sl(r,t*2,e),Bl=(r,t,e)=>{switch(r.type.unit){case Q.SECOND:return Wo(r,t,e);case Q.MILLISECOND:return Yo(r,t,e);case Q.MICROSECOND:return qo(r,t,e);case Q.NANOSECOND:return Ho(r,t,e)}},Qo=({values:r},t,e)=>{r[t]=e},Ko=({values:r},t,e)=>{r[t]=e},Jo=({values:r},t,e)=>{r[t]=e},Zo=({values:r},t,e)=>{r[t]=e},Nl=(r,t,e)=>{switch(r.type.unit){case Q.SECOND:return Qo(r,t,e);case Q.MILLISECOND:return Ko(r,t,e);case Q.MICROSECOND:return Jo(r,t,e);case Q.NANOSECOND:return Zo(r,t,e)}},Dl=({values:r,stride:t},e,n)=>{r.set(n.subarray(0,t),t*e)},Ll=(r,t,e)=>{const n=r.children[0],s=r.valueOffsets,i=Qt.getVisitFn(n);if(Array.isArray(e))for(let o=-1,a=s[t],c=s[t+1];a<c;)i(n,a++,e[++o]);else for(let o=-1,a=s[t],c=s[t+1];a<c;)i(n,a++,e.get(++o))},kl=(r,t,e)=>{const n=r.children[0],{valueOffsets:s}=r,i=Qt.getVisitFn(n);let{[t]:o,[t+1]:a}=s;const c=e instanceof Map?e.entries():Object.entries(e);for(const l of c)if(i(n,o,l),++o>=a)break},Ml=(r,t)=>(e,n,s,i)=>n&&e(n,r,t[i]),Cl=(r,t)=>(e,n,s,i)=>n&&e(n,r,t.get(i)),Ul=(r,t)=>(e,n,s,i)=>n&&e(n,r,t.get(s.name)),Pl=(r,t)=>(e,n,s,i)=>n&&e(n,r,t[s.name]),xl=(r,t,e)=>{const n=r.type.children.map(i=>Qt.getVisitFn(i.type)),s=e instanceof Map?Ul(t,e):e instanceof J?Cl(t,e):Array.isArray(e)?Ml(t,e):Pl(t,e);r.type.children.forEach((i,o)=>s(n[o],r.children[o],i,o))},Vl=(r,t,e)=>{r.type.mode===Ut.Dense?Xo(r,t,e):ta(r,t,e)},Xo=(r,t,e)=>{const n=r.type.typeIdToChildIndex[r.typeIds[t]],s=r.children[n];Qt.visit(s,r.valueOffsets[t],e)},ta=(r,t,e)=>{const n=r.type.typeIdToChildIndex[r.typeIds[t]],s=r.children[n];Qt.visit(s,t,e)},jl=(r,t,e)=>{var n;(n=r.dictionary)===null||n===void 0||n.set(r.values[t],e)},zl=(r,t,e)=>{r.type.unit===Ve.DAY_TIME?ea(r,t,e):ra(r,t,e)},ea=({values:r},t,e)=>{r.set(e.subarray(0,2),2*t)},ra=({values:r},t,e)=>{r[t]=e[0]*12+e[1]%12},$l=(r,t,e)=>{const{stride:n}=r,s=r.children[0],i=Qt.getVisitFn(s);if(Array.isArray(e))for(let o=-1,a=t*n;++o<n;)i(s,a+o,e[o]);else for(let o=-1,a=t*n;++o<n;)i(s,a+o,e.get(o))};L.prototype.visitBool=P(El);L.prototype.visitInt=P(Be);L.prototype.visitInt8=P(Be);L.prototype.visitInt16=P(Be);L.prototype.visitInt32=P(Be);L.prototype.visitInt64=P(Be);L.prototype.visitUint8=P(Be);L.prototype.visitUint16=P(Be);L.prototype.visitUint32=P(Be);L.prototype.visitUint64=P(Be);L.prototype.visitFloat=P(Tl);L.prototype.visitFloat16=P(zo);L.prototype.visitFloat32=P(Gs);L.prototype.visitFloat64=P(Gs);L.prototype.visitUtf8=P(Rl);L.prototype.visitBinary=P(Al);L.prototype.visitFixedSizeBinary=P(Ol);L.prototype.visitDate=P(Fl);L.prototype.visitDateDay=P($o);L.prototype.visitDateMillisecond=P(Go);L.prototype.visitTimestamp=P(Bl);L.prototype.visitTimestampSecond=P(Wo);L.prototype.visitTimestampMillisecond=P(Yo);L.prototype.visitTimestampMicrosecond=P(qo);L.prototype.visitTimestampNanosecond=P(Ho);L.prototype.visitTime=P(Nl);L.prototype.visitTimeSecond=P(Qo);L.prototype.visitTimeMillisecond=P(Ko);L.prototype.visitTimeMicrosecond=P(Jo);L.prototype.visitTimeNanosecond=P(Zo);L.prototype.visitDecimal=P(Dl);L.prototype.visitList=P(Ll);L.prototype.visitStruct=P(xl);L.prototype.visitUnion=P(Vl);L.prototype.visitDenseUnion=P(Xo);L.prototype.visitSparseUnion=P(ta);L.prototype.visitDictionary=P(jl);L.prototype.visitInterval=P(zl);L.prototype.visitIntervalDayTime=P(ea);L.prototype.visitIntervalYearMonth=P(ra);L.prototype.visitFixedSizeList=P($l);L.prototype.visitMap=P(kl);const Qt=new L,Jt=Symbol.for("parent"),_r=Symbol.for("rowIndex");class Ws{constructor(t,e){return this[Jt]=t,this[_r]=e,new Proxy(this,new Wl)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[_r],e=this[Jt],n=e.type.children,s={};for(let i=-1,o=n.length;++i<o;)s[n[i].name]=Dt.visit(e.children[i],t);return s}toString(){return`{${[...this].map(([t,e])=>`${$r(t)}: ${$r(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Gl(this[Jt],this[_r])}}class Gl{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Dt.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Ws.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Jt]:{writable:!0,enumerable:!1,configurable:!1,value:null},[_r]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Wl{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Jt].type.children.map(e=>e.name)}has(t,e){return t[Jt].type.children.findIndex(n=>n.name===e)!==-1}getOwnPropertyDescriptor(t,e){if(t[Jt].type.children.findIndex(n=>n.name===e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Jt].type.children.findIndex(s=>s.name===e);if(n!==-1){const s=Dt.visit(t[Jt].children[n],t[_r]);return Reflect.set(t,e,s),s}}set(t,e,n){const s=t[Jt].type.children.findIndex(i=>i.name===e);return s!==-1?(Qt.visit(t[Jt].children[s],t[_r],n),Reflect.set(t,e,n)):Reflect.has(t,e)||typeof e=="symbol"?Reflect.set(t,e,n):!1}}class R extends Y{}function k(r){return(t,e)=>t.getValid(e)?r(t,e):null}const Yl=(r,t)=>864e5*r[t],Ys=(r,t)=>4294967296*r[t+1]+(r[t]>>>0),ql=(r,t)=>4294967296*(r[t+1]/1e3)+(r[t]>>>0)/1e3,Hl=(r,t)=>4294967296*(r[t+1]/1e6)+(r[t]>>>0)/1e6,na=r=>new Date(r),Ql=(r,t)=>na(Yl(r,t)),Kl=(r,t)=>na(Ys(r,t)),Jl=(r,t)=>null,sa=(r,t,e)=>{if(e+1>=t.length)return null;const n=t[e],s=t[e+1];return r.subarray(n,s)},Zl=({offset:r,values:t},e)=>{const n=r+e;return(t[n>>3]&1<<n%8)!==0},ia=({values:r},t)=>Ql(r,t),oa=({values:r},t)=>Kl(r,t*2),We=({stride:r,values:t},e)=>t[r*e],Xl=({stride:r,values:t},e)=>Vo(t[r*e]),aa=({values:r},t)=>r[t],tu=({stride:r,values:t},e)=>t.subarray(r*e,r*(e+1)),eu=({values:r,valueOffsets:t},e)=>sa(r,t,e),ru=({values:r,valueOffsets:t},e)=>{const n=sa(r,t,e);return n!==null?_s(n):null},nu=({values:r},t)=>r[t],su=({type:r,values:t},e)=>r.precision!==Bt.HALF?t[e]:Vo(t[e]),iu=(r,t)=>r.type.unit===Fe.DAY?ia(r,t):oa(r,t),ca=({values:r},t)=>1e3*Ys(r,t*2),la=({values:r},t)=>Ys(r,t*2),ua=({values:r},t)=>ql(r,t*2),da=({values:r},t)=>Hl(r,t*2),ou=(r,t)=>{switch(r.type.unit){case Q.SECOND:return ca(r,t);case Q.MILLISECOND:return la(r,t);case Q.MICROSECOND:return ua(r,t);case Q.NANOSECOND:return da(r,t)}},ha=({values:r},t)=>r[t],ba=({values:r},t)=>r[t],fa=({values:r},t)=>r[t],ga=({values:r},t)=>r[t],au=(r,t)=>{switch(r.type.unit){case Q.SECOND:return ha(r,t);case Q.MILLISECOND:return ba(r,t);case Q.MICROSECOND:return fa(r,t);case Q.NANOSECOND:return ga(r,t)}},cu=({values:r,stride:t},e)=>zs.decimal(r.subarray(t*e,t*(e+1))),lu=(r,t)=>{const{valueOffsets:e,stride:n,children:s}=r,{[t*n]:i,[t*n+1]:o}=e,c=s[0].slice(i,o-i);return new J([c])},uu=(r,t)=>{const{valueOffsets:e,children:n}=r,{[t]:s,[t+1]:i}=e,o=n[0];return new qs(o.slice(s,i-s))},du=(r,t)=>new Ws(r,t),hu=(r,t)=>r.type.mode===Ut.Dense?pa(r,t):ya(r,t),pa=(r,t)=>{const e=r.type.typeIdToChildIndex[r.typeIds[t]],n=r.children[e];return Dt.visit(n,r.valueOffsets[t])},ya=(r,t)=>{const e=r.type.typeIdToChildIndex[r.typeIds[t]],n=r.children[e];return Dt.visit(n,t)},bu=(r,t)=>{var e;return(e=r.dictionary)===null||e===void 0?void 0:e.get(r.values[t])},fu=(r,t)=>r.type.unit===Ve.DAY_TIME?ma(r,t):_a(r,t),ma=({values:r},t)=>r.subarray(2*t,2*(t+1)),_a=({values:r},t)=>{const e=r[t],n=new Int32Array(2);return n[0]=Math.trunc(e/12),n[1]=Math.trunc(e%12),n},gu=(r,t)=>{const{stride:e,children:n}=r,i=n[0].slice(t*e,e);return new J([i])};R.prototype.visitNull=k(Jl);R.prototype.visitBool=k(Zl);R.prototype.visitInt=k(nu);R.prototype.visitInt8=k(We);R.prototype.visitInt16=k(We);R.prototype.visitInt32=k(We);R.prototype.visitInt64=k(aa);R.prototype.visitUint8=k(We);R.prototype.visitUint16=k(We);R.prototype.visitUint32=k(We);R.prototype.visitUint64=k(aa);R.prototype.visitFloat=k(su);R.prototype.visitFloat16=k(Xl);R.prototype.visitFloat32=k(We);R.prototype.visitFloat64=k(We);R.prototype.visitUtf8=k(ru);R.prototype.visitBinary=k(eu);R.prototype.visitFixedSizeBinary=k(tu);R.prototype.visitDate=k(iu);R.prototype.visitDateDay=k(ia);R.prototype.visitDateMillisecond=k(oa);R.prototype.visitTimestamp=k(ou);R.prototype.visitTimestampSecond=k(ca);R.prototype.visitTimestampMillisecond=k(la);R.prototype.visitTimestampMicrosecond=k(ua);R.prototype.visitTimestampNanosecond=k(da);R.prototype.visitTime=k(au);R.prototype.visitTimeSecond=k(ha);R.prototype.visitTimeMillisecond=k(ba);R.prototype.visitTimeMicrosecond=k(fa);R.prototype.visitTimeNanosecond=k(ga);R.prototype.visitDecimal=k(cu);R.prototype.visitList=k(lu);R.prototype.visitStruct=k(du);R.prototype.visitUnion=k(hu);R.prototype.visitDenseUnion=k(pa);R.prototype.visitSparseUnion=k(ya);R.prototype.visitDictionary=k(bu);R.prototype.visitInterval=k(fu);R.prototype.visitIntervalDayTime=k(ma);R.prototype.visitIntervalYearMonth=k(_a);R.prototype.visitFixedSizeList=k(gu);R.prototype.visitMap=k(uu);const Dt=new R,le=Symbol.for("keys"),wr=Symbol.for("vals");class qs{constructor(t){return this[le]=new J([t.children[0]]).memoize(),this[wr]=t.children[1],new Proxy(this,new yu)}[Symbol.iterator](){return new pu(this[le],this[wr])}get size(){return this[le].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[le],e=this[wr],n={};for(let s=-1,i=t.length;++s<i;)n[t.get(s)]=Dt.visit(e,s);return n}toString(){return`{${[...this].map(([t,e])=>`${$r(t)}: ${$r(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class pu{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Dt.visit(this.vals,t)]})}}class yu{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[le].toArray().map(String)}has(t,e){return t[le].includes(e)}getOwnPropertyDescriptor(t,e){if(t[le].indexOf(e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[le].indexOf(e);if(n!==-1){const s=Dt.visit(Reflect.get(t,wr),n);return Reflect.set(t,e,s),s}}set(t,e,n){const s=t[le].indexOf(e);return s!==-1?(Qt.visit(Reflect.get(t,wr),s,n),Reflect.set(t,e,n)):Reflect.has(t,e)?Reflect.set(t,e,n):!1}}Object.defineProperties(qs.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[le]:{writable:!0,enumerable:!1,configurable:!1,value:null},[wr]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Li;function wa(r,t,e,n){const{length:s=0}=r;let i=typeof t!="number"?0:t,o=typeof e!="number"?s:e;return i<0&&(i=(i%s+s)%s),o<0&&(o=(o%s+s)%s),o<i&&(Li=i,i=o,o=Li),o>s&&(o=s),n?n(r,i,o):[i,o]}const ki=r=>r!==r;function Ur(r){if(typeof r!=="object"||r===null)return ki(r)?ki:e=>e===r;if(r instanceof Date){const e=r.valueOf();return n=>n instanceof Date?n.valueOf()===e:!1}return ArrayBuffer.isView(r)?e=>e?ul(r,e):!1:r instanceof Map?_u(r):Array.isArray(r)?mu(r):r instanceof J?wu(r):vu(r,!0)}function mu(r){const t=[];for(let e=-1,n=r.length;++e<n;)t[e]=Ur(r[e]);return rs(t)}function _u(r){let t=-1;const e=[];for(const n of r.values())e[++t]=Ur(n);return rs(e)}function wu(r){const t=[];for(let e=-1,n=r.length;++e<n;)t[e]=Ur(r.get(e));return rs(t)}function vu(r,t=!1){const e=Object.keys(r);if(!t&&e.length===0)return()=>!1;const n=[];for(let s=-1,i=e.length;++s<i;)n[s]=Ur(r[e[s]]);return rs(n,e)}function rs(r,t){return e=>{if(!e||typeof e!="object")return!1;switch(e.constructor){case Array:return Iu(r,e);case Map:return Mi(r,e,e.keys());case qs:case Ws:case Object:case void 0:return Mi(r,e,t||Object.keys(e))}return e instanceof J?Su(r,e):!1}}function Iu(r,t){const e=r.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!r[n](t[n]))return!1;return!0}function Su(r,t){const e=r.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!r[n](t.get(n)))return!1;return!0}function Mi(r,t,e){const n=e[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),i=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=r.length;let c=i.next(),l=n.next(),u=s.next();for(;o<a&&!l.done&&!u.done&&!c.done&&!(l.value!==u.value||!r[o](c.value));++o,l=n.next(),u=s.next(),c=i.next());return o===a&&l.done&&u.done&&c.done?!0:(n.return&&n.return(),s.return&&s.return(),i.return&&i.return(),!1)}function va(r,t,e,n){return(e&1<<n)!==0}function Eu(r,t,e,n){return(e&1<<n)>>n}function Hs(r,t,e){const n=e.byteLength+7&-8;if(r>0||e.byteLength<n){const s=new Uint8Array(n);return s.set(r%8===0?e.subarray(r>>3):Un(new Qs(e,r,t,null,va)).subarray(0,n)),s}return e}function Un(r){const t=[];let e=0,n=0,s=0;for(const o of r)o&&(s|=1<<n),++n===8&&(t[e++]=s,s=n=0);(e===0||n>0)&&(t[e++]=s);const i=new Uint8Array(t.length+7&-8);return i.set(t),i}class Qs{constructor(t,e,n,s,i){this.bytes=t,this.length=n,this.context=s,this.get=i,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ss(r,t,e){if(e-t<=0)return 0;if(e-t<8){let i=0;for(const o of new Qs(r,t,e-t,r,Eu))i+=o;return i}const n=e>>3<<3,s=t+(t%8===0?0:8-t%8);return Ss(r,t,s)+Ss(r,n,e)+Tu(r,s>>3,n-s>>3)}function Tu(r,t,e){let n=0,s=Math.trunc(t);const i=new DataView(r.buffer,r.byteOffset,r.byteLength),o=e===void 0?r.byteLength:s+e;for(;o-s>=4;)n+=ls(i.getUint32(s)),s+=4;for(;o-s>=2;)n+=ls(i.getUint16(s)),s+=2;for(;o-s>=1;)n+=ls(i.getUint8(s)),s+=1;return n}function ls(r){let t=Math.trunc(r);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Ou=-1;class rt{constructor(t,e,n,s,i,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let c;i instanceof rt?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=Se(t),i&&((c=i[0])&&(this.valueOffsets=c),(c=i[1])&&(this.values=c),(c=i[2])&&(this.nullBitmap=c),(c=i[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:s,typeIds:i}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),s&&(t+=s.byteLength),i&&(t+=i.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,e;return t<=Ou&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-Ss(e,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return(this.nullBitmap[e>>3]&1<<e%8)!==0}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:n,offset:s}=this,i=s+t>>3,o=(s+t)%8,a=n[i]>>o&1;return e?a===0&&(n[i]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(n[i]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,s=this._nullCount,i=this,o=this.children){return new rt(t,e,n,s,i,o,this.dictionary)}slice(t,e){const{stride:n,typeId:s,children:i}=this,o=+(this._nullCount===0)-1,a=s===16?n:1,c=this._sliceBuffers(t,e,n,s);return this.clone(this.type,this.offset+t,e,o,c,i.length===0||this.valueOffsets?i:this._sliceChildren(i,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===h.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,s=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);s[e>>3]=(1<<e-(e&-8))-1,n>0&&s.set(Hs(this.offset,e,this.nullBitmap),0);const i=this.buffers;return i[Ie.VALIDITY]=s,this.clone(this.type,0,t,n+(t-e),i)}_sliceBuffers(t,e,n,s){let i;const{buffers:o}=this;return(i=o[Ie.TYPE])&&(o[Ie.TYPE]=i.subarray(t,t+e)),(i=o[Ie.OFFSET])&&(o[Ie.OFFSET]=i.subarray(t,t+e+1))||(i=o[Ie.DATA])&&(o[Ie.DATA]=s===6?i:i.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map(s=>s.slice(e,n))}}rt.prototype.children=Object.freeze([]);class zr extends Y{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:e,["offset"]:n=0,["length"]:s=0}=t;return new rt(e,n,s,0)}visitBool(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitInt(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitFloat(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitUtf8(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.data),i=H(t.nullBitmap),o=Vr(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new rt(e,n,a,c,[o,s,i])}visitBinary(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.data),i=H(t.nullBitmap),o=Vr(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new rt(e,n,a,c,[o,s,i])}visitFixedSizeBinary(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitDate(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitTimestamp(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitTime(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitDecimal(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitList(t){const{["type"]:e,["offset"]:n=0,["child"]:s}=t,i=H(t.nullBitmap),o=Vr(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new rt(e,n,a,c,[o,void 0,i],[s])}visitStruct(t){const{["type"]:e,["offset"]:n=0,["children"]:s=[]}=t,i=H(t.nullBitmap),{length:o=s.reduce((c,{length:l})=>Math.max(c,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,void 0,i],s)}visitUnion(t){const{["type"]:e,["offset"]:n=0,["children"]:s=[]}=t,i=H(t.nullBitmap),o=tt(e.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(A.isSparseUnion(e))return new rt(e,n,a,c,[void 0,void 0,i,o],s);const l=Vr(t.valueOffsets);return new rt(e,n,a,c,[l,void 0,i,o],s)}visitDictionary(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.indices.ArrayType,t.data),{["dictionary"]:o=new J([new zr().visit({type:e.dictionary})])}=t,{["length"]:a=i.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new rt(e,n,a,c,[void 0,i,s],[],o)}visitInterval(t){const{["type"]:e,["offset"]:n=0}=t,s=H(t.nullBitmap),i=tt(e.ArrayType,t.data),{["length"]:o=i.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,i,s])}visitFixedSizeList(t){const{["type"]:e,["offset"]:n=0,["child"]:s=new zr().visit({type:e.valueType})}=t,i=H(t.nullBitmap),{["length"]:o=s.length/Se(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new rt(e,n,o,a,[void 0,void 0,i],[s])}visitMap(t){const{["type"]:e,["offset"]:n=0,["child"]:s=new zr().visit({type:e.childType})}=t,i=H(t.nullBitmap),o=Vr(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new rt(e,n,a,c,[o,void 0,i],[s])}}function W(r){return new zr().visit(r)}class Ci{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Ia(r){return r.reduce((t,e)=>t+e.nullCount,0)}function Sa(r){return r.reduce((t,e,n)=>(t[n+1]=t[n]+e.length,t),new Uint32Array(r.length+1))}function Ea(r,t,e,n){const s=[];for(let i=-1,o=r.length;++i<o;){const a=r[i],c=t[i],{length:l}=a;if(c>=n)break;if(e>=c+l)continue;if(c>=e&&c+l<=n){s.push(a);continue}const u=Math.max(0,e-c),b=Math.min(n-c,l);s.push(a.slice(u,b-u))}return s.length===0&&s.push(r[0].slice(0,0)),s}function Ks(r,t,e,n){let s=0,i=0,o=t.length-1;do{if(s>=o-1)return e<t[o]?n(r,s,e-t[s]):null;i=s+Math.trunc((o-s)*.5),e<t[i]?o=i:s=i}while(s<o)}function Js(r,t){return r.getValid(t)}function vr(r){function t(e,n,s){return r(e[n],s)}return function(e){const n=this.data;return Ks(n,this._offsets,e,t)}}function Ta(r){let t;function e(n,s,i){return r(n[s],i,t)}return function(n,s){const i=this.data;t=s;const o=Ks(i,this._offsets,n,e);return t=void 0,o}}function Oa(r){let t;function e(n,s,i){let o=i,a=0,c=0;for(let l=s-1,u=n.length;++l<u;){const b=n[l];if(~(a=r(b,t,o)))return c+a;o=0,c+=b.length}return-1}return function(n,s){t=n;const i=this.data,o=typeof s!="number"?e(i,0,0):Ks(i,this._offsets,s,e);return t=void 0,o}}class F extends Y{}function Au(r,t){return t===null&&r.length>0?0:-1}function Ru(r,t){const{nullBitmap:e}=r;if(!e||r.nullCount<=0)return-1;let n=0;for(const s of new Qs(e,r.offset+(t||0),r.length,e,va)){if(!s)return n;++n}return-1}function j(r,t,e){if(t===void 0)return-1;if(t===null)return Ru(r,e);const n=Dt.getVisitFn(r),s=Ur(t);for(let i=(e||0)-1,o=r.length;++i<o;)if(s(n(r,i)))return i;return-1}function Aa(r,t,e){const n=Dt.getVisitFn(r),s=Ur(t);for(let i=(e||0)-1,o=r.length;++i<o;)if(s(n(r,i)))return i;return-1}F.prototype.visitNull=Au;F.prototype.visitBool=j;F.prototype.visitInt=j;F.prototype.visitInt8=j;F.prototype.visitInt16=j;F.prototype.visitInt32=j;F.prototype.visitInt64=j;F.prototype.visitUint8=j;F.prototype.visitUint16=j;F.prototype.visitUint32=j;F.prototype.visitUint64=j;F.prototype.visitFloat=j;F.prototype.visitFloat16=j;F.prototype.visitFloat32=j;F.prototype.visitFloat64=j;F.prototype.visitUtf8=j;F.prototype.visitBinary=j;F.prototype.visitFixedSizeBinary=j;F.prototype.visitDate=j;F.prototype.visitDateDay=j;F.prototype.visitDateMillisecond=j;F.prototype.visitTimestamp=j;F.prototype.visitTimestampSecond=j;F.prototype.visitTimestampMillisecond=j;F.prototype.visitTimestampMicrosecond=j;F.prototype.visitTimestampNanosecond=j;F.prototype.visitTime=j;F.prototype.visitTimeSecond=j;F.prototype.visitTimeMillisecond=j;F.prototype.visitTimeMicrosecond=j;F.prototype.visitTimeNanosecond=j;F.prototype.visitDecimal=j;F.prototype.visitList=j;F.prototype.visitStruct=j;F.prototype.visitUnion=j;F.prototype.visitDenseUnion=Aa;F.prototype.visitSparseUnion=Aa;F.prototype.visitDictionary=j;F.prototype.visitInterval=j;F.prototype.visitIntervalDayTime=j;F.prototype.visitIntervalYearMonth=j;F.prototype.visitFixedSizeList=j;F.prototype.visitMap=j;const Pn=new F;class B extends Y{}function M(r){const{type:t}=r;if(r.nullCount===0&&r.stride===1&&(t.typeId===h.Timestamp||t instanceof ze&&t.bitWidth!==64||t instanceof qr&&t.bitWidth!==64||t instanceof Yr&&t.precision!==Bt.HALF))return new Ci(r.data.length,n=>{const s=r.data[n];return s.values.subarray(0,s.length)[Symbol.iterator]()});let e=0;return new Ci(r.data.length,n=>{const i=r.data[n].length,o=r.slice(e,e+i);return e+=i,new Fu(o)})}class Fu{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}B.prototype.visitNull=M;B.prototype.visitBool=M;B.prototype.visitInt=M;B.prototype.visitInt8=M;B.prototype.visitInt16=M;B.prototype.visitInt32=M;B.prototype.visitInt64=M;B.prototype.visitUint8=M;B.prototype.visitUint16=M;B.prototype.visitUint32=M;B.prototype.visitUint64=M;B.prototype.visitFloat=M;B.prototype.visitFloat16=M;B.prototype.visitFloat32=M;B.prototype.visitFloat64=M;B.prototype.visitUtf8=M;B.prototype.visitBinary=M;B.prototype.visitFixedSizeBinary=M;B.prototype.visitDate=M;B.prototype.visitDateDay=M;B.prototype.visitDateMillisecond=M;B.prototype.visitTimestamp=M;B.prototype.visitTimestampSecond=M;B.prototype.visitTimestampMillisecond=M;B.prototype.visitTimestampMicrosecond=M;B.prototype.visitTimestampNanosecond=M;B.prototype.visitTime=M;B.prototype.visitTimeSecond=M;B.prototype.visitTimeMillisecond=M;B.prototype.visitTimeMicrosecond=M;B.prototype.visitTimeNanosecond=M;B.prototype.visitDecimal=M;B.prototype.visitList=M;B.prototype.visitStruct=M;B.prototype.visitUnion=M;B.prototype.visitDenseUnion=M;B.prototype.visitSparseUnion=M;B.prototype.visitDictionary=M;B.prototype.visitInterval=M;B.prototype.visitIntervalDayTime=M;B.prototype.visitIntervalYearMonth=M;B.prototype.visitFixedSizeList=M;B.prototype.visitMap=M;const Zs=new B,Bu=(r,t)=>r+t;class Ye extends Y{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return(t.type.unit+1)*4}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===Q.SECOND?4:8}visitInterval(t,e){return(t.type.unit+1)*4}visitStruct(t,e){return t.children.reduce((n,s)=>n+me.visit(s,e),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce((n,s)=>n+me.visit(s,e),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[e]))||0)}}const Nu=({valueOffsets:r},t)=>8+(r[t+1]-r[t]),Du=({valueOffsets:r},t)=>8+(r[t+1]-r[t]),Lu=({valueOffsets:r,stride:t,children:e},n)=>{const s=e[0],{[n*t]:i}=r,{[n*t+1]:o}=r,a=me.getVisitFn(s.type),c=s.slice(i,o-i);let l=8;for(let u=-1,b=o-i;++u<b;)l+=a(c,u);return l},ku=({stride:r,children:t},e)=>{const n=t[0],s=n.slice(e*r,r),i=me.getVisitFn(n.type);let o=0;for(let a=-1,c=s.length;++a<c;)o+=i(s,a);return o},Mu=(r,t)=>r.type.mode===Ut.Dense?Ra(r,t):Fa(r,t),Ra=({type:r,children:t,typeIds:e,valueOffsets:n},s)=>{const i=r.typeIdToChildIndex[e[s]];return 8+me.visit(t[i],n[s])},Fa=({children:r},t)=>4+me.visitMany(r,r.map(()=>t)).reduce(Bu,0);Ye.prototype.visitUtf8=Nu;Ye.prototype.visitBinary=Du;Ye.prototype.visitList=Lu;Ye.prototype.visitFixedSizeList=ku;Ye.prototype.visitUnion=Mu;Ye.prototype.visitDenseUnion=Ra;Ye.prototype.visitSparseUnion=Fa;const me=new Ye;var Ba;const Na={},Da={};class J{constructor(t){var e,n,s;const i=t[0]instanceof J?t.flatMap(a=>a.data):t;if(i.length===0||i.some(a=>!(a instanceof rt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(e=i[0])===null||e===void 0?void 0:e.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:c,indexOf:l,byteLength:u}=Na[o.typeId],b=i[0];this.isValid=d=>Js(b,d),this.get=d=>a(b,d),this.set=(d,f)=>c(b,d,f),this.indexOf=d=>l(b,d),this.getByteLength=d=>u(b,d),this._offsets=[0,b.length];break}default:Object.setPrototypeOf(this,Da[o.typeId]),this._offsets=Sa(i);break}this.data=i,this.type=o,this.stride=Se(o),this.numChildren=(s=(n=o.children)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,e)=>t+e.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Ia(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${h[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Zs.visit(this)}concat(...t){return new J(this.data.concat(t.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new J(wa(this,t,e,({data:n,_offsets:s},i,o)=>Ea(n,s,i,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:s,ArrayType:i}=this;switch(t.typeId){case h.Int:case h.Float:case h.Decimal:case h.Time:case h.Timestamp:switch(e.length){case 0:return new i;case 1:return e[0].values.subarray(0,n*s);default:return e.reduce((o,{values:a,length:c})=>(o.array.set(a.subarray(0,c*s),o.offset),o.offset+=c*s,o),{array:new i(n*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt((e=this.type.children)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new J(this.data.map(({children:e})=>e[t])):null}get isMemoized(){return A.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(A.isDictionary(this.type)){const t=new xn(this.data[0].dictionary),e=this.data.map(n=>{const s=n.clone();return s.dictionary=t,s});return new J(e)}return new xn(this)}unmemoize(){if(A.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map(n=>{const s=n.clone();return s.dictionary=t,s});return new J(e)}return this}}Ba=Symbol.toStringTag;J[Ba]=(r=>{r.type=A.prototype,r.data=[],r.length=0,r.stride=1,r.numChildren=0,r._nullCount=-1,r._byteLength=-1,r._offsets=new Uint32Array([0]),r[Symbol.isConcatSpreadable]=!0;const t=Object.keys(h).map(e=>h[e]).filter(e=>typeof e=="number"&&e!==h.NONE);for(const e of t){const n=Dt.getVisitFnByTypeId(e),s=Qt.getVisitFnByTypeId(e),i=Pn.getVisitFnByTypeId(e),o=me.getVisitFnByTypeId(e);Na[e]={get:n,set:s,indexOf:i,byteLength:o},Da[e]=Object.create(r,{isValid:{value:vr(Js)},get:{value:vr(Dt.getVisitFnByTypeId(e))},set:{value:Ta(Qt.getVisitFnByTypeId(e))},indexOf:{value:Oa(Pn.getVisitFnByTypeId(e))},getByteLength:{value:vr(me.getVisitFnByTypeId(e))}})}return"Vector"})(J.prototype);class xn extends J{constructor(t){super(t.data);const e=this.get,n=this.set,s=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=i[o];if(a!==void 0)return a;const c=e.call(this,o);return i[o]=c,c}}),Object.defineProperty(this,"set",{value(o,a){n.call(this,o,a),i[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new xn(s.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new J(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Es{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,s){return t.prep(8,24),t.writeInt64(s),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const us=2,ue=4,Te=4,et=4,Ce=new Int32Array(2),Ui=new Float32Array(Ce.buffer),Pi=new Float64Array(Ce.buffer),an=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Re=class Ts{constructor(t,e){this.low=t|0,this.high=e|0}static create(t,e){return t==0&&e==0?Ts.ZERO:new Ts(t,e)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Re.ZERO=new Re(0,0);var Os;(function(r){r[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"})(Os||(Os={}));let Or=class La{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new La(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Re(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Re(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ce[0]=this.readInt32(t),Ui[0]}readFloat64(t){return Ce[an?0:1]=this.readInt32(t),Ce[an?1:0]=this.readInt32(t+4),Pi[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Ui[0]=e,this.writeInt32(t,Ce[0])}writeFloat64(t,e){Pi[0]=e,this.writeInt32(t,Ce[an?0:1]),this.writeInt32(t+4,Ce[an?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ue+Te)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<Te;e++)t+=String.fromCharCode(this.readInt8(this.position_+ue+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let s="",i=0;if(t+=ue,e===Os.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){let o;const a=this.readUint8(t+i++);if(a<192)o=a;else{const c=this.readUint8(t+i++);if(a<224)o=(a&31)<<6|c&63;else{const l=this.readUint8(t+i++);if(a<240)o=(a&15)<<12|(c&63)<<6|l&63;else{const u=this.readUint8(t+i++);o=(a&7)<<18|(c&63)<<12|(l&63)<<6|u&63}}}o<65536?s+=String.fromCharCode(o):(o-=65536,s+=String.fromCharCode((o>>10)+55296,(o&1024-1)+56320))}return s}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ue}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Te)throw new Error("FlatBuffers: file identifier must be length "+Te);for(let e=0;e<Te;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+ue+e))return!1;return!0}createLong(t,e){return Re.create(t,e)}createScalarList(t,e){const n=[];for(let s=0;s<e;++s)t(s)!==null&&n.push(t(s));return n}createObjList(t,e){const n=[];for(let s=0;s<e;++s){const i=t(s);i!==null&&n.push(i.unpack())}return n}},ka=class Ma{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let e;t?e=t:e=1024,this.bb=Or.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+e)+1&t-1;for(;this.space<n+t+e;){const s=this.bb.capacity();this.bb=Ma.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){(this.force_defaults||!e.equals(n))&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,s=Or.allocate(n);return s.setPosition(n-e),s.bytes().set(t.bytes(),n-e),s}addOffset(t){this.prep(ue,0),this.writeInt32(this.offset()-t+ue)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--);const n=e+1;for(;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);const s=2;this.addInt16(t-this.object_start);const i=(n+s)*us;this.addInt16(i);let o=0;const a=this.space;t:for(e=0;e<this.vtables.length;e++){const c=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(c)){for(let l=us;l<i;l+=us)if(this.bb.readInt16(a+l)!=this.bb.readInt16(c+l))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const s=n?et:0;if(e){const i=e;if(this.prep(this.minalign,ue+Te+s),i.length!=Te)throw new Error("FlatBuffers: file identifier must be length "+Te);for(let o=Te-1;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,ue+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,s=n-this.bb.readInt32(n);if(!(this.bb.readInt16(s+e)!=0))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(ue,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let s;const i=t.charCodeAt(n++);if(i<55296||i>=56320)s=i;else{const o=t.charCodeAt(n++);s=(i<<10)+o+(65536-56623104-56320)}s<128?e.push(s):(s<2048?e.push(s>>6&31|192):(s<65536?e.push(s>>12&15|224):e.push(s>>18&7|240,s>>12&63|128),e.push(s>>6&63|128)),e.push(s&63|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let n=0,s=this.space,i=this.bb.bytes();n<e.length;n++)i[s++]=e[n];return this.endVector()}createLong(t,e){return Re.create(t,e)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const s=t[n];if(s!==null)e.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ft{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+et),(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return ft.startKeyValue(t),ft.addKey(t,e),ft.addValue(t,n),ft.endKeyValue(t)}}var Ar;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(Ar||(Ar={}));var Rr;(function(r){r[r.Little=0]="Little",r[r.Big=1]="Big"})(Rr||(Rr={}));var Vn;(function(r){r[r.DenseArray=0]="DenseArray"})(Vn||(Vn={}));class Mt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Mt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+et),(e||new Mt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return Mt.startInt(t),Mt.addBitWidth(t,e),Mt.addIsSigned(t,n),Mt.endInt(t)}}class Oe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new Oe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+et),(e||new Oe).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Mt).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Vn.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,Vn.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Je{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Je).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+et),(e||new Je).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Je.startBinary(t),Je.endBinary(t)}}class Ze{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Ze).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+et),(e||new Ze).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Ze.startBool(t),Ze.endBool(t)}}var jn;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(jn||(jn={}));let hn=class br{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new br).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+et),(e||new br).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jn.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,jn.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return br.startDate(t),br.addUnit(t,e),br.endDate(t)}};class At{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new At).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+et),(e||new At).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,s){return At.startDecimal(t),At.addPrecision(t,e),At.addScale(t,n),At.addBitWidth(t,s),At.endDecimal(t)}}var Fr;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(Fr||(Fr={}));class de{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new de).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+et),(e||new de).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return de.startFixedSizeBinary(t),de.addByteWidth(t,e),de.endFixedSizeBinary(t)}}class he{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new he).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+et),(e||new he).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return he.startFixedSizeList(t),he.addListSize(t,e),he.endFixedSizeList(t)}}var zn;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(zn||(zn={}));class be{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new be).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+et),(e||new be).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zn.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,zn.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return be.startFloatingPoint(t),be.addPrecision(t,e),be.endFloatingPoint(t)}}var $n;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})($n||($n={}));class fe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new fe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+et),(e||new fe).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$n.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,$n.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return fe.startInterval(t),fe.addUnit(t,e),fe.endInterval(t)}}class Xe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Xe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+et),(e||new Xe).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Xe.startList(t),Xe.endList(t)}}let bn=class fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+et),(e||new fr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return fr.startMap(t),fr.addKeysSorted(t,e),fr.endMap(t)}};class tr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new tr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+et),(e||new tr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return tr.startNull(t),tr.endNull(t)}}class er{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+et),(e||new er).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return er.startStruct_(t),er.endStruct_(t)}}class Yt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Yt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+et),(e||new Yt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fr.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Fr.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return Yt.startTime(t),Yt.addUnit(t,e),Yt.addBitWidth(t,n),Yt.endTime(t)}}class qt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new qt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+et),(e||new qt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fr.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Fr.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return qt.startTimestamp(t),qt.addUnit(t,e),qt.addTimezone(t,n),qt.endTimestamp(t)}}var Gn;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(Gn||(Gn={}));class Rt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Rt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+et),(e||new Rt).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gn.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Gn.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return Rt.startUnion(t),Rt.addMode(t,e),Rt.addTypeIds(t,n),Rt.endUnion(t)}}class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+et),(e||new rr).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return rr.startUtf8(t),rr.endUtf8(t)}}var it;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.FloatingPoint=3]="FloatingPoint",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct_=13]="Struct_",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Duration=18]="Duration",r[r.LargeBinary=19]="LargeBinary",r[r.LargeUtf8=20]="LargeUtf8",r[r.LargeList=21]="LargeList"})(it||(it={}));let $t=class fn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new fn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+et),(e||new fn).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):it.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new Oe).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,it.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}},ae=class ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+et),(e||new ve).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Rr.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new $t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Rr.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,s,i){return ve.startSchema(t),ve.addEndianness(t,e),ve.addFields(t,n),ve.addCustomMetadata(t,s),ve.addFeatures(t,i),ve.endSchema(t)}};class kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+et),(e||new kt).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ar.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ae).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Es).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Es).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Ar.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class Z{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=As(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter(s=>e.has(s.name));return new Z(n,this.metadata)}selectAt(t){const e=t.map(n=>this.fields[n]).filter(Boolean);return new Z(e,this.metadata)}assign(...t){const e=t[0]instanceof Z?t[0]:Array.isArray(t[0])?new Z(t[0]):new Z(t),n=[...this.fields],s=cn(cn(new Map,this.metadata),e.metadata),i=e.fields.filter(a=>{const c=n.findIndex(l=>l.name===a.name);return~c?(n[c]=a.clone({metadata:cn(cn(new Map,n[c].metadata),a.metadata)}))&&!1:!0}),o=As(i,new Map);return new Z([...n,...i],s,new Map([...this.dictionaries,...o]))}}Z.prototype.fields=null;Z.prototype.metadata=null;Z.prototype.dictionaries=null;class st{constructor(t,e,n=!1,s){this.name=t,this.type=e,this.nullable=n,this.metadata=s||new Map}static new(...t){let[e,n,s,i]=t;return t[0]&&typeof t[0]=="object"&&({name:e}=t[0],n===void 0&&(n=t[0].type),s===void 0&&(s=t[0].nullable),i===void 0&&(i=t[0].metadata)),new st(`${e}`,n,s,i)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,s,i]=t;return!t[0]||typeof t[0]!="object"?[e=this.name,n=this.type,s=this.nullable,i=this.metadata]=t:{name:e=this.name,type:n=this.type,nullable:s=this.nullable,metadata:i=this.metadata}=t[0],st.new(e,n,s,i)}}st.prototype.type=null;st.prototype.name=null;st.prototype.nullable=null;st.prototype.metadata=null;function cn(r,t){return new Map([...r||new Map,...t||new Map])}function As(r,t=new Map){for(let e=-1,n=r.length;++e<n;){const i=r[e].type;if(A.isDictionary(i)){if(!t.has(i.id))t.set(i.id,i.dictionary);else if(t.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}i.children&&i.children.length>0&&As(i.children,t)}return t}var xi=Re,Cu=ka,Uu=Or;class Hr{constructor(t,e=Ct.V4,n,s){this.schema=t,this.version=e,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}static decode(t){t=new Uu(H(t));const e=kt.getRootAsFooter(t),n=Z.decode(e.schema());return new Pu(n,e)}static encode(t){const e=new Cu,n=Z.encode(e,t.schema);kt.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())$e.encode(e,o);const s=e.endVector();kt.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())$e.encode(e,o);const i=e.endVector();return kt.startFooter(e),kt.addSchema(e,n),kt.addVersion(e,Ct.V4),kt.addRecordBatches(e,s),kt.addDictionaries(e,i),kt.finishFooterBuffer(e,kt.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Pu extends Hr{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return $e.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return $e.decode(e)}return null}}class $e{constructor(t,e,n){this.metaDataLength=t,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof e=="number"?e:e.low}static decode(t){return new $e(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,s=new xi(e.offset,0),i=new xi(e.bodyLength,0);return Es.createBlock(t,s,n,i)}}const ot=Object.freeze({done:!0,value:void 0});class Vi{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Xs{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class xu extends Xs{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return E(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(ot);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Wt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Wt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return E(this,void 0,void 0,function*(){return yield this.abort(t),ot})}return(t){return E(this,void 0,void 0,function*(){return yield this.close(),ot})}read(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,n)=>{this.resolvers.push({resolve:e,reject:n})}):Promise.resolve(ot)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class gn extends xu{write(t){if((t=H(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?_s(this.toUint8Array(!0)):this.toUint8Array(!1).then(_s)}toUint8Array(t=!1){return t?ye(this._values)[0]:(()=>E(this,void 0,void 0,function*(){var e,n;const s=[];let i=0;try{for(var o=sr(this),a;a=yield o.next(),!a.done;){const c=a.value;s.push(c),i+=c.byteLength}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&(yield n.call(o))}finally{if(e)throw e.error}}return ye(s,i)[0]}))()}}class Wn{constructor(t){t&&(this.source=new Vu(Wt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Br{constructor(t){t instanceof Br?this.source=t.source:t instanceof gn?this.source=new Qe(Wt.fromAsyncIterable(t)):yo(t)?this.source=new Qe(Wt.fromNodeStream(t)):xs(t)?this.source=new Qe(Wt.fromDOMStream(t)):po(t)?this.source=new Qe(Wt.fromDOMStream(t.body)):Zr(t)?this.source=new Qe(Wt.fromIterable(t)):or(t)?this.source=new Qe(Wt.fromAsyncIterable(t)):Cr(t)&&(this.source=new Qe(Wt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Vu{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||ot)}return(t){return Object.create(this.source.return&&this.source.return(t)||ot)}}class Qe{constructor(t){this.source=t,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(t){return E(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return E(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,e="read"){return E(this,void 0,void 0,function*(){return yield this.source.next({cmd:e,size:t})})}throw(t){return E(this,void 0,void 0,function*(){const e=this.source.throw&&(yield this.source.throw(t))||ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}return(t){return E(this,void 0,void 0,function*(){const e=this.source.return&&(yield this.source.return(t))||ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}}class ji extends Wn{constructor(t,e){super(),this.position=0,this.buffer=H(t),this.size=typeof e>"u"?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:s}=this;return e&&s<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,s+Math.min(n-s,t)),e.subarray(s,this.position)):null}readAt(t,e){const n=this.buffer,s=Math.min(this.size,t+e);return n?n.subarray(t,s):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Yn extends Br{constructor(t,e){super(),this.position=0,this._handle=t,typeof e=="number"?this.size=e:this._pending=(()=>E(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return E(this,void 0,void 0,function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)})}seek(t){return E(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return E(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:s}=this;if(e&&s<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let i=s,o=0,a=0;const c=Math.min(n,i+Math.min(n-i,t)),l=new Uint8Array(Math.max(0,(this.position=c)-i));for(;(i+=a)<c&&(o+=a)<l.byteLength;)({bytesRead:a}=yield e.read(l,o,l.byteLength-o,i));return l}return null})}readAt(t,e){return E(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:s}=this;if(n&&t+e<s){const i=Math.min(s,t+e),o=new Uint8Array(i-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)})}close(){return E(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return E(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return E(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const ju=65536;function pr(r){return r<0&&(r=4294967295+r+1),`0x${r.toString(16)}`}const Nr=8,ti=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ca{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let s=e[3]*n[3];this.buffer[0]=s&65535;let i=s>>>16;return s=e[2]*n[3],i+=s,s=e[3]*n[2]>>>0,i+=s,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<s?ju:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${pr(this.buffer[1])} ${pr(this.buffer[0])}`}}class X extends Ca{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return X.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return X.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,s=new X(e);for(let i=0;i<n;){const o=Nr<n-i?Nr:n-i,a=new X(new Uint32Array([Number.parseInt(t.slice(i,i+o),10),0])),c=new X(new Uint32Array([ti[o],0]));s.times(c),s.plus(a),i+=o}return s}static convertArray(t){const e=new Uint32Array(t.length*2);for(let n=-1,s=t.length;++n<s;)X.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new X(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new X(new Uint32Array(t.buffer)).plus(e)}}class Ot extends Ca{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return Ot.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Ot.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),s=t.length,i=new Ot(e);for(let o=n?1:0;o<s;){const a=Nr<s-o?Nr:s-o,c=new Ot(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),l=new Ot(new Uint32Array([ti[a],0]));i.times(l),i.plus(c),o+=a}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(t.length*2);for(let n=-1,s=t.length;++n<s;)Ot.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new Ot(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Ot(new Uint32Array(t.buffer)).plus(e)}}class ce{constructor(t){this.buffer=t}high(){return new Ot(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Ot(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const e=new X(new Uint32Array([this.buffer[3],0])),n=new X(new Uint32Array([this.buffer[2],0])),s=new X(new Uint32Array([this.buffer[1],0])),i=new X(new Uint32Array([this.buffer[0],0])),o=new X(new Uint32Array([t.buffer[3],0])),a=new X(new Uint32Array([t.buffer[2],0])),c=new X(new Uint32Array([t.buffer[1],0])),l=new X(new Uint32Array([t.buffer[0],0]));let u=X.multiply(i,l);this.buffer[0]=u.low();const b=new X(new Uint32Array([u.high(),0]));return u=X.multiply(s,l),b.plus(u),u=X.multiply(i,c),b.plus(u),this.buffer[1]=b.low(),this.buffer[3]=b.lessThan(u)?1:0,this.buffer[2]=b.high(),new X(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(X.multiply(n,l)).plus(X.multiply(s,c)).plus(X.multiply(i,a)),this.buffer[3]+=X.multiply(e,l).plus(X.multiply(n,c)).plus(X.multiply(s,a)).plus(X.multiply(i,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${pr(this.buffer[3])} ${pr(this.buffer[2])} ${pr(this.buffer[1])} ${pr(this.buffer[0])}`}static multiply(t,e){return new ce(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ce(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return ce.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return ce.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),s=t.length,i=new ce(e);for(let o=n?1:0;o<s;){const a=Nr<s-o?Nr:s-o,c=new ce(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),l=new ce(new Uint32Array([ti[a],0,0,0]));i.times(l),i.plus(c),o+=a}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(t.length*4);for(let n=-1,s=t.length;++n<s;)ce.from(t[n],new Uint32Array(e.buffer,e.byteOffset+4*4*n,4));return e}}class Ua extends Y{constructor(t,e,n,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=s}visit(t){return super.visit(t instanceof st?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return W({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Ut.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return W({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class zu extends Ua{constructor(t,e,n,s){super(new Uint8Array(0),e,n,s),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Un(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return tt(Uint8Array,tt(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return tt(Uint8Array,tt(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return A.isTimestamp(t)||(A.isInt(t)||A.isTime(t))&&t.bitWidth===64||A.isDate(t)&&t.unit===Fe.MILLISECOND?tt(Uint8Array,Ot.convertArray(n[e])):A.isDecimal(t)?tt(Uint8Array,ce.convertArray(n[e])):A.isBinary(t)||A.isFixedSizeBinary(t)?$u(n[e]):A.isBool(t)?Un(n[e]):A.isUtf8(t)?Ps(n[e].join("")):tt(Uint8Array,tt(t.ArrayType,n[e].map(s=>+s)))}}function $u(r){const t=r.join(""),e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=Number.parseInt(t.slice(n,n+2),16);return e}class N extends Y{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((n,s)=>this.compareFields(n,e[s]))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Lt(r,t){return t instanceof r.constructor}function Xr(r,t){return r===t||Lt(r,t)}function Ne(r,t){return r===t||Lt(r,t)&&r.bitWidth===t.bitWidth&&r.isSigned===t.isSigned}function ns(r,t){return r===t||Lt(r,t)&&r.precision===t.precision}function Gu(r,t){return r===t||Lt(r,t)&&r.byteWidth===t.byteWidth}function ei(r,t){return r===t||Lt(r,t)&&r.unit===t.unit}function tn(r,t){return r===t||Lt(r,t)&&r.unit===t.unit&&r.timezone===t.timezone}function en(r,t){return r===t||Lt(r,t)&&r.unit===t.unit&&r.bitWidth===t.bitWidth}function Wu(r,t){return r===t||Lt(r,t)&&r.children.length===t.children.length&&Ge.compareManyFields(r.children,t.children)}function Yu(r,t){return r===t||Lt(r,t)&&r.children.length===t.children.length&&Ge.compareManyFields(r.children,t.children)}function ri(r,t){return r===t||Lt(r,t)&&r.mode===t.mode&&r.typeIds.every((e,n)=>e===t.typeIds[n])&&Ge.compareManyFields(r.children,t.children)}function qu(r,t){return r===t||Lt(r,t)&&r.id===t.id&&r.isOrdered===t.isOrdered&&Ge.visit(r.indices,t.indices)&&Ge.visit(r.dictionary,t.dictionary)}function ni(r,t){return r===t||Lt(r,t)&&r.unit===t.unit}function Hu(r,t){return r===t||Lt(r,t)&&r.listSize===t.listSize&&r.children.length===t.children.length&&Ge.compareManyFields(r.children,t.children)}function Qu(r,t){return r===t||Lt(r,t)&&r.keysSorted===t.keysSorted&&r.children.length===t.children.length&&Ge.compareManyFields(r.children,t.children)}N.prototype.visitNull=Xr;N.prototype.visitBool=Xr;N.prototype.visitInt=Ne;N.prototype.visitInt8=Ne;N.prototype.visitInt16=Ne;N.prototype.visitInt32=Ne;N.prototype.visitInt64=Ne;N.prototype.visitUint8=Ne;N.prototype.visitUint16=Ne;N.prototype.visitUint32=Ne;N.prototype.visitUint64=Ne;N.prototype.visitFloat=ns;N.prototype.visitFloat16=ns;N.prototype.visitFloat32=ns;N.prototype.visitFloat64=ns;N.prototype.visitUtf8=Xr;N.prototype.visitBinary=Xr;N.prototype.visitFixedSizeBinary=Gu;N.prototype.visitDate=ei;N.prototype.visitDateDay=ei;N.prototype.visitDateMillisecond=ei;N.prototype.visitTimestamp=tn;N.prototype.visitTimestampSecond=tn;N.prototype.visitTimestampMillisecond=tn;N.prototype.visitTimestampMicrosecond=tn;N.prototype.visitTimestampNanosecond=tn;N.prototype.visitTime=en;N.prototype.visitTimeSecond=en;N.prototype.visitTimeMillisecond=en;N.prototype.visitTimeMicrosecond=en;N.prototype.visitTimeNanosecond=en;N.prototype.visitDecimal=Xr;N.prototype.visitList=Wu;N.prototype.visitStruct=Yu;N.prototype.visitUnion=ri;N.prototype.visitDenseUnion=ri;N.prototype.visitSparseUnion=ri;N.prototype.visitDictionary=qu;N.prototype.visitInterval=ni;N.prototype.visitIntervalDayTime=ni;N.prototype.visitIntervalYearMonth=ni;N.prototype.visitFixedSizeList=Hu;N.prototype.visitMap=Qu;const Ge=new N;function Rs(r,t){return Ge.compareSchemas(r,t)}function ds(r,t){return Ku(r,t.map(e=>e.data.concat()))}function Ku(r,t){const e=[...r.fields],n=[],s={numBatches:t.reduce((b,d)=>Math.max(b,d.length),0)};let i=0,o=0,a=-1;const c=t.length;let l,u=[];for(;s.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<c;)u[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(u=Ju(e,o,u,t,s),o>0&&(n[i++]=W({type:new Et(e),length:o,nullCount:0,children:u.slice()})))}return[r=r.assign(e),n.map(b=>new Ft(r,b))]}function Ju(r,t,e,n,s){var i;const o=(t+63&-64)>>3;for(let a=-1,c=n.length;++a<c;){const l=e[a],u=l==null?void 0:l.length;if(u>=t)u===t?e[a]=l:(e[a]=l.slice(0,t),s.numBatches=Math.max(s.numBatches,n[a].unshift(l.slice(t,u-t))));else{const b=r[a];r[a]=b.clone({nullable:!0}),e[a]=(i=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&i!==void 0?i:W({type:b.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return e}var Pa;class St{constructor(...t){var e,n;if(t.length===0)return this.batches=[],this.schema=new Z([]),this._offsets=[0],this;let s,i;t[0]instanceof Z&&(s=t.shift()),t[t.length-1]instanceof Uint32Array&&(i=t.pop());const o=c=>{if(c){if(c instanceof Ft)return[c];if(c instanceof St)return c.batches;if(c instanceof rt){if(c.type instanceof Et)return[new Ft(new Z(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(l=>o(l));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(l=>o(l));if(typeof c=="object"){const l=Object.keys(c),u=l.map(f=>new J([c[f]])),b=new Z(l.map((f,g)=>new st(String(f),u[g].type))),[,d]=ds(b,u);return d.length===0?[new Ft(c)]:d}}}return[]},a=t.flatMap(c=>o(c));if(s=(n=s??((e=a[0])===null||e===void 0?void 0:e.schema))!==null&&n!==void 0?n:new Z([]),!(s instanceof Z))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of a){if(!(c instanceof Ft))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Rs(s,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=a,this._offsets=i??Sa(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,e)=>t+e.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Ia(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Zs.visit(new J(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap(({data:s})=>s));return new St(e,n.map(s=>new Ft(e,s)))}slice(t,e){const n=this.schema;[t,e]=wa({length:this.numRows},t,e);const s=Ea(this.data,this._offsets,t,e);return new St(n,s.map(i=>new Ft(n,i)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(e=>e.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map(n=>n.children[t]);if(e.length===0){const{type:n}=this.schema.fields[t],s=W({type:n,length:0,nullCount:0});e.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new J(e)}return null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===t),e)}setChildAt(t,e){let n=this.schema,s=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new J([W({type:new je,length:this.numRows})]));const i=n.fields.slice(),o=i[t].clone({type:e.type}),a=this.schema.fields.map((c,l)=>this.getChildAt(l));[i[t],a[t]]=[o,e],[n,s]=ds(n,a)}return new St(n,s)}select(t){const e=this.schema.fields.reduce((n,s,i)=>n.set(s.name,i),new Map);return this.selectAt(t.map(n=>e.get(n)).filter(n=>n>-1))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map(s=>s.selectAt(t));return new St(e,n)}assign(t){const e=this.schema.fields,[n,s]=t.schema.fields.reduce((a,c,l)=>{const[u,b]=a,d=e.findIndex(f=>f.name===c.name);return~d?b[d]=l:u.push(l),a},[[],[]]),i=this.schema.assign(t.schema),o=[...e.map((a,c)=>[c,s[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...n.map(a=>t.getChildAt(a))].filter(Boolean);return new St(...ds(i,o))}}Pa=Symbol.toStringTag;St[Pa]=(r=>(r.schema=null,r.batches=[],r._offsets=new Uint32Array([0]),r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,r.isValid=vr(Js),r.get=vr(Dt.getVisitFn(h.Struct)),r.set=Ta(Qt.getVisitFn(h.Struct)),r.indexOf=Oa(Pn.getVisitFn(h.Struct)),r.getByteLength=vr(me.getVisitFn(h.Struct)),"Table"))(St.prototype);var xa;let Ft=class jr{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Z))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=W({nullCount:0,type:new Et(this.schema.fields),children:this.schema.fields.map(e=>W({type:e.type,nullCount:0}))})]=t,!(this.data instanceof rt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=zi(this.schema,this.data.children);break}case 1:{const[e]=t,{fields:n,children:s,length:i}=Object.keys(e).reduce((c,l,u)=>(c.children[u]=e[l],c.length=Math.max(c.length,e[l].length),c.fields[u]=st.new({name:l,type:e[l].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new Z(n),a=W({type:new Et(n),length:i,children:s,nullCount:0});[this.schema,this.data]=zi(o,a.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Va(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Dt.visit(this.data,t)}set(t,e){return Qt.visit(this.data,t,e)}indexOf(t,e){return Pn.visit(this.data,t,e)}getByteLength(t){return me.visit(this.data,t)}[Symbol.iterator](){return Zs.visit(new J([this.data]))}toArray(){return[...this]}concat(...t){return new St(this.schema,[this,...t])}slice(t,e){const[n]=new J([this.data]).slice(t,e).data;return new jr(this.schema,n)}getChild(t){var e;return this.getChildAt((e=this.schema.fields)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new J([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===t),e)}setChildAt(t,e){let n=this.schema,s=this.data;if(t>-1&&t<this.numCols){e||(e=new J([W({type:new je,length:this.numRows})]));const i=n.fields.slice(),o=s.children.slice(),a=i[t].clone({type:e.type});[i[t],o[t]]=[a,e.data[0]],n=new Z(i,new Map(this.schema.metadata)),s=W({type:new Et(i),children:o})}return new jr(n,s)}select(t){const e=this.schema.select(t),n=new Et(e.fields),s=[];for(const i of t){const o=this.schema.fields.findIndex(a=>a.name===i);~o&&(s[o]=this.data.children[o])}return new jr(e,W({type:n,length:this.numRows,children:s}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map(i=>this.data.children[i]).filter(Boolean),s=W({type:new Et(e.fields),length:this.numRows,children:n});return new jr(e,s)}};xa=Symbol.toStringTag;Ft[xa]=(r=>(r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ft.prototype);function zi(r,t,e=t.reduce((n,s)=>Math.max(n,s.length),0)){var n;const s=[...r.fields],i=[...t],o=(e+63&-64)>>3;for(const[a,c]of r.fields.entries()){const l=t[a];(!l||l.length!==e)&&(s[a]=c.clone({nullable:!0}),i[a]=(n=l==null?void 0:l._changeLengthAndBackfillNullBitmap(e))!==null&&n!==void 0?n:W({type:c.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)}))}return[r.assign(s),W({type:new Et(s),length:e,children:i})]}function Va(r,t,e=new Map){for(let n=-1,s=r.length;++n<s;){const o=r[n].type,a=t[n];if(A.isDictionary(o)){if(!e.has(o.id))a.dictionary&&e.set(o.id,a.dictionary);else if(e.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&Va(o.children,a.children,e)}return e}class si extends Ft{constructor(t){const e=t.fields.map(s=>W({type:s.type})),n=W({type:new Et(t.fields),nullCount:0,children:e});super(t,n)}}var qn;(function(r){r[r.BUFFER=0]="BUFFER"})(qn||(qn={}));var Hn;(function(r){r[r.LZ4_FRAME=0]="LZ4_FRAME",r[r.ZSTD=1]="ZSTD"})(Hn||(Hn={}));class Ue{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Ue).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+et),(e||new Ue).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Hn.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):qn.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Hn.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,qn.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return Ue.startBodyCompression(t),Ue.addCodec(t,e),Ue.addMethod(t,n),Ue.endBodyCompression(t)}}class ja{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}let za=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}},Ee=class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new Fs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+et),(e||new Fs).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new za).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new ja).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Ue).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}},gr=class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Bs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+et),(e||new Bs).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Ee).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var Qn;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(Qn||(Qn={}));let Me=class oe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new oe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+et),(e||new oe).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ar.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Qn.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Ar.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Qn.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,s,i,o){return oe.startMessage(t),oe.addVersion(t,e),oe.addHeaderType(t,n),oe.addHeader(t,s),oe.addBodyLength(t,i),oe.addCustomMetadata(t,o),oe.endMessage(t)}};var Zu=Re;class Xu extends Y{visit(t,e){return t==null||e==null?void 0:super.visit(t,e)}visitNull(t,e){return tr.startNull(e),tr.endNull(e)}visitInt(t,e){return Mt.startInt(e),Mt.addBitWidth(e,t.bitWidth),Mt.addIsSigned(e,t.isSigned),Mt.endInt(e)}visitFloat(t,e){return be.startFloatingPoint(e),be.addPrecision(e,t.precision),be.endFloatingPoint(e)}visitBinary(t,e){return Je.startBinary(e),Je.endBinary(e)}visitBool(t,e){return Ze.startBool(e),Ze.endBool(e)}visitUtf8(t,e){return rr.startUtf8(e),rr.endUtf8(e)}visitDecimal(t,e){return At.startDecimal(e),At.addScale(e,t.scale),At.addPrecision(e,t.precision),At.addBitWidth(e,t.bitWidth),At.endDecimal(e)}visitDate(t,e){return hn.startDate(e),hn.addUnit(e,t.unit),hn.endDate(e)}visitTime(t,e){return Yt.startTime(e),Yt.addUnit(e,t.unit),Yt.addBitWidth(e,t.bitWidth),Yt.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return qt.startTimestamp(e),qt.addUnit(e,t.unit),n!==void 0&&qt.addTimezone(e,n),qt.endTimestamp(e)}visitInterval(t,e){return fe.startInterval(e),fe.addUnit(e,t.unit),fe.endInterval(e)}visitList(t,e){return Xe.startList(e),Xe.endList(e)}visitStruct(t,e){return er.startStruct_(e),er.endStruct_(e)}visitUnion(t,e){Rt.startTypeIdsVector(e,t.typeIds.length);const n=Rt.createTypeIdsVector(e,t.typeIds);return Rt.startUnion(e),Rt.addMode(e,t.mode),Rt.addTypeIds(e,n),Rt.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return Oe.startDictionaryEncoding(e),Oe.addId(e,new Zu(t.id,0)),Oe.addIsOrdered(e,t.isOrdered),n!==void 0&&Oe.addIndexType(e,n),Oe.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return de.startFixedSizeBinary(e),de.addByteWidth(e,t.byteWidth),de.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return he.startFixedSizeList(e),he.addListSize(e,t.listSize),he.endFixedSizeList(e)}visitMap(t,e){return bn.startMap(e),bn.addKeysSorted(e,t.keysSorted),bn.endMap(e)}}const hs=new Xu;function td(r,t=new Map){return new Z(rd(r,t),pn(r.customMetadata),t)}function $a(r){return new Pt(r.count,Ga(r.columns),Wa(r.columns))}function ed(r){return new _e($a(r.data),r.id,r.isDelta)}function rd(r,t){return(r.fields||[]).filter(Boolean).map(e=>st.fromJSON(e,t))}function $i(r,t){return(r.children||[]).filter(Boolean).map(e=>st.fromJSON(e,t))}function Ga(r){return(r||[]).reduce((t,e)=>[...t,new cr(e.count,nd(e.VALIDITY)),...Ga(e.children)],[])}function Wa(r,t=[]){for(let e=-1,n=(r||[]).length;++e<n;){const s=r[e];s.VALIDITY&&t.push(new pe(t.length,s.VALIDITY.length)),s.TYPE&&t.push(new pe(t.length,s.TYPE.length)),s.OFFSET&&t.push(new pe(t.length,s.OFFSET.length)),s.DATA&&t.push(new pe(t.length,s.DATA.length)),t=Wa(s.children,t)}return t}function nd(r){return(r||[]).reduce((t,e)=>t+ +(e===0),0)}function sd(r,t){let e,n,s,i,o,a;return!t||!(i=r.dictionary)?(o=Wi(r,$i(r,t)),s=new st(r.name,o,r.nullable,pn(r.customMetadata))):t.has(e=i.id)?(n=(n=i.indexType)?Gi(n):new Wr,a=new Tr(t.get(e),n,e,i.isOrdered),s=new st(r.name,a,r.nullable,pn(r.customMetadata))):(n=(n=i.indexType)?Gi(n):new Wr,t.set(e,o=Wi(r,$i(r,t))),a=new Tr(o,n,e,i.isOrdered),s=new st(r.name,a,r.nullable,pn(r.customMetadata))),s||null}function pn(r){return new Map(Object.entries(r||{}))}function Gi(r){return new ze(r.isSigned,r.bitWidth)}function Wi(r,t){const e=r.type.name;switch(e){case"NONE":return new je;case"null":return new je;case"binary":return new Tn;case"utf8":return new On;case"bool":return new An;case"list":return new Dn((t||[])[0]);case"struct":return new Et(t||[]);case"struct_":return new Et(t||[])}switch(e){case"int":{const n=r.type;return new ze(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=r.type;return new Yr(Bt[n.precision])}case"decimal":{const n=r.type;return new Rn(n.scale,n.precision,n.bitWidth)}case"date":{const n=r.type;return new Fn(Fe[n.unit])}case"time":{const n=r.type;return new qr(Q[n.unit],n.bitWidth)}case"timestamp":{const n=r.type;return new Bn(Q[n.unit],n.timezone)}case"interval":{const n=r.type;return new Nn(Ve[n.unit])}case"union":{const n=r.type;return new Ln(Ut[n.mode],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=r.type;return new kn(n.byteWidth)}case"fixedsizelist":{const n=r.type;return new Mn(n.listSize,(t||[])[0])}case"map":{const n=r.type;return new Cn((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${e}"`)}var ar=Re,id=ka,od=Or;class Tt{constructor(t,e,n,s){this._version=e,this._headerType=n,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,e){const n=new Tt(0,Ct.V4,e);return n._createHeader=ad(t,e),n}static decode(t){t=new od(H(t));const e=Me.getRootAsMessage(t),n=e.bodyLength(),s=e.version(),i=e.headerType(),o=new Tt(n,s,i);return o._createHeader=cd(e,i),o}static encode(t){const e=new id;let n=-1;return t.isSchema()?n=Z.encode(e,t.header()):t.isRecordBatch()?n=Pt.encode(e,t.header()):t.isDictionaryBatch()&&(n=_e.encode(e,t.header())),Me.startMessage(e),Me.addVersion(e,Ct.V4),Me.addHeader(e,n),Me.addHeaderType(e,t.headerType),Me.addBodyLength(e,new ar(t.bodyLength,0)),Me.finishMessageBuffer(e,Me.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Z)return new Tt(0,Ct.V4,K.Schema,t);if(t instanceof Pt)return new Tt(e,Ct.V4,K.RecordBatch,t);if(t instanceof _e)return new Tt(e,Ct.V4,K.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===K.Schema}isRecordBatch(){return this.headerType===K.RecordBatch}isDictionaryBatch(){return this.headerType===K.DictionaryBatch}}class Pt{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class _e{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id=typeof e=="number"?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class pe{constructor(t,e){this.offset=typeof t=="number"?t:t.low,this.length=typeof e=="number"?e:e.low}}class cr{constructor(t,e){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof e=="number"?e:e.low}}function ad(r,t){return()=>{switch(t){case K.Schema:return Z.fromJSON(r);case K.RecordBatch:return Pt.fromJSON(r);case K.DictionaryBatch:return _e.fromJSON(r)}throw new Error(`Unrecognized Message type: { name: ${K[t]}, type: ${t} }`)}}function cd(r,t){return()=>{switch(t){case K.Schema:return Z.decode(r.header(new ae));case K.RecordBatch:return Pt.decode(r.header(new Ee),r.version());case K.DictionaryBatch:return _e.decode(r.header(new gr),r.version())}throw new Error(`Unrecognized Message type: { name: ${K[t]}, type: ${t} }`)}}st.encode=_d;st.decode=yd;st.fromJSON=sd;Z.encode=md;Z.decode=ld;Z.fromJSON=td;Pt.encode=wd;Pt.decode=ud;Pt.fromJSON=$a;_e.encode=vd;_e.decode=dd;_e.fromJSON=ed;cr.encode=Id;cr.decode=bd;pe.encode=Sd;pe.decode=hd;function ld(r,t=new Map){const e=pd(r,t);return new Z(e,yn(r),t)}function ud(r,t=Ct.V4){if(r.compression()!==null)throw new Error("Record batch compression not implemented");return new Pt(r.length(),fd(r),gd(r,t))}function dd(r,t=Ct.V4){return new _e(Pt.decode(r.data(),t),r.id(),r.isDelta())}function hd(r){return new pe(r.offset(),r.length())}function bd(r){return new cr(r.length(),r.nullCount())}function fd(r){const t=[];for(let e,n=-1,s=-1,i=r.nodesLength();++n<i;)(e=r.nodes(n))&&(t[++s]=cr.decode(e));return t}function gd(r,t){const e=[];for(let n,s=-1,i=-1,o=r.buffersLength();++s<o;)(n=r.buffers(s))&&(t<Ct.V4&&(n.bb_pos+=8*(s+1)),e[++i]=pe.decode(n));return e}function pd(r,t){const e=[];for(let n,s=-1,i=-1,o=r.fieldsLength();++s<o;)(n=r.fields(s))&&(e[++i]=st.decode(n,t));return e}function Yi(r,t){const e=[];for(let n,s=-1,i=-1,o=r.childrenLength();++s<o;)(n=r.children(s))&&(e[++i]=st.decode(n,t));return e}function yd(r,t){let e,n,s,i,o,a;return!t||!(a=r.dictionary())?(s=Hi(r,Yi(r,t)),n=new st(r.name(),s,r.nullable(),yn(r))):t.has(e=a.id().low)?(i=(i=a.indexType())?qi(i):new Wr,o=new Tr(t.get(e),i,e,a.isOrdered()),n=new st(r.name(),o,r.nullable(),yn(r))):(i=(i=a.indexType())?qi(i):new Wr,t.set(e,s=Hi(r,Yi(r,t))),o=new Tr(s,i,e,a.isOrdered()),n=new st(r.name(),o,r.nullable(),yn(r))),n||null}function yn(r){const t=new Map;if(r)for(let e,n,s=-1,i=Math.trunc(r.customMetadataLength());++s<i;)(e=r.customMetadata(s))&&(n=e.key())!=null&&t.set(n,e.value());return t}function qi(r){return new ze(r.isSigned(),r.bitWidth())}function Hi(r,t){const e=r.typeType();switch(e){case it.NONE:return new je;case it.Null:return new je;case it.Binary:return new Tn;case it.Utf8:return new On;case it.Bool:return new An;case it.List:return new Dn((t||[])[0]);case it.Struct_:return new Et(t||[])}switch(e){case it.Int:{const n=r.type(new Mt);return new ze(n.isSigned(),n.bitWidth())}case it.FloatingPoint:{const n=r.type(new be);return new Yr(n.precision())}case it.Decimal:{const n=r.type(new At);return new Rn(n.scale(),n.precision(),n.bitWidth())}case it.Date:{const n=r.type(new hn);return new Fn(n.unit())}case it.Time:{const n=r.type(new Yt);return new qr(n.unit(),n.bitWidth())}case it.Timestamp:{const n=r.type(new qt);return new Bn(n.unit(),n.timezone())}case it.Interval:{const n=r.type(new fe);return new Nn(n.unit())}case it.Union:{const n=r.type(new Rt);return new Ln(n.mode(),n.typeIdsArray()||[],t||[])}case it.FixedSizeBinary:{const n=r.type(new de);return new kn(n.byteWidth())}case it.FixedSizeList:{const n=r.type(new he);return new Mn(n.listSize(),(t||[])[0])}case it.Map:{const n=r.type(new bn);return new Cn((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${it[e]}" (${e})`)}function md(r,t){const e=t.fields.map(i=>st.encode(r,i));ae.startFieldsVector(r,e.length);const n=ae.createFieldsVector(r,e),s=t.metadata&&t.metadata.size>0?ae.createCustomMetadataVector(r,[...t.metadata].map(([i,o])=>{const a=r.createString(`${i}`),c=r.createString(`${o}`);return ft.startKeyValue(r),ft.addKey(r,a),ft.addValue(r,c),ft.endKeyValue(r)})):-1;return ae.startSchema(r),ae.addFields(r,n),ae.addEndianness(r,Ed?Rr.Little:Rr.Big),s!==-1&&ae.addCustomMetadata(r,s),ae.endSchema(r)}function _d(r,t){let e=-1,n=-1,s=-1;const i=t.type;let o=t.typeId;A.isDictionary(i)?(o=i.dictionary.typeId,s=hs.visit(i,r),n=hs.visit(i.dictionary,r)):n=hs.visit(i,r);const a=(i.children||[]).map(u=>st.encode(r,u)),c=$t.createChildrenVector(r,a),l=t.metadata&&t.metadata.size>0?$t.createCustomMetadataVector(r,[...t.metadata].map(([u,b])=>{const d=r.createString(`${u}`),f=r.createString(`${b}`);return ft.startKeyValue(r),ft.addKey(r,d),ft.addValue(r,f),ft.endKeyValue(r)})):-1;return t.name&&(e=r.createString(t.name)),$t.startField(r),$t.addType(r,n),$t.addTypeType(r,o),$t.addChildren(r,c),$t.addNullable(r,!!t.nullable),e!==-1&&$t.addName(r,e),s!==-1&&$t.addDictionary(r,s),l!==-1&&$t.addCustomMetadata(r,l),$t.endField(r)}function wd(r,t){const e=t.nodes||[],n=t.buffers||[];Ee.startNodesVector(r,e.length);for(const o of e.slice().reverse())cr.encode(r,o);const s=r.endVector();Ee.startBuffersVector(r,n.length);for(const o of n.slice().reverse())pe.encode(r,o);const i=r.endVector();return Ee.startRecordBatch(r),Ee.addLength(r,new ar(t.length,0)),Ee.addNodes(r,s),Ee.addBuffers(r,i),Ee.endRecordBatch(r)}function vd(r,t){const e=Pt.encode(r,t.data);return gr.startDictionaryBatch(r),gr.addId(r,new ar(t.id,0)),gr.addIsDelta(r,t.isDelta),gr.addData(r,e),gr.endDictionaryBatch(r)}function Id(r,t){return za.createFieldNode(r,new ar(t.length,0),new ar(t.nullCount,0))}function Sd(r,t){return ja.createBuffer(r,new ar(t.offset,0),new ar(t.length,0))}const Ed=(()=>{const r=new ArrayBuffer(2);return new DataView(r).setInt16(0,256,!0),new Int16Array(r)[0]===256})(),ii=r=>`Expected ${K[r]} Message in stream, but was null or length 0.`,oi=r=>`Header pointer of flatbuffer-encoded ${K[r]} Message is null or length 0.`,Ya=(r,t)=>`Expected to read ${r} metadata bytes, but only read ${t}.`,qa=(r,t)=>`Expected to read ${r} bytes for message body, but only read ${t}.`;class Ha{constructor(t){this.source=t instanceof Wn?t:new Wn(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?ot:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ii(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=H(this.source.read(t));if(e.byteLength<t)throw new Error(qa(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=K.Schema,n=this.readMessage(e),s=n==null?void 0:n.header();if(t&&!s)throw new Error(oi(e));return s}readMetadataLength(){const t=this.source.read(ss),e=t&&new Or(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return ot;if(e.byteLength<t)throw new Error(Ya(t,e.byteLength));return{done:!1,value:Tt.decode(e)}}}class Td{constructor(t,e){this.source=t instanceof Br?t:go(t)?new Yn(t,e):new Br(t)}[Symbol.asyncIterator](){return this}next(){return E(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?ot:t})}throw(t){return E(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return E(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return E(this,void 0,void 0,function*(){let e;if((e=yield this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ii(t));return e.value})}readMessageBody(t){return E(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const e=H(yield this.source.read(t));if(e.byteLength<t)throw new Error(qa(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()})}readSchema(t=!1){return E(this,void 0,void 0,function*(){const e=K.Schema,n=yield this.readMessage(e),s=n==null?void 0:n.header();if(t&&!s)throw new Error(oi(e));return s})}readMetadataLength(){return E(this,void 0,void 0,function*(){const t=yield this.source.read(ss),e=t&&new Or(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(t){return E(this,void 0,void 0,function*(){const e=yield this.source.read(t);if(!e)return ot;if(e.byteLength<t)throw new Error(Ya(t,e.byteLength));return{done:!1,value:Tt.decode(e)}})}}class Od extends Ha{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Vi?t:new Vi(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Tt.fromJSON(t.schema,K.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:Tt.fromJSON(e,K.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:Tt.fromJSON(e,K.RecordBatch)}}return this._body=[],ot}readMessageBody(t){return e(this._body);function e(n){return(n||[]).reduce((s,i)=>[...s,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...e(i.children)],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ii(t));return e.value}readSchema(){const t=K.Schema,e=this.readMessage(t),n=e==null?void 0:e.header();if(!e||!n)throw new Error(oi(t));return n}}const ss=4,Ns="ARROW1",Qr=new Uint8Array(Ns.length);for(let r=0;r<Ns.length;r+=1)Qr[r]=Ns.codePointAt(r);function ai(r,t=0){for(let e=-1,n=Qr.length;++e<n;)if(Qr[e]!==r[t+e])return!1;return!0}const rn=Qr.length,Qa=rn+ss,Ad=rn*2+ss;class Ht extends Xs{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return or(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Wt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Wt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ht?t:ws(t)?Nd(t):go(t)?kd(t):or(t)?(()=>E(this,void 0,void 0,function*(){return yield Ht.from(yield t)}))():po(t)||xs(t)||yo(t)||Cr(t)?Ld(new Br(t)):Dd(new Wn(t))}static readAll(t){return t instanceof Ht?t.isSync()?Qi(t):Ki(t):ws(t)||ArrayBuffer.isView(t)||Zr(t)||fo(t)?Qi(t):Ki(t)}}class Kn extends Ht{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ge(this,arguments,function*(){yield x(yield*dn(sr(this[Symbol.iterator]())))})}}class Jn extends Ht{constructor(t){super(t),this._impl=t}readAll(){var t,e;return E(this,void 0,void 0,function*(){const n=new Array;try{for(var s=sr(this),i;i=yield s.next(),!i.done;){const o=i.value;n.push(o)}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Ka extends Kn{constructor(t){super(t),this._impl=t}}class Rd extends Jn{constructor(t){super(t),this._impl=t}}class Ja{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),s=W({type:new Et(this.schema.fields),length:t.length,children:n});return new Ft(this.schema,s)}_loadDictionaryBatch(t,e){const{id:n,isDelta:s}=t,{dictionaries:i,schema:o}=this,a=i.get(n);if(s||!a){const c=o.dictionaries.get(n),l=this._loadVectors(t.data,e,[c]);return(a&&s?a.concat(new J(l)):new J(l)).memoize()}return a.memoize()}_loadVectors(t,e,n){return new Ua(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class Zn extends Ja{constructor(t,e){super(e),this._reader=ws(t)?new Od(this._handle=t):new Ha(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Xa(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):ot}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):ot}next(){if(this.closed)return ot;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),s=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),s=e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new si(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Xn extends Ja{constructor(t,e){super(e),this._reader=new Td(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return E(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return E(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Xa(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return E(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):ot})}return(t){return E(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):ot})}next(){return E(this,void 0,void 0,function*(){if(this.closed)return ot;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),s=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),s=yield e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new si(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return E(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Za extends Zn{constructor(t,e){super(t instanceof ji?t:new ji(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(K.RecordBatch);if(s!=null&&s.isRecordBatch()){const i=s.header(),o=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(i,o)}}return null}_readDictionaryBatch(t){var e;const n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(K.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const i=s.header(),o=this._reader.readMessageBody(s.bodyLength),a=this._loadDictionaryBatch(i,o);this.dictionaries.set(i.id,a)}}}_readFooter(){const{_handle:t}=this,e=t.size-Qa,n=t.readInt32(e),s=t.readAt(e-n,n);return Hr.decode(s)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class Fd extends Xn{constructor(t,...e){const n=typeof e[0]!="number"?e.shift():void 0,s=e[0]instanceof Map?e.shift():void 0;super(t instanceof Yn?t:new Yn(t,n),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return E(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)})}readRecordBatch(t){var e;return E(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(K.RecordBatch);if(s!=null&&s.isRecordBatch()){const i=s.header(),o=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(i,o)}}return null})}_readDictionaryBatch(t){var e;return E(this,void 0,void 0,function*(){const n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(K.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const i=s.header(),o=yield this._reader.readMessageBody(s.bodyLength),a=this._loadDictionaryBatch(i,o);this.dictionaries.set(i.id,a)}}})}_readFooter(){return E(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-Qa,n=yield t.readInt32(e),s=yield t.readAt(e-n,n);return Hr.decode(s)})}_readNextMessageAndValidate(t){return E(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null})}}class Bd extends Zn{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new zu(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Xa(r,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:r.autoDestroy}function*Qi(r){const t=Ht.from(r);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Ki(r){return ge(this,arguments,function*(){const e=yield x(Ht.from(r));try{if(!(yield x(e.open({autoDestroy:!1}))).closed)do yield yield x(e);while(!(yield x(e.reset().open())).closed)}finally{yield x(e.cancel())}})}function Nd(r){return new Kn(new Bd(r))}function Dd(r){const t=r.peek(rn+7&-8);return t&&t.byteLength>=4?ai(t)?new Ka(new Za(r.read())):new Kn(new Zn(r)):new Kn(new Zn(function*(){}()))}function Ld(r){return E(this,void 0,void 0,function*(){const t=yield r.peek(rn+7&-8);return t&&t.byteLength>=4?ai(t)?new Ka(new Za(yield r.read())):new Jn(new Xn(r)):new Jn(new Xn(function(){return ge(this,arguments,function*(){})}()))})}function kd(r){return E(this,void 0,void 0,function*(){const{size:t}=yield r.stat(),e=new Yn(r,t);return t>=Ad&&ai(yield e.readAt(0,rn+7&-8))?new Rd(new Fd(e)):new Jn(new Xn(e))})}class ht extends Y{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=s=>s.flatMap(i=>Array.isArray(i)?e(i):i instanceof Ft?i.data.children:i.data),n=new ht;return n.visitMany(e(t)),n}visit(t){if(t instanceof J)return this.visitMany(t.data),this;const{type:e}=t;if(!A.isDictionary(e)){const{length:n,nullCount:s}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");A.isNull(e)||Xt.call(this,s<=0?new Uint8Array(0):Hs(t.offset,n,t.nullBitmap)),this.nodes.push(new cr(n,s))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Xt(r){const t=r.byteLength+7&-8;return this.buffers.push(r),this.bufferRegions.push(new pe(this._byteLength,t)),this._byteLength+=t,this}function Md(r){const{type:t,length:e,typeIds:n,valueOffsets:s}=r;if(Xt.call(this,n),t.mode===Ut.Sparse)return Ds.call(this,r);if(t.mode===Ut.Dense){if(r.offset<=0)return Xt.call(this,s),Ds.call(this,r);{const i=n.reduce((u,b)=>Math.max(u,b),n[0]),o=new Int32Array(i+1),a=new Int32Array(i+1).fill(-1),c=new Int32Array(e),l=js(-s[0],e,s);for(let u,b,d=-1;++d<e;)(b=a[u=n[d]])===-1&&(b=a[u]=l[u]),c[d]=l[d]-b,++o[u];Xt.call(this,c);for(let u,b=-1,d=t.children.length;++b<d;)if(u=r.children[b]){const f=t.typeIds[b],g=Math.min(e,o[f]);this.visit(u.slice(a[f],g))}}}return this}function Cd(r){let t;return r.nullCount>=r.length?Xt.call(this,new Uint8Array(0)):(t=r.values)instanceof Uint8Array?Xt.call(this,Hs(r.offset,r.length,t)):Xt.call(this,Un(r.values))}function qe(r){return Xt.call(this,r.values.subarray(0,r.length*r.stride))}function tc(r){const{length:t,values:e,valueOffsets:n}=r,s=n[0],i=n[t],o=Math.min(i-s,e.byteLength-s);return Xt.call(this,js(-n[0],t,n)),Xt.call(this,e.subarray(s,s+o)),this}function ci(r){const{length:t,valueOffsets:e}=r;return e&&Xt.call(this,js(e[0],t,e)),this.visit(r.children[0])}function Ds(r){return this.visitMany(r.type.children.map((t,e)=>r.children[e]).filter(Boolean))[0]}ht.prototype.visitBool=Cd;ht.prototype.visitInt=qe;ht.prototype.visitFloat=qe;ht.prototype.visitUtf8=tc;ht.prototype.visitBinary=tc;ht.prototype.visitFixedSizeBinary=qe;ht.prototype.visitDate=qe;ht.prototype.visitTimestamp=qe;ht.prototype.visitTime=qe;ht.prototype.visitDecimal=qe;ht.prototype.visitList=ci;ht.prototype.visitStruct=Ds;ht.prototype.visitUnion=Md;ht.prototype.visitInterval=qe;ht.prototype.visitFixedSizeList=ci;ht.prototype.visitMap=ci;class ec extends Xs{constructor(t){super(),this._position=0,this._started=!1,this._sink=new gn,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Nt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return or(t)?t.then(e=>this.writeAll(e)):Cr(t)?hi(this,t):di(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof gn?this._sink=t:(this._sink=new gn,t&&nl(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&sl(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!e||!Rs(e,this._schema))&&(e==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof St&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof Ft&&!(e=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(e&&!Rs(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof Ft?t instanceof si||this._writeRecordBatch(t):t instanceof St?this.writeAll(t.batches):Zr(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,s=Tt.encode(t),i=s.byteLength,o=this._writeLegacyIpcFormat?4:8,a=i+o+n&~n,c=a-i-o;return t.headerType===K.RecordBatch?this._recordBatchBlocks.push(new $e(a,t.bodyLength,this._position)):t.headerType===K.DictionaryBatch&&this._dictionaryBlocks.push(new $e(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),i>0&&this._write(s),this._writePadding(c)}_write(t){if(this._started){const e=H(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Tt.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Qr)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:s,buffers:i}=ht.assemble(t),o=new Pt(t.numRows,n,s),a=Tt.from(o,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(i)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:s,nodes:i,bufferRegions:o,buffers:a}=ht.assemble(new J([t])),c=new Pt(t.length,i,o),l=new _e(c,e,n),u=Tt.from(l,s);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,s;for(let i=-1,o=t.length;++i<o;)(e=t[i])&&(n=e.byteLength)>0&&(this._write(e),(s=(n+7&-8)-n)>0&&this._writePadding(s));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let s=this._dictionaryDeltaOffsets.get(e)||0;if(s===0||(n=n==null?void 0:n.slice(s)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,s>0),s+=i.length}return this}}class li extends ec{static writeAll(t,e){const n=new li(e);return or(t)?t.then(s=>n.writeAll(s)):Cr(t)?hi(n,t):di(n,t)}}class ui extends ec{static writeAll(t){const e=new ui;return or(t)?t.then(n=>e.writeAll(n)):Cr(t)?hi(e,t):di(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Hr.encode(new Hr(t,Ct.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function di(r,t){let e=t;t instanceof St&&(e=t.batches,r.reset(void 0,t.schema));for(const n of e)r.write(n);return r.finish()}function hi(r,t){var e,n,s,i;return E(this,void 0,void 0,function*(){try{for(e=sr(t);n=yield e.next(),!n.done;){const o=n.value;r.write(o)}}catch(o){s={error:o}}finally{try{n&&!n.done&&(i=e.return)&&(yield i.call(e))}finally{if(s)throw s.error}}return r.finish()})}function Ud(r,t="stream"){return(t==="stream"?li:ui).writeAll(r).toUint8Array(!0)}var Pd=Object.create,rc=Object.defineProperty,xd=Object.getOwnPropertyDescriptor,Vd=Object.getOwnPropertyNames,jd=Object.getPrototypeOf,zd=Object.prototype.hasOwnProperty,$d=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Gd=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Vd(t))!zd.call(r,s)&&s!==e&&rc(r,s,{get:()=>t[s],enumerable:!(n=xd(t,s))||n.enumerable});return r},Wd=(r,t,e)=>(e=r!=null?Pd(jd(r)):{},Gd(t||!r||!r.__esModule?rc(e,"default",{value:r,enumerable:!0}):e,r)),Yd=$d((r,t)=>{t.exports=Worker}),nc=(r=>(r[r.UNDEFINED=0]="UNDEFINED",r[r.AUTOMATIC=1]="AUTOMATIC",r[r.READ_ONLY=2]="READ_ONLY",r[r.READ_WRITE=3]="READ_WRITE",r))(nc||{}),bi=(r=>(r[r.NONE=0]="NONE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARNING=3]="WARNING",r[r.ERROR=4]="ERROR",r))(bi||{}),sc=(r=>(r[r.NONE=0]="NONE",r[r.CONNECT=1]="CONNECT",r[r.DISCONNECT=2]="DISCONNECT",r[r.OPEN=3]="OPEN",r[r.QUERY=4]="QUERY",r[r.INSTANTIATE=5]="INSTANTIATE",r))(sc||{}),ic=(r=>(r[r.NONE=0]="NONE",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR",r[r.START=3]="START",r[r.RUN=4]="RUN",r[r.CAPTURE=5]="CAPTURE",r))(ic||{}),oc=(r=>(r[r.NONE=0]="NONE",r[r.WEB_WORKER=1]="WEB_WORKER",r[r.NODE_WORKER=2]="NODE_WORKER",r[r.BINDINGS=3]="BINDINGS",r[r.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",r))(oc||{}),qd=class{log(r){}},ac=class{constructor(r=2){this.level=r}log(r){r.level>=this.level&&console.log(r)}};function Hd(r){switch(r){case 0:return"NONE";case 1:return"DEBUG";case 2:return"INFO";case 3:return"WARNING";case 4:return"ERROR";default:return"?"}}function Qd(r){switch(r){case 0:return"NONE";case 1:return"OK";case 2:return"ERROR";case 3:return"START";case 4:return"RUN";case 5:return"CAPTURE";default:return"?"}}function Kd(r){switch(r){case 1:return"CONNECT";case 2:return"DISCONNECT";case 5:return"INSTANTIATE";case 3:return"OPEN";case 4:return"QUERY";default:return"?"}}function Jd(r){switch(r){case 0:return"NONE";case 1:return"WEB WORKER";case 2:return"NODE WORKER";case 3:return"DUCKDB BINDINGS";case 4:return"DUCKDB";default:return"?"}}var cc=(r=>(r[r.SUCCESS=0]="SUCCESS",r))(cc||{}),lc=class{constructor(r,t){this._bindings=r,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(r){return r(this._bindings,this._conn)}async query(r){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:r});let t=await this._bindings.runQuery(this._conn,r),e=Ht.from(t);return console.assert(e.isSync(),"Reader is not sync"),console.assert(e.isFile(),"Reader is not file"),new St(e)}async send(r){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:r});let t=await this._bindings.startPendingQuery(this._conn,r);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let e=new fi(this._bindings,this._conn,t),n=await Ht.from(e);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(r){return await this._bindings.getTableNames(this._conn,r)}async prepare(r){let t=await this._bindings.createPrepared(this._conn,r);return new uc(this._bindings,this._conn,t)}async insertArrowTable(r,t){let e=Ud(r,"stream");await this.insertArrowFromIPCStream(e,t)}async insertArrowFromIPCStream(r,t){await this._bindings.insertArrowFromIPCStream(this._conn,r,t)}async insertCSVFromPath(r,t){await this._bindings.insertCSVFromPath(this._conn,r,t)}async insertJSONFromPath(r,t){await this._bindings.insertJSONFromPath(this._conn,r,t)}},fi=class{constructor(r,t,e){this.db=r,this.conn=t,this.header=e,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let r;return this._inFlight!=null?(r=await this._inFlight,this._inFlight=null):r=await this.db.fetchQueryResults(this.conn),this._depleted=r.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:r}}[Symbol.asyncIterator](){return this}},uc=class{constructor(r,t,e){this.bindings=r,this.connectionId=t,this.statementId=e}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...r){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,r),e=Ht.from(t);return console.assert(e.isSync()),console.assert(e.isFile()),new St(e)}async send(...r){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,r),e=new fi(this.bindings,this.connectionId,t),n=await Ht.from(e);return console.assert(n.isAsync()),console.assert(n.isStream()),n}},dc=(r=>(r.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",r.CLOSE_PREPARED="CLOSE_PREPARED",r.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",r.CONNECT="CONNECT",r.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",r.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",r.CREATE_PREPARED="CREATE_PREPARED",r.DISCONNECT="DISCONNECT",r.DROP_FILE="DROP_FILE",r.DROP_FILES="DROP_FILES",r.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",r.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",r.FLUSH_FILES="FLUSH_FILES",r.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",r.GET_TABLE_NAMES="GET_TABLE_NAMES",r.GET_VERSION="GET_VERSION",r.GLOB_FILE_INFOS="GLOB_FILE_INFOS",r.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",r.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",r.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",r.INSTANTIATE="INSTANTIATE",r.OPEN="OPEN",r.PING="PING",r.POLL_PENDING_QUERY="POLL_PENDING_QUERY",r.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",r.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",r.REGISTER_FILE_URL="REGISTER_FILE_URL",r.RESET="RESET",r.RUN_PREPARED="RUN_PREPARED",r.RUN_QUERY="RUN_QUERY",r.SEND_PREPARED="SEND_PREPARED",r.START_PENDING_QUERY="START_PENDING_QUERY",r.TOKENIZE="TOKENIZE",r))(dc||{}),hc=(r=>(r.CONNECTION_INFO="CONNECTION_INFO",r.ERROR="ERROR",r.FEATURE_FLAGS="FEATURE_FLAGS",r.FILE_BUFFER="FILE_BUFFER",r.FILE_INFOS="FILE_INFOS",r.FILE_SIZE="FILE_SIZE",r.FILE_STATISTICS="FILE_STATISTICS",r.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",r.LOG="LOG",r.OK="OK",r.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",r.QUERY_PLAN="QUERY_PLAN",r.QUERY_RESULT="QUERY_RESULT",r.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",r.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",r.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",r.REGISTERED_FILE="REGISTERED_FILE",r.SCRIPT_TOKENS="SCRIPT_TOKENS",r.SUCCESS="SUCCESS",r.TABLE_NAMES="TABLE_NAMES",r.VERSION_STRING="VERSION_STRING",r))(hc||{}),G=class{constructor(r,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=r,this.data=t,this.promise=new Promise((e,n)=>{this.promiseResolver=e,this.promiseRejecter=n})}};function mn(r){switch(r.typeId){case h.Binary:return{sqlType:"binary"};case h.Bool:return{sqlType:"bool"};case h.Date:return{sqlType:"date"};case h.DateDay:return{sqlType:"date32[d]"};case h.DateMillisecond:return{sqlType:"date64[ms]"};case h.Decimal:{let t=r;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case h.Float:return{sqlType:"float"};case h.Float16:return{sqlType:"float16"};case h.Float32:return{sqlType:"float32"};case h.Float64:return{sqlType:"float64"};case h.Int:return{sqlType:"int32"};case h.Int16:return{sqlType:"int16"};case h.Int32:return{sqlType:"int32"};case h.Int64:return{sqlType:"int64"};case h.Uint16:return{sqlType:"uint16"};case h.Uint32:return{sqlType:"uint32"};case h.Uint64:return{sqlType:"uint64"};case h.Uint8:return{sqlType:"uint8"};case h.IntervalDayTime:return{sqlType:"interval[dt]"};case h.IntervalYearMonth:return{sqlType:"interval[m]"};case h.List:return{sqlType:"list",valueType:mn(r.valueType)};case h.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:r.byteWidth};case h.Null:return{sqlType:"null"};case h.Utf8:return{sqlType:"utf8"};case h.Struct:return{sqlType:"struct",fields:r.children.map(t=>Ls(t.name,t.type))};case h.Map:{let t=r;return{sqlType:"map",keyType:mn(t.keyType),valueType:mn(t.valueType)}}case h.Time:return{sqlType:"time[s]"};case h.TimeMicrosecond:return{sqlType:"time[us]"};case h.TimeMillisecond:return{sqlType:"time[ms]"};case h.TimeNanosecond:return{sqlType:"time[ns]"};case h.TimeSecond:return{sqlType:"time[s]"};case h.Timestamp:return{sqlType:"timestamp",timezone:r.timezone||void 0};case h.TimestampSecond:return{sqlType:"timestamp[s]",timezone:r.timezone||void 0};case h.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:r.timezone||void 0};case h.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:r.timezone||void 0};case h.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:r.timezone||void 0}}throw new Error(`unsupported arrow type: ${r.toString()}`)}function Ls(r,t){let e=mn(t);return e.name=r,e}var Zd=new TextEncoder,bc=class{constructor(r,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=r,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(r){this._worker=r,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,e)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(r,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let e=this._nextMessageId++;return this._pendingRequests.set(e,r),this._worker.postMessage({messageId:e,type:r.type,data:r.data},t),await r.promise}onMessage(r){let t=r.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let n of this._onInstantiationProgress)n(t.data);return}}let e=this._pendingRequests.get(t.requestId);if(!e){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let n=new Error(t.data.message);n.name=t.data.name,n.stack=t.data.stack,e.promiseRejecter(n);return}switch(e.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){e.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){e.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){e.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){e.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){e.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){e.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){e.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){e.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){e.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){e.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){e.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){e.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){e.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){e.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){e.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){e.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){e.promiseResolver(t.data);return}break}e.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(r){console.error(r),console.error(`error in duckdb worker: ${r.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let r=new G("RESET",null);return await this.postTask(r)}async ping(){let r=new G("PING",null);await this.postTask(r)}async dropFile(r){let t=new G("DROP_FILE",r);return await this.postTask(t)}async dropFiles(){let r=new G("DROP_FILES",null);return await this.postTask(r)}async flushFiles(){let r=new G("FLUSH_FILES",null);return await this.postTask(r)}async instantiate(r,t=null,e=n=>{}){this._onInstantiationProgress.push(e);let n=new G("INSTANTIATE",[r,t]);return await this.postTask(n)}async getVersion(){let r=new G("GET_VERSION",null);return await this.postTask(r)}async getFeatureFlags(){let r=new G("GET_FEATURE_FLAGS",null);return await this.postTask(r)}async open(r){let t=new G("OPEN",r);await this.postTask(t)}async tokenize(r){let t=new G("TOKENIZE",r);return await this.postTask(t)}async connectInternal(){let r=new G("CONNECT",null);return await this.postTask(r)}async connect(){let r=await this.connectInternal();return new lc(this,r)}async disconnect(r){let t=new G("DISCONNECT",r);await this.postTask(t)}async runQuery(r,t){let e=new G("RUN_QUERY",[r,t]);return await this.postTask(e)}async startPendingQuery(r,t){let e=new G("START_PENDING_QUERY",[r,t]);return await this.postTask(e)}async pollPendingQuery(r){let t=new G("POLL_PENDING_QUERY",r);return await this.postTask(t)}async cancelPendingQuery(r){let t=new G("CANCEL_PENDING_QUERY",r);return await this.postTask(t)}async fetchQueryResults(r){let t=new G("FETCH_QUERY_RESULTS",r);return await this.postTask(t)}async getTableNames(r,t){let e=new G("GET_TABLE_NAMES",[r,t]);return await this.postTask(e)}async createPrepared(r,t){let e=new G("CREATE_PREPARED",[r,t]);return await this.postTask(e)}async closePrepared(r,t){let e=new G("CLOSE_PREPARED",[r,t]);await this.postTask(e)}async runPrepared(r,t,e){let n=new G("RUN_PREPARED",[r,t,e]);return await this.postTask(n)}async sendPrepared(r,t,e){let n=new G("SEND_PREPARED",[r,t,e]);return await this.postTask(n)}async globFiles(r){let t=new G("GLOB_FILE_INFOS",r);return await this.postTask(t)}async registerFileText(r,t){let e=Zd.encode(t);await this.registerFileBuffer(r,e)}async registerFileURL(r,t,e,n){t===void 0&&(t=r);let s=new G("REGISTER_FILE_URL",[r,t,e,n]);await this.postTask(s)}async registerEmptyFileBuffer(r){let t=new G("REGISTER_FILE_BUFFER",[r,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(r,t){let e=new G("REGISTER_FILE_BUFFER",[r,t]);await this.postTask(e,[t.buffer])}async registerFileHandle(r,t,e,n){let s=new G("REGISTER_FILE_HANDLE",[r,t,e,n]);await this.postTask(s,[])}async collectFileStatistics(r,t){let e=new G("COLLECT_FILE_STATISTICS",[r,t]);await this.postTask(e,[])}async exportFileStatistics(r){let t=new G("EXPORT_FILE_STATISTICS",r);return await this.postTask(t,[])}async copyFileToBuffer(r){let t=new G("COPY_FILE_TO_BUFFER",r);return await this.postTask(t)}async copyFileToPath(r,t){let e=new G("COPY_FILE_TO_PATH",[r,t]);await this.postTask(e)}async insertArrowFromIPCStream(r,t,e){if(t.length==0)return;let n=new G("INSERT_ARROW_FROM_IPC_STREAM",[r,t,e]);await this.postTask(n,[t.buffer])}async insertCSVFromPath(r,t,e){if(e.columns!==void 0){let s=[];for(let i in e.columns){let o=e.columns[i];s.push(Ls(i,o))}e.columnsFlat=s,delete e.columns}let n=new G("IMPORT_CSV_FROM_PATH",[r,t,e]);await this.postTask(n)}async insertJSONFromPath(r,t,e){if(e.columns!==void 0){let s=[];for(let i in e.columns){let o=e.columns[i];s.push(Ls(i,o))}e.columnsFlat=s,delete e.columns}let n=new G("IMPORT_JSON_FROM_PATH",[r,t,e]);await this.postTask(n)}},Xd=class{constructor(){this._bindings=null,this._nextMessageId=0}log(r){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:r},[])}sendOK(r){this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"OK",data:null},[])}failWith(r,t){let e={name:t.name,message:t.message,stack:t.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"ERROR",data:e},[])}async onMessage(r){switch(r.type){case"PING":this.sendOK(r);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(r,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(r.data[0],r.data[1],t=>{this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"INSTANTIATE_PROGRESS",data:t},[])}),this.sendOK(r)}catch(t){this._bindings=null,this.failWith(r,t)}return}if(!this._bindings)return this.failWith(r,new Error("duckdb is not initialized"));try{switch(r.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(r);break;case"OPEN":this._bindings.open(r.data),this.sendOK(r);break;case"DROP_FILE":this._bindings.dropFile(r.data),this.sendOK(r);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(r);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(r);break;case"CONNECT":{let t=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"CONNECTION_INFO",data:t.useUnsafe((e,n)=>n)},[]);break}case"DISCONNECT":this._bindings.disconnect(r.data),this.sendOK(r);break;case"CREATE_PREPARED":{let t=this._bindings.createPrepared(r.data[0],r.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"PREPARED_STATEMENT_ID",data:t},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(r.data[0],r.data[1]),this.sendOK(r);break}case"RUN_PREPARED":{let t=this._bindings.runPrepared(r.data[0],r.data[1],r.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"RUN_QUERY":{let t=this._bindings.runQuery(r.data[0],r.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"SEND_PREPARED":{let t=this._bindings.sendPrepared(r.data[0],r.data[1],r.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT_HEADER",data:t},[t.buffer]);break}case"START_PENDING_QUERY":{let t=this._bindings.startPendingQuery(r.data[0],r.data[1]),e=[];t&&e.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},e);break}case"POLL_PENDING_QUERY":{let t=this._bindings.pollPendingQuery(r.data),e=[];t&&e.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},e);break}case"CANCEL_PENDING_QUERY":{let t=this._bindings.cancelPendingQuery(r.data);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"SUCCESS",data:t},[]);break}case"FETCH_QUERY_RESULTS":{let t=this._bindings.fetchQueryResults(r.data);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"QUERY_RESULT_CHUNK",data:t},[t.buffer]);break}case"GET_TABLE_NAMES":{let t=this._bindings.getTableNames(r.data[0],r.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"TABLE_NAMES",data:t},[]);break}case"GLOB_FILE_INFOS":{let t=this._bindings.globFiles(r.data);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"FILE_INFOS",data:t},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(r.data[0],r.data[1],r.data[2],r.data[3]),this.sendOK(r);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(r.data[0],r.data[1]),this.sendOK(r);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(r.data[0],r.data[1],r.data[2],r.data[3]),this.sendOK(r);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(r.data[0],r.data[1]),this.sendOK(r);break;case"COPY_FILE_TO_BUFFER":{let t=this._bindings.copyFileToBuffer(r.data);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"FILE_BUFFER",data:t},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(r.data[0],r.data[1]),this.sendOK(r);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(r.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(r.data[0],r.data[1],r.data[2]),this.sendOK(r);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(r.data[0],r.data[1],r.data[2]),this.sendOK(r);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(r.data[0],r.data[1],r.data[2]),this.sendOK(r);break}case"TOKENIZE":{let t=this._bindings.tokenize(r.data);this.postMessage({messageId:this._nextMessageId++,requestId:r.messageId,type:"SCRIPT_TOKENS",data:t},[]);break}}}catch(t){return this.failWith(r,t)}}},th=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),eh=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),rh=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),nh=()=>(async r=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(r)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),gi={name:"@duckdb/duckdb-wasm",version:"1.27.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.24.8",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},fc=gi.name,gc=gi.version,pi=gi.version.split("."),sh=pi[0],ih=pi[1],oh=pi[2],yi=()=>typeof navigator>"u",pc=()=>yi()?"node":navigator.userAgent,ah=()=>pc().includes("Firefox"),ch=()=>/^((?!chrome|android).)*safari/i.test(pc());function lh(){let r=`https://cdn.jsdelivr.net/npm/${fc}@${gc}/dist/`;return{mvp:{mainModule:`${r}duckdb-mvp.wasm`,mainWorker:`${r}duckdb-browser-mvp.worker.js`},eh:{mainModule:`${r}duckdb-eh.wasm`,mainWorker:`${r}duckdb-browser-eh.worker.js`}}}var bs=null,fs=null,gs=null,ps=null,ys=null;async function yc(){return bs==null&&(bs=typeof BigInt64Array<"u"),fs==null&&(fs=await eh()),gs==null&&(gs=await nh()),ps==null&&(ps=await rh()),ys==null&&(ys=await th()),{bigInt64Array:bs,crossOriginIsolated:yi()||globalThis.crossOriginIsolated||!1,wasmExceptions:fs,wasmSIMD:ps,wasmThreads:gs,wasmBulkMemory:ys}}async function uh(r){let t=await yc();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&r.coi)return{mainModule:r.coi.mainModule,mainWorker:r.coi.mainWorker,pthreadWorker:r.coi.pthreadWorker};if(r.eh)return{mainModule:r.eh.mainModule,mainWorker:r.eh.mainWorker,pthreadWorker:null}}return{mainModule:r.mvp.mainModule,mainWorker:r.mvp.mainWorker,pthreadWorker:null}}var dh=Wd(Yd());async function hh(r){let t=new Request(r),e=await fetch(t),n=URL.createObjectURL(await e.blob());return new dh.default(n)}function bh(){let r=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),r.decode(t))}bh();var mc=(r=>(r[r.BUFFER=0]="BUFFER",r[r.NODE_FS=1]="NODE_FS",r[r.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",r[r.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",r[r.HTTP=4]="HTTP",r[r.S3=5]="S3",r))(mc||{});const fh=Object.freeze(Object.defineProperty({__proto__:null,AsyncDuckDB:bc,AsyncDuckDBConnection:lc,AsyncDuckDBDispatcher:Xd,AsyncPreparedStatement:uc,AsyncResultStreamIterator:fi,ConsoleLogger:ac,DuckDBAccessMode:nc,DuckDBDataProtocol:mc,LogEvent:ic,LogLevel:bi,LogOrigin:oc,LogTopic:sc,PACKAGE_NAME:fc,PACKAGE_VERSION:gc,PACKAGE_VERSION_MAJOR:sh,PACKAGE_VERSION_MINOR:ih,PACKAGE_VERSION_PATCH:oh,StatusCode:cc,VoidLogger:qd,WorkerRequestType:dc,WorkerResponseType:hc,WorkerTask:G,createWorker:hh,getJsDelivrBundles:lh,getLogEventLabel:Qd,getLogLevelLabel:Hd,getLogOriginLabel:Jd,getLogTopicLabel:Kd,getPlatformFeatures:yc,isFirefox:ah,isNode:yi,isSafari:ch,selectBundle:uh},Symbol.toStringTag,{value:"Module"})),gh={db:null,isLoading:!1,sharedConnection:null,tables:{},combinedSchema:{},previousQueries:[]},ph=()=>{console.log("Initializing data store");const r=Us(In(gh),"DataStore"),{set:t,update:e,subscribe:n}=r,s=c=>{e(l=>(l.isLoading=c,l))};let i=null;i=(async()=>{const{db:l}=dt(r);if(l)return console.log("Database already initialized"),l;s(!0);const u=await ms(()=>import("./duckdb-mvp.c7d5d8fa.js"),[],import.meta.url).then(m=>m.default),b=await ms(()=>import("./duckdb-browser-mvp.worker.3cf3a758.js"),[],import.meta.url).then(m=>m.default),d=new ac(bi.WARNING),f=new b,g=new bc(d,f);await g.instantiate(u);const _=await g.connect();return e(m=>(m.db=g,m.isLoading=!1,m.sharedConnection=_,m)),console.debug("Initialized duckdb"),g})();const o=async(c,l)=>{const u=performance.now();let b,d;try{b=await l}catch(f){d=f}finally{const f=performance.now();e(g=>(g.previousQueries.push({query:c,success:d===void 0,executionTime:f-u}),g))}if(d)throw d;return b},a=async c=>{try{await i}catch(u){console.error("Failed to initialize duckdb:",u);return}const{sharedConnection:l}=dt(r);if(l)return o(c,l.query(c))};return{subscribe:n,set:t,update:e,rawStore:r,setIsLoading:s,executeQuery:a,getConnection:async()=>{try{await i}catch(l){console.error("Failed to initialize duckdb:",l);return}const{sharedConnection:c}=dt(r);if(c)return c},getTables:async()=>{const c="SELECT table_name FROM information_schema.tables;";try{const l=await a(c);return l?l.toArray().map(u=>u.table_name):[]}catch(l){return console.error(l),[]}},getTableSchema:async c=>{const l=`DESCRIBE SELECT * FROM "${c}";`;try{const u=await a(l);if(!u)return{};const b={};return u.toArray().forEach(d=>{switch(d.column_type){case"INTEGER":case"BIGINT":case"SMALLINT":case"TINYINT":case"FLOAT":case"DOUBLE":b[d.column_name]="number";break;default:b[d.column_name]="string"}}),b}catch(u){return console.error(u),{}}},getDistinctValues:async(c,l)=>{try{const u=await a(`SELECT DISTINCT "${l}" FROM "${c}"`);return u?u.toArray().map(b=>b[l]):[]}catch{return[]}}}},yh=()=>{const r=ph();return{...r,...Jc(r,r.rawStore),...Zc(r)}},Zt=yh(),ks=r=>btoa(JSON.stringify(r)),_c=r=>JSON.parse(atob(r)),wc=(r,t,e)=>{switch(t){case"string":return e;case"number":return Number(e);case"boolean":return e==="true";case"object":return _c(e)}},vc=(r,t,e)=>{switch(t){case"string":return e;case"number":return e.toString();case"boolean":return e.toString();case"object":return Array.isArray(e)&&e.length===0?null:ks(e)}return null},mh=(r,t,e,n)=>{const s=new URLSearchParams(location.search);console.log("withDecoder",s),r.set(n(s.get(t)));const i=c=>{const l=new URLSearchParams(location.search),u=e(c);return u==null?(l.delete(t),l):(l.set(t,u),l)},o=r.update;r.update=c=>{o(l=>{const u=c(l),b=i(u);return b.toString()===location.search.slice(1)||history.replaceState(null,"",`${location.pathname}?${b.toString()}`),u})};const a=r.set;return r.set=c=>{a(c);const l=dt(r),u=i(l);history.replaceState(null,"",`${location.pathname}?${u.toString()}`)},r},_h=(r,t,e=vc,n=wc)=>{const s=new URLSearchParams(location.search),i=Object.entries(t);r.update(l=>(i.forEach(([u,b])=>{const d=s.get(u.toString());d!==null&&(l[u]=n(u.toString(),b,d),console.debug("[state-decode]",u,d,l[u]))}),console.log("Restored state",l),l));const o=l=>{const u=new URLSearchParams(location.search);return i.forEach(([b,d])=>{const f=l[b];if(f===void 0){u.delete(b.toString());return}const g=e(b.toString(),d,f);if(g==null){u.delete(b.toString());return}u.set(b.toString(),g)}),u},a=r.update;r.update=l=>{a(u=>{const b=l(u),d=o(b);return d.toString()===location.search.slice(1)||history.replaceState(null,"",`${location.pathname}?${d.toString()}`),b})};const c=r.set;return r.set=l=>{c(l);const u=dt(r),b=o(u);history.replaceState(null,"",`${location.pathname}?${b.toString()}`)},r},D1=["#3498db","#e74c3c","#2ECC71","#F39C12","#9B59B6","#34495E","#E67E22","#1ABC9C","#7F8C8D","#F1C40F","#E74C3C","#1ABC9C","#9B59B6","#F39C12","#E67E22"],ln={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],7:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],8:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],9:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],10:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],11:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],7:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],8:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],9:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],10:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],11:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],7:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],8:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],9:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],10:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],11:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],7:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],8:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],9:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],10:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],11:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],7:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],8:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],9:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],10:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],11:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)"],7:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)"],8:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)"],7:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"],8:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)","rgb(102,102,102)"],type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)"],7:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)"],8:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)"],9:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)","rgb(153,153,153)"],type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)"],6:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)"],7:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)"],8:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)"],9:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)"],10:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)"],11:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)"],12:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)"],7:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)"],8:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)"],7:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)"],8:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)"],9:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)"],10:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)"],11:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)"],12:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)","rgb(177,89,40)"],type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)"],7:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)"],8:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)","rgb(204,204,204)"],type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)"],6:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)"],7:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)"],8:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],9:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)","rgb(242,242,242)"],type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],7:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],8:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],9:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(179,0,0)","rgb(127,0,0)"],type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],7:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],8:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],9:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(4,90,141)","rgb(2,56,88)"],type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],7:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],8:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],9:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(129,15,124)","rgb(77,0,75)"],type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],7:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],8:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],9:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(166,54,3)","rgb(127,39,4)"],type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],7:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],8:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],9:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],7:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],8:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],9:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(153,52,4)","rgb(102,37,6)"],type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],7:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],8:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],9:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,104,55)","rgb(0,69,41)"],type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],7:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],8:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],9:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(165,15,21)","rgb(103,0,13)"],type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],7:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],8:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],9:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)","rgb(73,0,106)"],type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],7:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],8:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],9:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],7:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],8:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],9:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(37,52,148)","rgb(8,29,88)"],type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],7:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],8:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],9:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(84,39,143)","rgb(63,0,125)"],type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],7:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],8:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],9:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,104,172)","rgb(8,64,129)"],type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],7:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],8:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],9:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)","rgb(0,0,0)"],type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],7:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],8:["rgb(255,255,204)","rgb(255,237,160)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],7:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],8:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],9:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(152,0,67)","rgb(103,0,31)"],type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],7:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],9:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"],type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],7:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],8:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],9:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,108,89)","rgb(1,70,54)"],type:"seq"}};class Ic extends Kc{constructor(e={}){super({});ke(this,"_dataStore");ke(this,"_optionsStore");ke(this,"dataStore");ke(this,"optionsStore");ke(this,"setFilterOption",(e,n)=>{this._optionsStore.update(s=>(s[e]=n,s.isValid=this.isValid(s),s)),this.applyOptionsIfValid()});this._dataStore=In(void 0),this.dataStore=Ai(this._dataStore);const n={...e,isRendered:!1,isValid:this.isValid(e)};this._optionsStore=Us(mh(In(n),"filterStore",s=>ks(s),s=>{if(!s||s==="undefined")return n;const i=_c(s);return console.log("URL decoded state",i),{isRendered:!1,isValid:this.isValid(i),...i}}),"PlaneGraphOptions",{color:"orange"}),this.optionsStore=Ai(this._optionsStore),this.reloadFilterOptions(),this.applyOptionsIfValid()}toString(){const e=dt(this._optionsStore);return console.log("Encoding",e),ks({type:this.getType(),state:e})}isValid(e){if(!e)return!1;const n=Object.entries(this.filterOptions).every(([s,i])=>i.type==="row"?i.keys.every((o,a)=>i.items[a].required?e[o]!==void 0:!0):i.required?e[s]!==void 0:!0);return console.log({isValid:n}),n}reloadFilterOptions(){const e=dt(Zt),n=Object.entries(e.combinedSchema).filter(([,i])=>i==="string").map(([i])=>i),s=Object.entries(e.combinedSchema).filter(([,i])=>i==="number").map(([i])=>i);this.filterOptions={groupBy:{type:"string",options:n,label:"Group By"},aggregation:{type:"string",label:"Aggregation",required:!0,options:Object.values(En),default:En.MIN},xColumnName:{type:"row",keys:["xColumnName","scaleX"],grow:[.7,.3],items:[{type:"string",options:s,label:"X Axis",required:!0},{type:"string",options:Object.values(Gt),label:"X Scale",required:!0}]},yColumnName:{type:"row",keys:["yColumnName","scaleY"],grow:[.7,.3],items:[{type:"string",options:s,label:"Y Axis",required:!0},{type:"string",options:Object.values(Gt),label:"Y Scale",required:!0}]},zColumnName:{type:"row",keys:["zColumnName","scaleZ"],grow:[.7,.3],items:[{type:"string",options:s,label:"Z Axis",required:!0},{type:"string",options:[Gt.LINEAR,Gt.LOG],label:"Z Scale",required:!0}]},tileCount:{type:"number",options:[2,128],label:"Tile Count",required:!0}}}getType(){return ts.PLANE}getCurrentOptions(){return dt(this._optionsStore)}async getGlobalRange(e,n){const s=dt(Zt),i=Object.keys(s.tables);try{return(await Promise.all(i.map(a=>Zt.getMinMax(a,e,n)))).reduce((a,[c,l])=>[Math.min(a[0],c),Math.max(a[1],l)],[0,-1/0])}catch{return null}}async applyOptionsIfValid(){const e=dt(this._optionsStore);if(console.log("applying store",e),e.isValid!==!0)return;const n=dt(Zt);try{const s=Object.keys(n.tables);console.debug("loading data from tables",s);const i=await this.getGlobalRange(e.xColumnName,e.scaleX),o=await this.getGlobalRange(e.yColumnName,e.scaleY),a=await this.getGlobalRange(e.zColumnName,e.scaleZ);if(!i||!o||!a){Ae.error({message:"Data range invalid",description:JSON.stringify({column:e.xColumnName,xAxisRange:i,yAxisRange:o,zAxisRange:a})});return}console.debug("axis ranges",{xAxisRange:i,yAxisRange:o,zAxisRange:a});const c=await Promise.all(s.map(b=>Zt.getTiledData(b,e,i,o,a))),l=await Promise.all(s.map(async b=>{const d=await Zt.getDistinctValues(b,e.groupBy);if(d.length>30){const g=`Too many options returned by group by number=${d.length} (limit 10)`;throw Ae.error({message:g}),new Error(g)}return(await Promise.all(d.map(g=>Zt.getTiledData(b,e,i,o,a,{columnName:e.groupBy,value:g})))).map((g,_)=>({points:g.data,min:g.min,max:g.max,isChild:!0,name:d[_],color:ln.Set2[8][_%ln.Set2[8].length],meta:{rows:g.queryResult}}))})),u=c.map((b,d)=>({points:b.data,layers:l[d],min:b.min,max:b.max,name:s[d],color:ln.Paired[12][d%ln.Paired[12].length],meta:{rows:b.queryResult}}));this._dataStore.set({layers:u,labels:{x:e.xColumnName,y:e.yColumnName,z:e.zColumnName},ranges:{x:i,y:o,z:a},tileRange:{x:e.xTileCount??e.tileCount,z:e.zTileCount??e.tileCount}})}catch(s){console.error("Failed to load tiled data:",s);return}}}const Sc={isLoading:!0,preloadedTables:[],selectedTables:[]},wh=(r,t,e)=>r==="graphOptions"?(console.log("Encoding graph options",e),e?e.getType():void 0):vc(r,t,e);let _n=null;const vh=(r,t,e)=>{if(r==="graphOptions")switch(e){case ts.PLANE:{_n=new Ic;return}}return wc(r,t,e)},Ji=In(JSON.parse(JSON.stringify(Sc))),Ih=()=>{console.log("### INIT STORE ###",dt(Ji));const r=Us(_h(Ji,{selectedTables:"object",graphOptions:"object"},wh,vh),"FilterStore",{...Cc,color:"green"}),{set:t,update:e,subscribe:n}=r,s=a=>{e(c=>(c.isLoading=a,c))},i=async a=>{s(!0);try{const c=await Zt.loadTableReferences(a);r.update(l=>(l.selectedTables=a,l))}catch(c){console.error("Failed to load tables:",c);return}finally{s(!1)}},o=()=>{const a=dt(r);a.graphOptions&&(a.graphOptions.reloadFilterOptions(),a.graphOptions.applyOptionsIfValid())};return{set:t,update:e,subscribe:n,removeTable:async a=>{try{await Zt.removeTable(a),await o()}catch{Ae.error({message:`Failed to remove table "${a}"`})}},reset:()=>{Zt.resetDatabase();const a=JSON.parse(JSON.stringify(Sc));a.preloadedTables=dt(r).preloadedTables,a.isLoading=!1,t(a)},initWithPreloadedTables:async a=>{s(!0);const c=Object.entries(a).map(([u,b])=>({label:u,value:b}));e(u=>(u.preloadedTables=c,u));const{selectedTables:l}=dt(r);if(l.length)try{await i(l),_n&&_n!==null&&(e(u=>(u.graphOptions=_n??void 0,u)),await o())}catch(u){console.error("Failed to load selected tables:",u)}s(!1)},selectTables:i,selectBuildInTables:async a=>{const c=a.flatMap(l=>l.entries.map(u=>({name:u.name,tableName:l.name,source:nr.BUILD_IN,url:u.dataUrl})));try{await i(c),await o();return}catch{Ae.error({message:"Failed to load external tables",description:a.map(l=>l.name).join(",")})}},selectTableFromURL:async a=>{const c=[{name:a.hostname,tableName:a.pathname.replaceAll("/","-"),source:nr.URL,url:a.href}];try{await i(c),await o();return}catch(l){Ae.error({message:"Failed to load tables from file",description:`${c.map(u=>u.name).join(",")}, err=${l??"Unknown Error"}`})}},selectTablesFromFiles:async a=>{const c=[];for(const l of a)c.push({name:l.name,tableName:l.name,source:nr.FILE,file:l});try{await i(c),await o();return}catch(l){Ae.error({message:"Failed to load tables from file",description:`${c.map(u=>u.name).join(",")}, err=${l??"Unknown Error"}`})}},selectGraphType:async a=>{switch(a){case ts.PLANE:e(c=>(c.graphOptions=new Ic,c))}}}},Sh=Ih();function Eh(r){let t,e,n,s,i,o;return{c(){t=C("span"),e=yt("Drag and drop files here "),n=C("br"),s=yt(" or "),i=C("br"),o=yt(" click to select")},l(a){t=U(a,"SPAN",{});var c=O(t);e=mt(c,"Drag and drop files here "),n=U(c,"BR",{}),s=mt(c," or "),i=U(c,"BR",{}),o=mt(c," click to select"),c.forEach(p)},m(a,c){D(a,t,c),T(t,e),T(t,n),T(t,s),T(t,i),T(t,o)},d(a){a&&p(t)}}}function Th(r){let t,e;return{c(){t=C("span"),e=yt("Drop the files here")},l(n){t=U(n,"SPAN",{});var s=O(t);e=mt(s,"Drop the files here"),s.forEach(p)},m(n,s){D(n,t,s),T(t,e)},d(n){n&&p(t)}}}function Oh(r){let t,e,n,s;function i(c,l){return c[0]?Th:Eh}let o=i(r),a=o(r);return{c(){t=C("div"),e=C("span"),a.c(),this.h()},l(c){t=U(c,"DIV",{class:!0});var l=O(t);e=U(l,"SPAN",{class:!0});var u=O(e);a.l(u),u.forEach(p),l.forEach(p),this.h()},h(){y(e,"class","text-xl font-semibold text-background-400 dark:text-background-300"),y(t,"class","border-4 rounded-xl p-6 border-background-300/70 dark:border-background-700/60 text-center border-dotted svelte-1prujco"),gt(t,"dragging",r[0])},m(c,l){D(c,t,l),T(t,e),a.m(e,null),n||(s=[Ke(t,"dragenter",r[1]),Ke(t,"dragover",Ah),Ke(t,"dragleave",r[2]),Ke(t,"drop",r[3])],n=!0)},p(c,[l]){o!==(o=i(c))&&(a.d(1),a=o(c),a&&(a.c(),a.m(e,null))),l&1&&gt(t,"dragging",c[0])},i:pt,o:pt,d(c){c&&p(t),a.d(),n=!1,Ms(s)}}}function Ah(r){r.preventDefault()}function Rh(r,t,e){let{onFileDropped:n=void 0}=t,s=!1;function i(c){c.preventDefault(),e(0,s=!0)}function o(c){c.preventDefault(),e(0,s=!1)}function a(c){var u;c.preventDefault(),e(0,s=!1);const l=(u=c.dataTransfer)==null?void 0:u.files;l&&l.length>0&&n&&n(l)}return r.$$set=c=>{"onFileDropped"in c&&e(4,n=c.onFileDropped)},[s,i,o,a,n]}class Fh extends te{constructor(t){super(),ee(this,t,Rh,Oh,re,{onFileDropped:4})}}function Bh(r){let t,e;const n=r[1].default,s=Dr(n,r,r[0],null);return{c(){t=C("label"),s&&s.c(),this.h()},l(i){t=U(i,"LABEL",{class:!0});var o=O(t);s&&s.l(o),o.forEach(p),this.h()},h(){y(t,"class","font-bold text-sm px-3 pb text-secondary-500 dark:text-secondary-400")},m(i,o){D(i,t,o),s&&s.m(t,null),e=!0},p(i,[o]){s&&s.p&&(!e||o&1)&&Lr(s,n,i,i[0],e?Mr(n,i[0],o,null):kr(i[0]),null)},i(i){e||(V(s,i),e=!0)},o(i){$(s,i),e=!1},d(i){i&&p(t),s&&s.d(i)}}}function Nh(r,t,e){let{$$slots:n={},$$scope:s}=t;return r.$$set=i=>{"$$scope"in i&&e(0,s=i.$$scope)},[s,n]}class Dh extends te{constructor(t){super(),ee(this,t,Nh,Bh,re,{})}}const Ec=r=>{const t=document.querySelector("main");return t==null||t.appendChild(r).focus(),{destroy(){t!=null&&t.contains(r)&&(t==null||t.removeChild(r))}}},Tc=(r,t)=>{let e=r;for(;e;){if(e.classList&&e.classList.contains(t))return e;e=e.parentElement}return null},Lh="portal-root";var Oc=(r=>(r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r[r.LEADING=2]="LEADING",r[r.TRAILING=3]="TRAILING",r))(Oc||{});const kh=(r,t,e,n=3)=>{const s=r.getBoundingClientRect(),i=t.getBoundingClientRect();let o=i.left,a=i.top;switch(e){case 0:a=i.top-s.height-20-n;break;case 1:a=i.top+i.height+n;break;case 2:o=i.left-s.width-n;break;case 3:o=i.left+i.width+n;break;default:console.error("Invalid placement value");return}return o+s.width>window.innerWidth&&(o=window.innerWidth-(s.width+n)),a+s.height>window.innerHeight&&(a=window.innerHeight-(s.height+n)),o<0&&(o=n),a<0&&(a=n),[o,a]},Mh=(r,t,e,n=3)=>{const s=r.getBoundingClientRect();let i=t,o=e;return i+s.width>window.innerWidth&&(i=window.innerWidth-(s.width+n)),o+s.height>window.innerHeight&&(o=window.innerHeight-(s.height+n)),i<0&&(i=n),o<0&&(o=n),[i,o]},Ac={rootClass:Lh,placement:1},Ch=(r,t={})=>{const{rootClass:e,placement:n}={...Ac,...t},s=r.parentElement;if(!s)return Ec(r);const i=kh(r,s,n);if(!i)return;const[o,a]=i;r.style.left=`${o}px`,r.style.top=`${a}px`;const c=Tc(r,e);let l;return c?l=c:l=document.querySelector("main"),l==null||l.appendChild(r).focus(),{destroy(){l!=null&&l.contains(r)&&(l==null||l.removeChild(r))}}},L1=(r,t)=>{const{rootClass:e,x:n,y:s}={...Ac,...t};if(!r.parentElement)return Ec(r);const o=Mh(r,n,s);if(!o)return;const[a,c]=o;r.style.left=`${a}px`,r.style.top=`${c}px`;const l=Tc(r,e);let u;return l?u=l:u=document.querySelector("main"),u==null||u.appendChild(r).focus(),{destroy(){u!=null&&u.contains(r)&&(u==null||u.removeChild(r))}}},Uh=(r,t)=>{var o;let e=((o=t.whitelist)==null?void 0:o.filter(a=>a!==void 0))??[],n=t.onClickOutside;const s=a=>{const c=a.target;!r.contains(c)&&!e.some(l=>l.isSameNode(c))&&n()},i={passive:!0,capture:!0};return document.addEventListener("click",s,i),{destroy(){document.removeEventListener("click",s,i)},update(a){var c;e=((c=a.whitelist)==null?void 0:c.filter(l=>l!==void 0))??[],n=a.onClickOutside}}};const Ph=r=>({}),Zi=r=>({}),xh=r=>({}),Xi=r=>({}),Vh=r=>({}),to=r=>({});function jh(r){let t,e,n;const s=[r[7],{class:"flex items-center justify-between gap-2 "+r[2]}];let i={$$slots:{trailing:[Yh],default:[$h]},$$scope:{ctx:r}};for(let o=0;o<s.length;o+=1)i=Er(i,s[o]);return e=new Sn({props:i}),e.$on("click",r[5]),{c(){t=C("div"),_t(e.$$.fragment),this.h()},l(o){t=U(o,"DIV",{class:!0});var a=O(t);wt(e.$$.fragment,a),a.forEach(p),this.h()},h(){y(t,"class","mb-2 svelte-njxy10")},m(o,a){D(o,t,a),vt(e,t,null),n=!0},p(o,a){const c=a&132?lo(s,[a&128&&uo(o[7]),a&4&&{class:"flex items-center justify-between gap-2 "+o[2]}]):{};a&1025&&(c.$$scope={dirty:a,ctx:o}),e.$set(c)},i(o){n||(V(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){o&&p(t),It(e)}}}function zh(r){let t;const e=r[9].trigger,n=Dr(e,r,r[10],to);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),t=!0},p(s,i){n&&n.p&&(!t||i&1024)&&Lr(n,e,s,s[10],t?Mr(e,s[10],i,Vh):kr(s[10]),to)},i(s){t||(V(n,s),t=!0)},o(s){$(n,s),t=!1},d(s){n&&n.d(s)}}}function $h(r){let t;const e=r[9].button,n=Dr(e,r,r[10],Xi);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),t=!0},p(s,i){n&&n.p&&(!t||i&1024)&&Lr(n,e,s,s[10],t?Mr(e,s[10],i,xh):kr(s[10]),Xi)},i(s){t||(V(n,s),t=!0)},o(s){$(n,s),t=!1},d(s){n&&n.d(s)}}}function Gh(r){let t,e;return t=new $c({props:{size:"14"}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,s){vt(t,n,s),e=!0},i(n){e||(V(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){It(t,n)}}}function Wh(r){let t,e;return t=new Yc({props:{size:"14"}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,s){vt(t,n,s),e=!0},i(n){e||(V(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){It(t,n)}}}function Yh(r){let t,e,n,s;const i=[Wh,Gh],o=[];function a(c,l){return c[0]?0:1}return t=a(r),e=o[t]=i[t](r),{c(){e.c(),n=vn()},l(c){e.l(c),n=vn()},m(c,l){o[t].m(c,l),D(c,n,l),s=!0},p(c,l){let u=t;t=a(c),t!==u&&(Pe(),$(o[u],1,1,()=>{o[u]=null}),xe(),e=o[t],e||(e=o[t]=i[t](c),e.c()),V(e,1),e.m(n.parentNode,n))},i(c){s||(V(e),s=!0)},o(c){$(e),s=!1},d(c){o[t].d(c),c&&p(n)}}}function eo(r){let t,e,n,s,i,o,a,c;const l=r[9].content,u=Dr(l,r,r[10],Zi);return{c(){t=C("div"),e=C("div"),n=C("div"),u&&u.c(),this.h()},l(b){t=U(b,"DIV",{class:!0});var d=O(t);e=U(d,"DIV",{class:!0});var f=O(e);n=U(f,"DIV",{role:!0,class:!0});var g=O(n);u&&u.l(g),g.forEach(p),f.forEach(p),d.forEach(p),this.h()},h(){y(n,"role","none"),y(n,"class","svelte-njxy10"),y(e,"class","dropdown-content w-full h-full overflow-y-auto max-h-[350px] svelte-njxy10"),y(t,"class","z-1000 origin-top-left absolute left-0 mt-2 w-64 overflow-hidden rounded-xl shadow-2xl shadow-background-700 dark:shadow-background-950 bg-background-50/80 dark:bg-background-800/95 backdrop-blur-sm ring-background-200/5 dark:ring-background-950/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 svelte-njxy10")},m(b,d){D(b,t,d),T(t,e),T(e,n),u&&u.m(n,null),o=!0,a||(c=[Si(Uh.call(null,t,r[4])),Si(s=Ch.call(null,t,{placement:r[1]}))],a=!0)},p(b,d){u&&u.p&&(!o||d&1024)&&Lr(u,l,b,b[10],o?Mr(l,b[10],d,Ph):kr(b[10]),Zi),s&&Nc(s.update)&&d&2&&s.update.call(null,{placement:b[1]})},i(b){o||(V(u,b),Dc(()=>{o&&(i||(i=Ei(t,Ri,{duration:100},!0)),i.run(1))}),o=!0)},o(b){$(u,b),i||(i=Ei(t,Ri,{duration:100},!1)),i.run(0),o=!1},d(b){b&&p(t),u&&u.d(b),b&&i&&i.end(),a=!1,Ms(c)}}}function qh(r){let t,e,n,s,i,o;const a=[zh,jh],c=[];function l(b,d){return b[6].trigger?0:1}e=l(r),n=c[e]=a[e](r);let u=r[0]&&eo(r);return{c(){t=C("div"),n.c(),s=lt(),u&&u.c(),this.h()},l(b){t=U(b,"DIV",{class:!0});var d=O(t);n.l(d),s=ut(d),u&&u.l(d),d.forEach(p),this.h()},h(){y(t,"class",i="inline-block ring-offset-2 rounded-md ring-offset-background-50 dark:ring-offset-background-800 "+r[3]+" svelte-njxy10"),gt(t,"ring-4",r[0])},m(b,d){D(b,t,d),c[e].m(t,null),T(t,s),u&&u.m(t,null),o=!0},p(b,[d]){let f=e;e=l(b),e===f?c[e].p(b,d):(Pe(),$(c[f],1,1,()=>{c[f]=null}),xe(),n=c[e],n?n.p(b,d):(n=c[e]=a[e](b),n.c()),V(n,1),n.m(t,s)),b[0]?u?(u.p(b,d),d&1&&V(u,1)):(u=eo(b),u.c(),V(u,1),u.m(t,null)):u&&(Pe(),$(u,1,1,()=>{u=null}),xe()),(!o||d&8&&i!==(i="inline-block ring-offset-2 rounded-md ring-offset-background-50 dark:ring-offset-background-800 "+b[3]+" svelte-njxy10"))&&y(t,"class",i),(!o||d&9)&&gt(t,"ring-4",b[0])},i(b){o||(V(n),V(u),o=!0)},o(b){$(n),$(u),o=!1},d(b){b&&p(t),c[e].d(),u&&u.d()}}}const Rc="base-dropdown-ctx",k1=()=>kc(Rc),Hh=r=>Lc(Rc,r);function Qh(r,t,e){const n=["placement","isOpen","disabled","buttonClass","class"];let s=wn(t,n),{$$slots:i={},$$scope:o}=t;const a=ao(i);let{placement:c=Oc.BOTTOM}=t,{isOpen:l=!1}=t,{disabled:u=!1}=t,{buttonClass:b=void 0}=t,{class:d=void 0}=t;const f={onClickOutside:_},g=()=>{e(0,l=!l)};function _(){e(0,l=!1)}return Hh({open:()=>e(0,l=!0),close:()=>e(0,l=!1)}),r.$$set=m=>{t=Er(Er({},t),co(m)),e(7,s=wn(t,n)),"placement"in m&&e(1,c=m.placement),"isOpen"in m&&e(0,l=m.isOpen),"disabled"in m&&e(8,u=m.disabled),"buttonClass"in m&&e(2,b=m.buttonClass),"class"in m&&e(3,d=m.class),"$$scope"in m&&e(10,o=m.$$scope)},[l,c,b,d,f,g,a,s,u,i,o]}class Kh extends te{constructor(t){super(),ee(this,t,Qh,qh,re,{placement:1,isOpen:0,disabled:8,buttonClass:2,class:3})}}function ro(r,t,e){const n=r.slice();n[24]=t[e],n[27]=e;const s=n[0].has(n[24].value);return n[25]=s,n}function no(r){let t,e;return t=new Dh({props:{$$slots:{default:[Jh]},$$scope:{ctx:r}}}),{c(){_t(t.$$.fragment)},l(n){wt(t.$$.fragment,n)},m(n,s){vt(t,n,s),e=!0},p(n,s){const i={};s&1048712&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){e||(V(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){It(t,n)}}}function so(r){let t,e;return{c(){t=C("sup"),e=yt("*"),this.h()},l(n){t=U(n,"SUP",{class:!0});var s=O(t);e=mt(s,"*"),s.forEach(p),this.h()},h(){y(t,"class","text-red-700")},m(n,s){D(n,t,s),T(t,e)},d(n){n&&p(t)}}}function Jh(r){let t,e,n=r[3]&&so();return{c(){t=yt(r[7]),n&&n.c(),e=vn()},l(s){t=mt(s,r[7]),n&&n.l(s),e=vn()},m(s,i){D(s,t,i),n&&n.m(s,i),D(s,e,i)},p(s,i){i&128&&Cs(t,s[7]),s[3]?n||(n=so(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(s){s&&p(t),n&&n.d(s),s&&p(e)}}}function Zh(r){let t,e;return{c(){t=C("span"),e=yt(r[8]),this.h()},l(n){t=U(n,"SPAN",{class:!0});var s=O(t);e=mt(s,r[8]),s.forEach(p),this.h()},h(){y(t,"class","text-sm"),gt(t,"opacity-30",r[0].size===0)},m(n,s){D(n,t,s),T(t,e)},p(n,s){s&256&&Cs(e,n[8]),s&1&&gt(t,"opacity-30",n[0].size===0)},i:pt,o:pt,d(n){n&&p(t)}}}function Xh(r){let t;const e=r[18].default,n=Dr(e,r,r[20],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),t=!0},p(s,i){n&&n.p&&(!t||i&1048576)&&Lr(n,e,s,s[20],t?Mr(e,s[20],i,null):kr(s[20]),null)},i(s){t||(V(n,s),t=!0)},o(s){$(n,s),t=!1},d(s){n&&n.d(s)}}}function t1(r){let t,e,n,s;const i=[Xh,Zh],o=[];function a(c,l){return c[13].default?0:1}return e=a(r),n=o[e]=i[e](r),{c(){t=C("span"),n.c(),this.h()},l(c){t=U(c,"SPAN",{slot:!0});var l=O(t);n.l(l),l.forEach(p),this.h()},h(){y(t,"slot","button")},m(c,l){D(c,t,l),o[e].m(t,null),s=!0},p(c,l){let u=e;e=a(c),e===u?o[e].p(c,l):(Pe(),$(o[u],1,1,()=>{o[u]=null}),xe(),n=o[e],n?n.p(c,l):(n=o[e]=i[e](c),n.c()),V(n,1),n.m(t,null))},i(c){s||(V(n),s=!0)},o(c){$(n),s=!1},d(c){c&&p(t),o[e].d()}}}function e1(r){let t,e,n,s;return e=new Vc({}),{c(){t=C("i"),_t(e.$$.fragment),this.h()},l(i){t=U(i,"I",{});var o=O(t);wt(e.$$.fragment,o),o.forEach(p),this.h()},h(){t.hidden=n=!r[25]},m(i,o){D(i,t,o),vt(e,t,null),s=!0},p(i,o){(!s||o&3&&n!==(n=!i[25]))&&(t.hidden=n)},i(i){s||(V(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){i&&p(t),It(e)}}}function r1(r){let t,e,n;return{c(){t=C("div"),e=C("div"),this.h()},l(s){t=U(s,"DIV",{class:!0});var i=O(t);e=U(i,"DIV",{class:!0}),O(e).forEach(p),i.forEach(p),this.h()},h(){e.hidden=n=!r[25],y(e,"class","rounded-full w-3 h-3 bg-primary-500"),y(t,"class","rounded-full op w-6 h-6 border-2 flex items-center justify-center"),gt(t,"border-foreground-500",!r[25]),gt(t,"border-primary-500",r[25])},m(s,i){D(s,t,i),T(t,e)},p(s,i){i&3&&n!==(n=!s[25])&&(e.hidden=n),i&3&&gt(t,"border-foreground-500",!s[25]),i&3&&gt(t,"border-primary-500",s[25])},i:pt,o:pt,d(s){s&&p(t)}}}function io(r){let t,e,n,s,i,o,a,c=r[24].label+"",l,u,b,d,f;const g=[r1,e1],_=[];function m(I,z){return I[4]?0:1}s=m(r),i=_[s]=g[s](r);function S(){return r[19](r[24])}return{c(){t=C("li"),e=C("button"),n=C("div"),i.c(),o=lt(),a=C("span"),l=yt(c),u=lt(),this.h()},l(I){t=U(I,"LI",{class:!0});var z=O(t);e=U(z,"BUTTON",{class:!0});var q=O(e);n=U(q,"DIV",{class:!0});var ct=O(n);i.l(ct),ct.forEach(p),o=ut(q),a=U(q,"SPAN",{});var at=O(a);l=mt(at,c),at.forEach(p),q.forEach(p),u=ut(z),z.forEach(p),this.h()},h(){y(n,"class","w-6 pt pb"),gt(a,"font-bold",r[25]),gt(a,"opacity-60",!r[25]),y(e,"class","p-2 hover:bg-primary-100 dark:hover:bg-secondary-700 w-full text-left flex gap-2"),y(t,"class","border-spacing-1 border-b dark:border-background-900 last:border-b-0")},m(I,z){D(I,t,z),T(t,e),T(e,n),_[s].m(n,null),T(e,o),T(e,a),T(a,l),T(t,u),b=!0,d||(f=Ke(e,"click",S),d=!0)},p(I,z){r=I;let q=s;s=m(r),s===q?_[s].p(r,z):(Pe(),$(_[q],1,1,()=>{_[q]=null}),xe(),i=_[s],i?i.p(r,z):(i=_[s]=g[s](r),i.c()),V(i,1),i.m(n,null)),(!b||z&2)&&c!==(c=r[24].label+"")&&Cs(l,c),(!b||z&3)&&gt(a,"font-bold",r[25]),(!b||z&3)&&gt(a,"opacity-60",!r[25])},i(I){b||(V(i),b=!0)},o(I){$(i),b=!1},d(I){I&&p(t),_[s].d(),d=!1,f()}}}function oo(r){let t,e,n,s,i,o;return n=new Sn({props:{size:Fi.SM,color:Uc.PRIMARY,$$slots:{default:[n1]},$$scope:{ctx:r}}}),n.$on("click",r[11]),i=new Sn({props:{size:Fi.SM,$$slots:{default:[s1]},$$scope:{ctx:r}}}),i.$on("click",r[10]),{c(){t=C("div"),e=C("div"),_t(n.$$.fragment),s=lt(),_t(i.$$.fragment),this.h()},l(a){t=U(a,"DIV",{class:!0});var c=O(t);e=U(c,"DIV",{class:!0});var l=O(e);wt(n.$$.fragment,l),s=ut(l),wt(i.$$.fragment,l),l.forEach(p),c.forEach(p),this.h()},h(){y(e,"class","p-2 flex justify-end gap-2"),y(t,"class","sticky bottom-0 left-0 right-0 border-t dark:border-t-background-700 bg-background-50 dark:bg-background-800 backdrop-blur-sm")},m(a,c){D(a,t,c),T(t,e),vt(n,e,null),T(e,s),vt(i,e,null),o=!0},p(a,c){const l={};c&1048576&&(l.$$scope={dirty:c,ctx:a}),n.$set(l);const u={};c&1048576&&(u.$$scope={dirty:c,ctx:a}),i.$set(u)},i(a){o||(V(n.$$.fragment,a),V(i.$$.fragment,a),o=!0)},o(a){$(n.$$.fragment,a),$(i.$$.fragment,a),o=!1},d(a){a&&p(t),It(n),It(i)}}}function n1(r){let t;return{c(){t=yt("Select all")},l(e){t=mt(e,"Select all")},m(e,n){D(e,t,n)},d(e){e&&p(t)}}}function s1(r){let t;return{c(){t=yt("Clear")},l(e){t=mt(e,"Clear")},m(e,n){D(e,t,n)},d(e){e&&p(t)}}}function i1(r){let t,e,n,s,i=r[1],o=[];for(let l=0;l<i.length;l+=1)o[l]=io(ro(r,i,l));const a=l=>$(o[l],1,1,()=>{o[l]=null});let c=!r[4]&&oo(r);return{c(){t=C("div"),e=C("ul");for(let l=0;l<o.length;l+=1)o[l].c();n=lt(),c&&c.c(),this.h()},l(l){t=U(l,"DIV",{slot:!0});var u=O(t);e=U(u,"UL",{});var b=O(e);for(let d=0;d<o.length;d+=1)o[d].l(b);b.forEach(p),n=ut(u),c&&c.l(u),u.forEach(p),this.h()},h(){y(t,"slot","content")},m(l,u){D(l,t,u),T(t,e);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);T(t,n),c&&c.m(t,null),s=!0},p(l,u){if(u&531){i=l[1];let b;for(b=0;b<i.length;b+=1){const d=ro(l,i,b);o[b]?(o[b].p(d,u),V(o[b],1)):(o[b]=io(d),o[b].c(),V(o[b],1),o[b].m(e,null))}for(Pe(),b=i.length;b<o.length;b+=1)a(b);xe()}l[4]?c&&(Pe(),$(c,1,1,()=>{c=null}),xe()):c?(c.p(l,u),u&16&&V(c,1)):(c=oo(l),c.c(),V(c,1),c.m(t,null))},i(l){if(!s){for(let u=0;u<i.length;u+=1)V(o[u]);V(c),s=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$(o[u]);$(c),s=!1},d(l){l&&p(t),Mc(o,l),c&&c.d()}}}function o1(r){let t,e,n,s,i=r[7]!==void 0&&no(r);const o=[{buttonClass:r[6]?"w-full":void 0},{isOpen:r[2]},{disabled:!(r[1]&&r[1].length>0)||r[5]},r[12]];let a={$$slots:{content:[i1],button:[t1]},$$scope:{ctx:r}};for(let c=0;c<o.length;c+=1)a=Er(a,o[c]);return n=new Kh({props:a}),{c(){t=C("div"),i&&i.c(),e=lt(),_t(n.$$.fragment),this.h()},l(c){t=U(c,"DIV",{class:!0});var l=O(t);i&&i.l(l),e=ut(l),wt(n.$$.fragment,l),l.forEach(p),this.h()},h(){y(t,"class","flex-col"),gt(t,"flex",r[6]),gt(t,"inline-flex",!r[6])},m(c,l){D(c,t,l),i&&i.m(t,null),T(t,e),vt(n,t,null),s=!0},p(c,[l]){c[7]!==void 0?i?(i.p(c,l),l&128&&V(i,1)):(i=no(c),i.c(),V(i,1),i.m(t,e)):i&&(Pe(),$(i,1,1,()=>{i=null}),xe());const u=l&4198?lo(o,[l&64&&{buttonClass:c[6]?"w-full":void 0},l&4&&{isOpen:c[2]},l&34&&{disabled:!(c[1]&&c[1].length>0)||c[5]},l&4096&&uo(c[12])]):{};l&1057043&&(u.$$scope={dirty:l,ctx:c}),n.$set(u),(!s||l&64)&&gt(t,"flex",c[6]),(!s||l&64)&&gt(t,"inline-flex",!c[6])},i(c){s||(V(i),V(n.$$.fragment,c),s=!0)},o(c){$(i),$(n.$$.fragment,c),s=!1},d(c){c&&p(t),i&&i.d(),It(n)}}}function a1(r,t,e){const n=["isOpen","required","singular","disabled","expand","label","selection","optionOrderer","options","meta","values","optionConstructor"];let s=wn(t,n),{$$slots:i={},$$scope:o}=t;const a=ao(i);let{isOpen:c=!1}=t,{required:l=!1}=t,{singular:u=!1}=t,{disabled:b=!1}=t,{expand:d=!0}=t,{label:f=void 0}=t,{selection:g=new Set}=t,{optionOrderer:_=void 0}=t,{options:m=[]}=t,{meta:S=void 0}=t,{values:I=void 0}=t,{optionConstructor:z=void 0}=t;const q=ho();function ct(v,De){e(1,m=v.map((jt,zt)=>De(jt,zt,S))),_&&e(1,m=m.sort(_)),e(0,g=new Set(m.filter(jt=>jt.initiallySelected).map(jt=>jt.value)));const Kt=m.filter(jt=>g.has(jt.value)),lr=Vt(Kt);lr!==at&&e(8,at=lr)}let at=Vt(m.filter(v=>g.has(v.value)));function xt(v){if(u){e(0,g=new Set([v.value])),q("select",{selected:[v],meta:S});return}g.has(v.value)?g.delete(v.value):g.add(v.value),e(0,g=new Set(g));const De=m.filter(Kt=>g.has(Kt.value));q("select",{selected:De,meta:S})}function He(){e(0,g=new Set),q("select",{selected:[],meta:S})}function se(){e(0,g=new Set(m.map(v=>v.value))),q("select",{selected:m,meta:S})}function Vt(v){return v.length===0?"Select":u?v[0].label||"Select":m.length===v.length?"All selected":`(${v.length}) selected`}const Pr=v=>xt(v);return r.$$set=v=>{t=Er(Er({},t),co(v)),e(12,s=wn(t,n)),"isOpen"in v&&e(2,c=v.isOpen),"required"in v&&e(3,l=v.required),"singular"in v&&e(4,u=v.singular),"disabled"in v&&e(5,b=v.disabled),"expand"in v&&e(6,d=v.expand),"label"in v&&e(7,f=v.label),"selection"in v&&e(0,g=v.selection),"optionOrderer"in v&&e(14,_=v.optionOrderer),"options"in v&&e(1,m=v.options),"meta"in v&&e(15,S=v.meta),"values"in v&&e(16,I=v.values),"optionConstructor"in v&&e(17,z=v.optionConstructor),"$$scope"in v&&e(20,o=v.$$scope)},r.$$.update=()=>{r.$$.dirty&16386&&_&&e(1,m=m.sort(_)),r.$$.dirty&3&&e(8,at=Vt(m.filter(v=>g.has(v.value)))),r.$$.dirty&196608&&I&&z&&ct(I,z)},[g,m,c,l,u,b,d,f,at,xt,He,se,s,a,_,S,I,z,i,Pr,o]}class c1 extends te{constructor(t){super(),ee(this,t,a1,o1,re,{isOpen:2,required:3,singular:4,disabled:5,expand:6,label:7,selection:0,optionOrderer:14,options:1,meta:15,values:16,optionConstructor:17})}}function l1(r){let t;return{c(){t=C("hr"),this.h()},l(e){t=U(e,"HR",{class:!0}),this.h()},h(){y(t,"class","mt-4 mb-2 w-full dark:border-background-950")},m(e,n){D(e,t,n)},p:pt,i:pt,o:pt,d(e){e&&p(t)}}}class un extends te{constructor(t){super(),ee(this,t,null,l1,re,{})}}function u1(r){let t;return{c(){t=yt("Load")},l(e){t=mt(e,"Load")},m(e,n){D(e,t,n)},d(e){e&&p(t)}}}function d1(r){let t,e,n,s,i,o,a,c,l,u,b,d,f,g,_,m,S,I,z,q,ct,at,xt,He,se,Vt,Pr,v,De,Kt,lr,jt,zt,ie,is,Le,nn,os,mi;return a=new c1({props:{options:r[1]}}),a.$on("select",r[2]),u=new un({}),_=new un({}),q=new Fh({props:{onFileDropped:r[3]}}),xt=new un({}),v=new un({}),Le=new Sn({props:{$$slots:{default:[u1]},$$scope:{ctx:r}}}),{c(){t=C("h2"),e=yt("Please select filter family"),n=lt(),s=C("p"),i=yt("from filter data provided by us"),o=lt(),_t(a.$$.fragment),c=lt(),l=C("div"),_t(u.$$.fragment),b=lt(),d=C("div"),f=yt("OR"),g=lt(),_t(_.$$.fragment),m=lt(),S=C("p"),I=yt("your own dataset in CSV format"),z=lt(),_t(q.$$.fragment),ct=lt(),at=C("div"),_t(xt.$$.fragment),He=lt(),se=C("div"),Vt=yt("OR"),Pr=lt(),_t(v.$$.fragment),De=lt(),Kt=C("p"),lr=yt("a CSV dataset from url"),jt=lt(),zt=C("form"),ie=C("input"),is=lt(),_t(Le.$$.fragment),this.h()},l(w){t=U(w,"H2",{class:!0});var nt=O(t);e=mt(nt,"Please select filter family"),nt.forEach(p),n=ut(w),s=U(w,"P",{class:!0});var xr=O(s);i=mt(xr,"from filter data provided by us"),xr.forEach(p),o=ut(w),wt(a.$$.fragment,w),c=ut(w),l=U(w,"DIV",{class:!0});var we=O(l);wt(u.$$.fragment,we),b=ut(we),d=U(we,"DIV",{class:!0});var _i=O(d);f=mt(_i,"OR"),_i.forEach(p),g=ut(we),wt(_.$$.fragment,we),we.forEach(p),m=ut(w),S=U(w,"P",{class:!0});var wi=O(S);I=mt(wi,"your own dataset in CSV format"),wi.forEach(p),z=ut(w),wt(q.$$.fragment,w),ct=ut(w),at=U(w,"DIV",{class:!0});var ur=O(at);wt(xt.$$.fragment,ur),He=ut(ur),se=U(ur,"DIV",{class:!0});var vi=O(se);Vt=mt(vi,"OR"),vi.forEach(p),Pr=ut(ur),wt(v.$$.fragment,ur),ur.forEach(p),De=ut(w),Kt=U(w,"P",{class:!0});var Ii=O(Kt);lr=mt(Ii,"a CSV dataset from url"),Ii.forEach(p),jt=ut(w),zt=U(w,"FORM",{class:!0});var sn=O(zt);ie=U(sn,"INPUT",{type:!0,placeholder:!0,class:!0}),is=ut(sn),wt(Le.$$.fragment,sn),sn.forEach(p),this.h()},h(){y(t,"class","text-2xl font-bold mb-5"),y(s,"class","mb-2"),y(d,"class","mx-4 opacity-50"),y(l,"class","flex mt-5 mb-5 items-center justify-center"),y(S,"class","mb-2"),y(se,"class","mx-4 opacity-50"),y(at,"class","flex mt-5 mb-5 items-center justify-center"),y(Kt,"class","mb-2"),y(ie,"type","url"),y(ie,"placeholder","URL"),y(ie,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),y(zt,"class","flex gap-2")},m(w,nt){D(w,t,nt),T(t,e),D(w,n,nt),D(w,s,nt),T(s,i),D(w,o,nt),vt(a,w,nt),D(w,c,nt),D(w,l,nt),vt(u,l,null),T(l,b),T(l,d),T(d,f),T(l,g),vt(_,l,null),D(w,m,nt),D(w,S,nt),T(S,I),D(w,z,nt),vt(q,w,nt),D(w,ct,nt),D(w,at,nt),vt(xt,at,null),T(at,He),T(at,se),T(se,Vt),T(at,Pr),vt(v,at,null),D(w,De,nt),D(w,Kt,nt),T(Kt,lr),D(w,jt,nt),D(w,zt,nt),T(zt,ie),Ti(ie,r[0]),T(zt,is),vt(Le,zt,null),nn=!0,os||(mi=[Ke(ie,"input",r[7]),Ke(zt,"submit",r[4])],os=!0)},p(w,[nt]){const xr={};nt&2&&(xr.options=w[1]),a.$set(xr),nt&1&&ie.value!==w[0]&&Ti(ie,w[0]);const we={};nt&512&&(we.$$scope={dirty:nt,ctx:w}),Le.$set(we)},i(w){nn||(V(a.$$.fragment,w),V(u.$$.fragment,w),V(_.$$.fragment,w),V(q.$$.fragment,w),V(xt.$$.fragment,w),V(v.$$.fragment,w),V(Le.$$.fragment,w),nn=!0)},o(w){$(a.$$.fragment,w),$(u.$$.fragment,w),$(_.$$.fragment,w),$(q.$$.fragment,w),$(xt.$$.fragment,w),$(v.$$.fragment,w),$(Le.$$.fragment,w),nn=!1},d(w){w&&p(t),w&&p(n),w&&p(s),w&&p(o),It(a,w),w&&p(c),w&&p(l),It(u),It(_),w&&p(m),w&&p(S),w&&p(z),It(q,w),w&&p(ct),w&&p(at),It(xt),It(v),w&&p(De),w&&p(Kt),w&&p(jt),w&&p(zt),It(Le),os=!1,Ms(mi)}}}function h1(r,t,e){let n,s;Oi(r,Zt,d=>e(5,n=d)),Oi(r,Sh,d=>e(6,s=d));var i=void 0,o;const a=ho();function c(d){const f=s.preloadedTables.filter(g=>g.value===d.detail.selected[0].value);a("select",{buildInTables:f})}function l(d){a("select",{externalTables:{fileList:d}})}function u(){if(!i)return;const d=new URL(i);console.log("URL selected:",d),a("select",{externalTables:{url:d}})}function b(){i=this.value,e(0,i)}return r.$$.update=()=>{r.$$.dirty&96&&e(1,o=s.preloadedTables.filter(d=>Object.keys(n.tables).findIndex(f=>f===d.value.name)===-1))},[i,o,c,l,u,n,s,b]}class M1 extends te{constructor(t){super(),ee(this,t,h1,d1,re,{})}}export{Yc as C,c1 as D,m1 as G,Dh as L,_1 as M,Oc as P,M1 as T,Zt as a,un as b,ts as c,Lh as d,ln as e,Sh as f,D1 as g,Gt as h,Kh as i,k1 as j,$c as k,L1 as l,Ic as m,Ec as p};
